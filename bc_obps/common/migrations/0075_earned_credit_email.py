# Generated by Django 5.1.10 on 2025-09-02 21:57

from django.db import migrations


def create_earned_credit_notice_email_template(apps, schema_editor):
    """
    Creates EmailNotificationTemplate for the Notice of Earned Credits Generated.
    """
    EmailNotificationTemplate = apps.get_model('common', 'EmailNotificationTemplate')
    EmailNotificationTemplate.objects.create(
        name='Notice of Earned Credits Generated',
        subject='BCIERS Notification – Earned Credits Available to Request ',
        body='''
        <h1>{{testing_name}}</h1>
            <p style="text-align: center;">Province of British Columbia</p>
            <p style="text-align: center;">B.C. Industrial Emissions Reporting System (BCIERS)</p><br>
            <p>Dear {{ operator_legal_name }},</p><br>
            <p>You can now review and request your earned credits using the BC Industrial Emissions Reporting System (BCIERS).
            </p><br>
            <p>Based on the information submitted in <b>{{operation_name}}</b>’s Annual Report for the {{compliance_year}} compliance period, you can now request an issuance of {{earned_credit_amount}} earned credit(s).
            </p><br>
            <p>To submit your earned credit request or review how it was calculated, please log-into BCIERS at <a href="https://registration.industrialemissions.gov.bc.ca">https://industrialemissions.gov.bc.ca/onboarding</a>.</p><br>

            <p><br>To request earned credit issuance: </p><br>

<ol><li>Navigate to the Compliance module and click <em>My Compliance</em> > <em>Compliance Summaries</em>. </li> 



<li>Find your operation in the grid and click <em>Request Issuance of Credits</em>.  </ol></li>

<p><br><b>Please note:</b> To receive your credits, you need to have an Operator of Regulated Operation account in the B.C. Carbon Registry. If you do not have an account of this type, please follow the steps outline here: <a href="https://www2.gov.bc.ca/gov/content/environment/climate-change/industry/offset-projects/bc-carbon-registry">Accessing the BC Carbon Registry - Province of British Columbia</a>.</p><br>

<p><br><em>Please do not reply to this email. This email is auto-generated and sent from an unmonitored address. If you have any questions, or need further assistance, please reach out to our support team at <a href="mailto:GHGRegulator@gov.bc.ca">GHGRegulator@gov.bc.ca</a>.</em></p><br>

<p>Best Regards,</p>
<p>Ministry of Energy and Climate Solutions</p>
<p>Email: <a href="mailto:GHGRegulator@gov.bc.ca">GHGRegulator@gov.bc.ca</a></p>
<p>Website: <a href="https://www2.gov.bc.ca/gov/content/environment/climate-change/industry/bc-output-based-pricing-system">BC Government Website Link</a></p>
        ''',
    )


def reverse_earned_credit_notice_email_template(apps, schema_editor):
    """
    Reverses the creation of the EmailNotificationTemplate for Notice of Earned Credits Generated.
    """
    EmailNotificationTemplate = apps.get_model('common', 'EmailNotificationTemplate')
    EmailNotificationTemplate.objects.filter(name='Notice of Earned Credits Generated').delete()


class Migration(migrations.Migration):
    dependencies = [
        ('common', '0074_V3_17_1'),
    ]

    operations = [
        migrations.RunPython(
            create_earned_credit_notice_email_template,
            reverse_earned_credit_notice_email_template,
            elidable=True,
        )
    ]
