# Generated by Django 5.1.12 on 2025-09-15 11:59

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('compliance', '0030_generate_compliance_reports'),
    ]

    operations = [
        migrations.AlterField(
            model_name='elicensingadjustment',
            name='comment',
            field=models.CharField(blank=True, db_comment='Comments on adjustment in elicensing', null=True),
        ),
        migrations.AlterField(
            model_name='elicensingadjustment',
            name='reason',
            field=models.CharField(
                blank=True,
                choices=[
                    ('Supplementary Report Adjustment', 'Supplementary Report Adjustment'),
                    (
                        'Supplementary Report Adjustment to Void Invoice',
                        'Supplementary Report Adjustment To Void Invoice',
                    ),
                    ('Compliance Units Applied', 'Compliance Units Applied'),
                ],
                db_comment='Reason for adjustment in elicensing',
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='elicensingadjustment',
            name='type',
            field=models.CharField(blank=True, db_comment='Type of adjustment in elicensing', null=True),
        ),
        migrations.AddConstraint(
            model_name='elicensingadjustment',
            constraint=models.CheckConstraint(
                condition=models.Q(
                    ('reason__isnull', True),
                    models.Q(
                        (
                            'reason__in',
                            ['Supplementary Report Adjustment', 'Supplementary Report Adjustment to Void Invoice'],
                        ),
                        _negated=True,
                    ),
                    ('supplementary_compliance_report_version__isnull', False),
                    _connector='OR',
                ),
                name='supp_reasons_require_supp_version',
            ),
        ),
    ]
