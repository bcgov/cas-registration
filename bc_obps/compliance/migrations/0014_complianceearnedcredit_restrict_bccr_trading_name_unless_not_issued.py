# Generated by Django 5.1.10 on 2025-07-02 16:27

import pgtrigger.compiler
import pgtrigger.migrations
from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ('compliance', '0013_alter_compliancereportversion_status'),
    ]

    operations = [
        pgtrigger.migrations.AddTrigger(
            model_name='complianceearnedcredit',
            trigger=pgtrigger.compiler.Trigger(
                name='restrict_bccr_trading_name_unless_not_issued',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."bccr_trading_name" IS NULL OR NEW."bccr_trading_name" = \'\')',
                    func='\n                    if new.issuance_status != \'Credits Not Issued in BCCR\' then\n                        raise exception \'bccr_trading_name cannot be empty unless issuance_status is "Credits Not Issued in BCCR"\';\n                    end if;\n                    return new;\n                ',
                    hash='6510ce1c6c155f81008292bff7b206edb4497495',
                    operation='INSERT OR UPDATE',
                    pgid='pgtrigger_restrict_bccr_trading_name_unless_not_issued_847c9',
                    table='erc"."compliance_earned_credit',
                    when='BEFORE',
                ),
            ),
        ),
    ]
