# Generated by Django 5.0.8 on 2024-11-27 17:24

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('registration', '0058_regulatedproduct_add_isregulated_and_unit'),
        ('reporting', '0034_reportattachment_and_more'),
    ]

    operations = [
        migrations.AddField(
            model_name='reportproduct',
            name='production_methodology_description',
            field=models.CharField(
                blank=True,
                db_comment="In case the production methodology is 'other', industrial reporters are required to enter details about the methodology used.",
                max_length=10000,
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='reportproduct',
            name='production_methodology',
            field=models.CharField(
                choices=[('OBPS Calculator', 'Obps Calculator'), ('other', 'Other')],
                db_comment='The production methodoogy used to make this product',
                default='OBPS Calculator',
                max_length=10000,
            ),
        ),
        migrations.AddConstraint(
            model_name='reportproduct',
            constraint=models.CheckConstraint(
                check=models.Q(
                    ('production_methodology', 'other'),
                    ('production_methodology_description__isnull', True),
                    _negated=True,
                ),
                name='other_methodology_must_have_description',
                violation_error_message="A value for production_methodology_description should be provided if the production_methodology is 'other'",
            ),
        ),
    ]
