# Generated by Django 5.1.10 on 2025-07-16 23:26

from django.db import migrations


def update_emission_category_mapping_data(apps, schema_monitor):
    '''
    Add initial data to erc.emission_category_mapping
    '''

    EmissionCategoryMapping = apps.get_model('reporting', 'EmissionCategoryMapping')
    EmissionCategory = apps.get_model('reporting', 'EmissionCategory')
    Activity = apps.get_model('registration', 'Activity')
    SourceType = apps.get_model('reporting', 'SourceType')
    EmissionCategoryMapping.objects.bulk_create(
        [
            EmissionCategoryMapping(
                activity=Activity.objects.get(name='Petroleum refining'),
                source_type=SourceType.objects.get(name='Uncontrolled blowdown systems used at refineries'),
                emission_category=EmissionCategory.objects.get(category_name='Fugitive emissions'),
            ),
            EmissionCategoryMapping(
                activity=Activity.objects.get(name='Petrochemical production'),
                source_type=SourceType.objects.get(name='Process units'),
                emission_category=EmissionCategory.objects.get(category_name='Industrial process emissions'),
            ),
        ]
    )


def reverse_update_emission_category_mapping_data(apps, schema_monitor):
    '''
    Remove initial data from erc.emission_category_mapping
    '''
    EmissionCategoryMapping = apps.get_model('reporting', 'EmissionCategoryMapping')
    EmissionCategory = apps.get_model('reporting', 'EmissionCategory')
    Activity = apps.get_model('registration', 'Activity')
    SourceType = apps.get_model('reporting', 'SourceType')
    EmissionCategoryMapping.objects.get(
        activity=Activity.objects.get(name='Petroleum refining'),
        source_type=SourceType.objects.get(name='Uncontrolled blowdown systems used at refineries'),
        emission_category=EmissionCategory.objects.get(category_name='Fugitive emissions'),
    ).delete()
    EmissionCategoryMapping.objects.get(
        activity=Activity.objects.get(name='Petrochemical production'),
        source_type=SourceType.objects.get(name='Process units'),
        emission_category=EmissionCategory.objects.get(category_name='Industrial process emissions'),
    ).delete()


class Migration(migrations.Migration):

    dependencies = [
        ('reporting', '0120_V3_11_0'),
    ]

    operations = [
        migrations.RunPython(update_emission_category_mapping_data, reverse_update_emission_category_mapping_data),
    ]
