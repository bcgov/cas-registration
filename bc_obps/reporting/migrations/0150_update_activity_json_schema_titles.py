# Generated by Django 5.1.15 on 2026-01-29 23:45

from django.db import migrations


def update_activity_schema_titles(apps, schema_editor):

    import os
    import json

    ActivitySchema = apps.get_model('reporting', 'ActivityJsonSchema')
    Activity = apps.get_model('registration', 'Activity')

    cwd = os.getcwd()
    with open(
        f'{cwd}/reporting/json_schemas/2024/gsc_excluding_line_tracing/activity.json'
    ) as gsc_excluding_line_tracing:
        gsc_excluding_line_tracing_schema = json.load(gsc_excluding_line_tracing)

    ActivitySchema.objects.filter(activity_id=Activity.objects.get(slug='gsc_excluding_line_tracing').id).update(
        json_schema=gsc_excluding_line_tracing_schema
    )

    with open(
        f'{cwd}/reporting/json_schemas/2024/gsc_non_compression_non_combustion/activity.json'
    ) as gsc_non_compression_non_combustion:
        gsc_non_compression_non_combustion_schema = json.load(gsc_non_compression_non_combustion)

    ActivitySchema.objects.filter(activity_id=Activity.objects.get(slug='gsc_non_compression').id).update(
        json_schema=gsc_non_compression_non_combustion_schema
    )

    with open(
        f'{cwd}/reporting/json_schemas/2024/gsc_other_than_non_compression/activity.json'
    ) as gsc_other_than_non_compression:
        gsc_other_than_non_compression_schema = json.load(gsc_other_than_non_compression)

    ActivitySchema.objects.filter(activity_id=Activity.objects.get(slug='gsc_other_than_non_compression').id).update(
        json_schema=gsc_other_than_non_compression_schema
    )

    with open(
        f'{cwd}/reporting/json_schemas/2024/gsc_solely_for_line_tracing/activity.json'
    ) as gsc_solely_for_line_tracing:
        gsc_solely_for_line_tracing_schema = json.load(gsc_solely_for_line_tracing)

    ActivitySchema.objects.filter(activity_id=Activity.objects.get(slug='gsc_solely_for_line_tracing').id).update(
        json_schema=gsc_solely_for_line_tracing_schema
    )

    with open(
        f'{cwd}/reporting/json_schemas/2024/og_extraction_non_compression/activity.json'
    ) as og_extraction_non_compression:
        og_extraction_non_compression_schema = json.load(og_extraction_non_compression)

    ActivitySchema.objects.filter(activity_id=Activity.objects.get(slug='og_activities_non_compression').id).update(
        json_schema=og_extraction_non_compression_schema
    )

    with open(
        f'{cwd}/reporting/json_schemas/2024/og_extraction_other_than_ncnp/activity.json'
    ) as og_extraction_compression:
        og_extraction_compression_schema = json.load(og_extraction_compression)

    ActivitySchema.objects.filter(
        activity_id=Activity.objects.get(slug='og_activities_other_than_non_compression').id
    ).update(json_schema=og_extraction_compression_schema)

    with open(f'{cwd}/reporting/json_schemas/2024/ng_non_compression/activity.json') as ng_non_compression:
        ng_non_compression_schema = json.load(ng_non_compression)

    ActivitySchema.objects.filter(
        activity_id=Activity.objects.get(slug='natural_gas_activities_non_compression').id
    ).update(json_schema=ng_non_compression_schema)

    with open(
        f'{cwd}/reporting/json_schemas/2024/ng_other_than_non_compression/activity.json'
    ) as ng_other_than_non_compression:
        ng_other_than_non_compression_schema = json.load(ng_other_than_non_compression)

    ActivitySchema.objects.filter(
        activity_id=Activity.objects.get(slug='natural_gas_activities_other_than_non_compression').id
    ).update(json_schema=ng_other_than_non_compression_schema)


class Migration(migrations.Migration):

    dependencies = [
        ('reporting', '0149_V5_0_1'),
        ('registration', '0156_activity_display_and_regulated_name'),
    ]
    operations = [migrations.RunPython(update_activity_schema_titles)]
