# Generated by Django 5.0.13 on 2025-04-08 18:07

from django.db import migrations, models


def add_missing_products(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.create(
        name='Mining: critical mineral, other than copper',
        is_regulated=True,
    )
    RegulatedProduct.objects.create(
        name='Smelting: critical mineral, other than aluminun and lead-zinc',
        is_regulated=True,
    )
    RegulatedProduct.objects.create(
        name='Refineries line tracing',
        is_regulated=False,
    )


def reverse_add_missing_products(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.filter(
        name='Mining: critical mineral, other than copper',
    ).delete()
    RegulatedProduct.objects.filter(
        name='Smelting: critical mineral, other than aluminun and lead-zinc',
    ).delete()
    RegulatedProduct.objects.filter(
        name='Refineries line tracing',
    ).delete()


class Migration(migrations.Migration):

    dependencies = [
        ('registration', '0103_historicaluser_archived_at_and_more'),
    ]

    operations = [
        migrations.AlterField(
            model_name='historicalregulatedproduct',
            name='unit',
            field=models.CharField(
                db_comment='The unit of measure for a regulated product', default='N/A', max_length=1000
            ),
        ),
        migrations.AlterField(
            model_name='regulatedproduct',
            name='unit',
            field=models.CharField(
                db_comment='The unit of measure for a regulated product', default='N/A', max_length=1000
            ),
        ),
        migrations.RunPython(add_missing_products, reverse_add_missing_products),
    ]
