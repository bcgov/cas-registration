# Generated by Django 5.1.15 on 2026-02-14 00:18

import django.core.validators
import django.db.migrations.operations.special
import django.db.models.deletion
import localflavor.ca.models
import pgtrigger.compiler
import pgtrigger.migrations
import phonenumber_field.modelfields
import simple_history.models
import uuid
from django.db import migrations, models


def init_app_role_data(apps, schema_monitor):
    """
    Add initial data to erc.app_role
    """
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    AppRole = apps.get_model('registration', 'AppRole')
    AppRole.objects.bulk_create(
        [
            AppRole(
                role_name='cas_admin',
                role_description='Admin user from the BC Government. Highest government user privilege.',
            ),
            AppRole(
                role_name='cas_analyst',
                role_description='Analyst user from the BC Government. Lower access privileges than cas_admin.',
            ),
            AppRole(
                role_name='cas_pending',
                role_description='Pending BC Government user. Requires access to be granted by an admin before having any privileges.',
            ),
            AppRole(
                role_name='industry_user',
                role_description='External user from industry. All industry_users have the same initial privileges. Their privileges for individual operators are further defined and applied in the user_operator through table.',
            ),
        ]
    )


def reverse_init_app_role_data(apps, schema_monitor):
    """
    Remove initial data from erc.app_role
    """
    AppRole = apps.get_model('registration', 'AppRole')
    AppRole.objects.filter(role_name__in=['cas_admin', 'cas_analyst', 'cas_pending', 'industry_user']).delete()


def init_business_role_data(apps, schema_monitor):
    """
    Add initial data to erc.business_role
    """
    BusinessRole = apps.get_model('registration', 'BusinessRole')
    BusinessRole.objects.bulk_create(
        [
            BusinessRole(
                role_name='Senior Officer',
                role_description='A person who has the authority to make decisions on behalf of the business.',
            ),
            BusinessRole(
                role_name='Operation Representative',
                role_description='A person who is responsible for the day-to-day operations of the business.',
            ),
            BusinessRole(
                role_name='Authorized Signing Officer',
                role_description='A person who has the authority to sign documents on behalf of the business.',
            ),
            BusinessRole(
                role_name='Operation Registration Lead',
                role_description='A person who is responsible for registering operations on behalf of the business.',
            ),
        ]
    )


def reverse_init_business_role_data(apps, schema_monitor):
    """
    Remove initial data from erc.business_role
    """
    BusinessRole = apps.get_model('registration', 'BusinessRole')
    BusinessRole.objects.filter(
        role_name__in=[
            'Senior Officer',
            'Operation Representative',
            'Authorized Signing Officer',
            'Operation Registration Lead',
        ]
    ).delete()


def init_business_structure_data(apps, schema_monitor):
    """
    Add initial data to erc.business_structure
    """
    BusinessStructure = apps.get_model('registration', 'BusinessStructure')
    BusinessStructure.objects.bulk_create(
        [
            BusinessStructure(name='General Partnership'),
            BusinessStructure(name='BC Corporation'),
            BusinessStructure(name='Extra Provincially Registered Company'),
            BusinessStructure(name='Sole Proprietorship'),
            BusinessStructure(name='Limited Liability Partnership'),
            BusinessStructure(name='BC Incorporated Society'),
            BusinessStructure(name='Extraprovincial Non-Share Corporation'),
        ]
    )


def reverse_init_business_structure_data(apps, schema_monitor):
    """
    Remove initial data from erc.business_structure
    """
    BusinessStructure = apps.get_model('registration', 'BusinessStructure')
    BusinessStructure.objects.filter(
        name__in=[
            'General Partnership',
            'BC Corporation',
            'Extra Provincially Registered Company',
            'Sole Proprietorship',
            'Limited Liability Partnership',
            'BC Incorporated Society',
            'Extraprovincial Non-Share Corporation',
        ]
    ).delete()


def init_document_type_data(apps, schema_monitor):
    """
    Add initial data to erc.document_type
    """
    DocumentType = apps.get_model('registration', 'DocumentType')
    DocumentType.objects.bulk_create(
        [
            DocumentType(name='boundary_map'),
            DocumentType(name='signed_statutory_declaration'),
            DocumentType(name='process_flow_diagram'),
            DocumentType(name='proof_of_authority_of_partner_company'),
            DocumentType(name='senior_officer_proof_of_authority'),
            DocumentType(name='operation_representative_proof_of_authority'),
            DocumentType(name='soce_senior_officer_proof_of_authority'),
            DocumentType(name='proof_of_start'),
            DocumentType(name='opt_in_signed_statutory_declaration'),
            DocumentType(name='equipment_list'),
        ]
    )


def reverse_init_document_type_data(apps, schema_monitor):
    """
    Remove initial data from erc.document_type
    """
    DocumentType = apps.get_model('registration', 'DocumentType')
    DocumentType.objects.filter(
        name__in=[
            'boundary_map',
            'signed_statutory_declaration',
            'process_flow_diagram',
            'proof_of_authority_of_partner_company',
            'senior_officer_proof_of_authority',
            'operation_representative_proof_of_authority',
            'soce_senior_officer_proof_of_authority',
            'proof_of_start',
            'opt_in_signed_statutory_declaration',
            'equipment_list',
        ]
    ).delete()


def init_naics_code_data(apps, schema_monitor):
    """
    Add initial data to erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.bulk_create(
        [
            NaicsCode(naics_code='211110', naics_description='Oil and gas extraction (except oil sands)'),
            NaicsCode(naics_code='212114', naics_description='Bituminous coal mining'),
            NaicsCode(naics_code='212220', naics_description='Gold and silver ore mining'),
            NaicsCode(naics_code='212231', naics_description='Lead-zinc ore mining'),
            NaicsCode(naics_code='212233', naics_description='Copper-zinc ore mining'),
            NaicsCode(naics_code='212299', naics_description='All other metal ore mining'),
            NaicsCode(naics_code='213118', naics_description='Services to oil and gas extraction'),
            NaicsCode(naics_code='311119', naics_description='Other animal food manufacturing'),
            NaicsCode(naics_code='311310', naics_description='Sugar manufacturing'),
            NaicsCode(naics_code='311614', naics_description='Rendering and meat processing from carcasses'),
            NaicsCode(naics_code='321111', naics_description='Sawmills (except shingle and shake mills)'),
            NaicsCode(naics_code='321212', naics_description='Softwood veneer and plywood mills'),
            NaicsCode(naics_code='321216', naics_description='Particle board and fibreboard mills'),
            NaicsCode(naics_code='321999', naics_description='All other miscellaneous wood product manufacturing'),
            NaicsCode(naics_code='322111', naics_description='Mechanical pulp mills'),
            NaicsCode(naics_code='322112', naics_description='Chemical pulp mills'),
            NaicsCode(naics_code='322121', naics_description='Paper (except newsprint) mills'),
            NaicsCode(naics_code='322122', naics_description='Newsprint mills'),
            NaicsCode(naics_code='324110', naics_description='Petroleum refineries'),
            NaicsCode(naics_code='325120', naics_description='Industrial gas manufacturing'),
            NaicsCode(naics_code='325181', naics_description='Alkali and chlorine manufacturing'),
            NaicsCode(naics_code='325189', naics_description='All other basic inorganic chemical manufacturing'),
            NaicsCode(naics_code='327310', naics_description='Cement manufacturing'),
            NaicsCode(naics_code='327410', naics_description='Lime manufacturing'),
            NaicsCode(naics_code='327420', naics_description='Gypsum product manufacturing'),
            NaicsCode(naics_code='327990', naics_description='All other non-metallic mineral product manufacturing'),
            NaicsCode(naics_code='331222', naics_description='Steel wire drawing'),
            NaicsCode(naics_code='331313', naics_description='Primary production of alumina and aluminum'),
            NaicsCode(
                naics_code='331410', naics_description='Non-ferrous metal (except aluminum) smelting and refining'
            ),
            NaicsCode(naics_code='331511', naics_description='Iron foundries'),
            NaicsCode(
                naics_code='412110',
                naics_description='Petroleum, petroleum products, and other hydrocarbons merchant wholesalers',
            ),
            NaicsCode(naics_code='486210', naics_description='Pipeline transportation of natural gas'),
        ]
    )


def reverse_init_naics_code_data(apps, schema_monitor):
    """
    Remove initial data from erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.filter(
        naics_code__in=[
            '211110',
            '212114',
            '212220',
            '212231',
            '212233',
            '212299',
            '213118',
            '311119',
            '311310',
            '311614',
            '321111',
            '321212',
            '321216',
            '321999',
            '322111',
            '322112',
            '322121',
            '322122',
            '324110',
            '325120',
            '325181',
            '325189',
            '327310',
            '327410',
            '327420',
            '327990',
            '331222',
            '331313',
            '331410',
            '331511',
            '412110',
            '486210',
        ]
    ).delete()


def init_regulated_product_data(apps, schema_monitor):
    """
    Add initial data to erc.regulated_product
    """
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')
    RegulatedProduct.objects.bulk_create(
        [
            RegulatedProduct(name='BC-specific refinery complexity throughput'),
            RegulatedProduct(name='Cement equivalent'),
            RegulatedProduct(name='Chemicals: pure hydrogen peroxide'),
            RegulatedProduct(name='Compression, centrifugal - consumed energy'),
            RegulatedProduct(name='Compression, positive displacement - consumed energy'),
            RegulatedProduct(name='Gypsum wallboard'),
            RegulatedProduct(name='Lime at 94.5% CaO and lime kiln dust'),
            RegulatedProduct(name='Limestone for sale'),
            RegulatedProduct(name='Liquefied natural gas'),
            RegulatedProduct(name='Mining: coal'),
            RegulatedProduct(name='Mining: copper-equivalent, open pit'),
            RegulatedProduct(name='Mining: copper-equivalent, underground'),
            RegulatedProduct(name='Mining: gold-equivalent'),
            RegulatedProduct(name='Processing sour gas - oil equivalent'),
            RegulatedProduct(name='Processing sweet gas - oil equivalent'),
            RegulatedProduct(name='Pulp and paper: chemical pulp'),
            RegulatedProduct(name='Pulp and paper: non-chemical pulp'),
            RegulatedProduct(name='Pulp and paper: paper (except newsprint and tissue paper)'),
            RegulatedProduct(name='Pulp and paper: tissue Paper'),
            RegulatedProduct(name='Rendering and meat processing: protein and fat'),
            RegulatedProduct(name='Renewable diesel'),
            RegulatedProduct(name='Smelting: aluminum'),
            RegulatedProduct(name='Smelting: lead-zinc'),
            RegulatedProduct(name='Sold electricity'),
            RegulatedProduct(name='Sold Heat'),
            RegulatedProduct(name='Steel wire: HDG-process (hot dip galvanization)'),
            RegulatedProduct(name='Steel wire: Non-HDG'),
            RegulatedProduct(name='Sugar: liquid'),
            RegulatedProduct(name='Sugar: solid'),
            RegulatedProduct(name='Wood products: lumber'),
            RegulatedProduct(name='Wood products: medium density fibreboard (MDF)'),
            RegulatedProduct(name='Wood products: plywood'),
            RegulatedProduct(name='Wood products: veneer'),
            RegulatedProduct(name='Wood products: wood chips (including hog fuel)'),
            RegulatedProduct(name='Wood products: wood pellets'),
        ]
    )


def reverse_init_regulated_product_data(apps, schema_monitor):
    """
    Remove initial data from erc.regulated_product
    """
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')
    RegulatedProduct.objects.filter(
        name__in=[
            'BC-specific refinery complexity throughput',
            'Cement equivalent',
            'Chemicals: pure hydrogen peroxide',
            'Compression, centrifugal - consumed energy',
            'Compression, positive displacement - consumed energy',
            'Gypsum wallboard',
            'Lime at 94.5% CaO and lime kiln dust',
            'Limestone for sale',
            'Liquefied natural gas',
            'Mining: coal',
            'Mining: copper-equivalent, open pit',
            'Mining: copper-equivalent, underground',
            'Mining: gold-equivalent',
            'Processing sour gas - oil equivalent',
            'Processing sweet gas - oil equivalent',
            'Pulp and paper: chemical pulp',
            'Pulp and paper: non-chemical pulp',
            'Pulp and paper: paper (except newsprint and tissue paper)',
            'Pulp and paper: tissue Paper',
            'Rendering and meat processing: protein and fat',
            'Renewable diesel',
            'Smelting: aluminum',
            'Smelting: lead-zinc',
            'Sold electricity',
            'Sold Heat',
            'Steel wire: HDG-process (hot dip galvanization)',
            'Steel wire: Non-HDG',
            'Sugar: liquid',
            'Sugar: solid',
            'Wood products: lumber',
            'Wood products: medium density fibreboard (MDF)',
            'Wood products: plywood',
            'Wood products: veneer',
            'Wood products: wood chips (including hog fuel)',
            'Wood products: wood pellets',
        ]
    ).delete()


def init_reporting_activity_data(apps, schema_monitor):
    """
    Add initial data to erc.reportingactivity
    """
    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    ReportingActivity.objects.bulk_create(
        [
            ReportingActivity(name='General stationary combustion', applicable_to='all'),
            ReportingActivity(name='Fuel combustion by mobile equipment', applicable_to='sfo'),
            ReportingActivity(name='Aluminum or alumina production', applicable_to='sfo'),
            ReportingActivity(name='Ammonia production', applicable_to='sfo'),
            ReportingActivity(name='Cement production', applicable_to='sfo'),
            ReportingActivity(name='Underground coal mining', applicable_to='sfo'),
            ReportingActivity(name='Coal storage at facilities that combust coal', applicable_to='sfo'),
            ReportingActivity(name='Copper or nickel smelting or refining', applicable_to='sfo'),
            ReportingActivity(name='Electricity generation', applicable_to='sfo'),
            ReportingActivity(name='Electronics manufacturing', applicable_to='sfo'),
            ReportingActivity(name='Ferroalloy production', applicable_to='sfo'),
            ReportingActivity(name='Glass manufacturing', applicable_to='sfo'),
            ReportingActivity(name='Hydrogen production', applicable_to='sfo'),
            ReportingActivity(name='Industrial wastewater processing', applicable_to='sfo'),
            ReportingActivity(name='Lead production', applicable_to='sfo'),
            ReportingActivity(name='Lime manufacturing', applicable_to='sfo'),
            ReportingActivity(name='Magnesium production', applicable_to='sfo'),
            ReportingActivity(name='Nitric acid manufacturing', applicable_to='sfo'),
            ReportingActivity(name='Petrochemical production', applicable_to='sfo'),
            ReportingActivity(name='Petroleum refining', applicable_to='sfo'),
            ReportingActivity(name='Phosphoric acid production', applicable_to='sfo'),
            ReportingActivity(name='Pulp and paper production', applicable_to='sfo'),
            ReportingActivity(name='Refinery fuel gas combustion', applicable_to='sfo'),
            ReportingActivity(name='Zinc production', applicable_to='sfo'),
            ReportingActivity(name='Open pit coal mining', applicable_to='sfo'),
            ReportingActivity(name='Storage of petroleum products', applicable_to='sfo'),
            ReportingActivity(name='Carbonate use', applicable_to='sfo'),
            ReportingActivity(name='Oil and gas extraction and gas processing activities', applicable_to='lfo'),
            ReportingActivity(name='Carbon dioxide transportation and oil transmission', applicable_to='lfo'),
            ReportingActivity(name='Electricity transmission', applicable_to='lfo'),
            ReportingActivity(name='Natural gas transmission', applicable_to='lfo'),
            ReportingActivity(name='Natural gas distribution', applicable_to='lfo'),
            ReportingActivity(name='Natural gas storage', applicable_to='lfo'),
            ReportingActivity(name='LNG activities', applicable_to='lfo'),
        ]
    )


def reverse_init_reporting_activity_data(apps, schema_monitor):
    """
    Remove initial data from erc.reportingactivity
    """
    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    ReportingActivity.objects.filter(
        name__in=[
            'General stationary combustion',
            'Fuel combustion by mobile equipment',
            'Aluminum or alumina production',
            'Ammonia production',
            'Cement production',
            'Underground coal mining',
            'Coal storage at facilities that combust coal',
            'Copper or nickel smelting or refining',
            'Electricity generation',
            'Electronics manufacturing',
            'Ferroalloy production',
            'Glass manufacturing',
            'Hydrogen production',
            'Industrial wastewater processing',
            'Lead production',
            'Lime manufacturing',
            'Magnesium production',
            'Nitric acid manufacturing',
            'Petrochemical production',
            'Petroleum refining',
            'Phosphoric acid production',
            'Pulp and paper production',
            'Refinery fuel gas combustion',
            'Zinc production',
            'Open pit coal mining',
            'Storage of petroleum products',
            'Carbonate use',
            'Oil and gas extraction and gas processing activities',
            'Carbon dioxide transportation and oil transmission',
            'Electricity transmission',
            'Natural gas transmission',
            'Natural gas distribution',
            'Natural gas storage',
            'LNG activities',
        ]
    ).delete()


def add_325190_naics_code_data(apps, schema_monitor):
    """
    Add initial data to erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.create(naics_code='325190', naics_description='Other basic organic chemical manufacturing')


def reverse_add_325190_naics_code_data(apps, schema_monitor):
    """
    Remove initial data from erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.filter(
        naics_code__in=[
            '325190',
        ]
    ).delete()


def add_418990_naics_code_data(apps, schema_monitor):
    """
    Add initial data to erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.create(naics_code='418990', naics_description='All other merchant wholesalers')


def reverse_add_418990_naics_code_data(apps, schema_monitor):
    """
    Remove initial data from erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.filter(
        naics_code__in=[
            '418990',
        ]
    ).delete()


def populate_facility_lat_long(apps, schema_editor):
    Facility = apps.get_model('registration', 'Facility')
    Facility.objects.update(latitude_of_largest_emissions=0, longitude_of_largest_emissions=0)


def init_activity_slug_weight(apps, schema_monitor):
    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='General stationary combustion')
    r.slug = 'gsc_excluding_line_tracing'
    r.weight = 100.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Fuel combustion by mobile equipment')
    r.slug = 'fuel_combustion_by_mobile'
    r.weight = 300.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Aluminum or alumina production')
    r.slug = 'aluminum_production'
    r.weight = 400.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Ammonia production')
    r.slug = 'ammonia_production'
    r.weight = 500.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Cement production')
    r.slug = 'cement_production'
    r.weight = 600.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Underground coal mining')
    r.slug = 'underground_coal_mining'
    r.weight = 700.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Coal storage at facilities that combust coal')
    r.slug = 'coal_storage'
    r.weight = 800.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Copper or nickel smelting or refining')
    r.slug = 'copper_nickel_refining'
    r.weight = 900.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Electricity generation')
    r.slug = 'electricity_generation'
    r.weight = 1000.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Electronics manufacturing')
    r.slug = 'electronics_manufacturing'
    r.weight = 1100.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Ferroalloy production')
    r.slug = 'ferroalloy_production'
    r.weight = 1200.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Glass manufacturing')
    r.slug = 'glass_manufacturing'
    r.weight = 1300.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Hydrogen production')
    r.slug = 'hydrogen_production'
    r.weight = 1400.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Industrial wastewater processing')
    r.slug = 'ind_wastewater_processing'
    r.weight = 1500.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Lead production')
    r.slug = 'lead_production'
    r.weight = 1600.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Lime manufacturing')
    r.slug = 'lime_manufacturing'
    r.weight = 1700.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Magnesium production')
    r.slug = 'magnesium_production'
    r.weight = 1800.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Nitric acid manufacturing')
    r.slug = 'nitric_acid_manufacturing'
    r.weight = 1900.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Petrochemical production')
    r.slug = 'petrochemical_production'
    r.weight = 2000.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Petroleum refining')
    r.slug = 'petroleum_refining'
    r.weight = 2100.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Phosphoric acid production')
    r.slug = 'phos_acid_production'
    r.weight = 2200.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Pulp and paper production')
    r.slug = 'pulp_and_paper'
    r.weight = 2300.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Refinery fuel gas combustion')
    r.slug = 'refinery_fuel_gas'
    r.weight = 2400.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Zinc production')
    r.slug = 'zinc_production'
    r.weight = 2500.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Open pit coal mining')
    r.slug = 'open_pit_coal_mining'
    r.weight = 2600.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Storage of petroleum products')
    r.slug = 'storage_petro_products'
    r.weight = 2700.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Carbonate use')
    r.slug = 'carbonate_use'
    r.weight = 2800.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Oil and gas extraction and gas processing activities')
    r.slug = 'oil_gas_extraction'
    r.weight = 2900.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Carbon dioxide transportation and oil transmission')
    r.slug = 'co2_transportation'
    r.weight = 3000.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Electricity transmission')
    r.slug = 'electricity_transmission'
    r.weight = 3100.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Natural gas transmission')
    r.slug = 'natural_gas_transmission'
    r.weight = 3200.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Natural gas distribution')
    r.slug = 'natural_gas_distribution'
    r.weight = 3300.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='Natural gas storage')
    r.slug = 'natural_gas_storage'
    r.weight = 3400.0
    r.save()

    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='LNG activities')
    r.slug = 'lng_activities'
    r.weight = 3500.0
    r.save()


def add_products(apps, schema_monitor):
    Product = apps.get_model('registration', 'RegulatedProduct')
    Product.objects.bulk_create(
        [
            Product(name='Forged steel balls: less than 3.5 inches diameter'),
            Product(name='Forged steel balls: greater than 4 inches diameter'),
            Product(name='Mining: critical mineral, other than copper'),
            Product(name='Smelting: critical mineral, other than aluminun and lead-zinc'),
        ]
    )


def reverse_add_products(apps, schema_monitor):
    Product = apps.get_model('registration', 'RegulatedProduct')
    Product.objects.get(name='Forged steel balls: less than 3.5 inches diameter').delete()
    Product.objects.get(name='Forged steel balls: greater than 4 inches diameter').delete()
    Product.objects.get(name='Mining: critical mineral, other than copper').delete()
    Product.objects.get(name='Smelting: critical mineral, other than aluminun and lead-zinc').delete()


def add_activities(apps, schema_monitor):
    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    ReportingActivity.objects.create(
        name='General stationary combustion solely for the purpose of line tracing',
        slug='gsc_solely_for_line_tracing',
        weight=200.0,
        applicable_to='sfo',
    )
    ReportingActivity.objects.create(
        name='General stationary combustion, other than non-compression and non-processing combustion',
        slug='gsc_other_than_non_compression',
        weight=3100.0,
        applicable_to='lfo',
    )
    ReportingActivity.objects.create(
        name='General stationary non-compression and non-processing combustion',
        slug='gsc_non_compression',
        weight=3200.0,
        applicable_to='lfo',
    )
    ReportingActivity.objects.create(
        name='Non-compression and non-processing activities for the purpose of natural gas transmission, natural gas distribution, natural gas storage, carbon dioxide transportation or oil transmission',
        slug='natural_gas_activities_non_compression',
        weight=3700.0,
        applicable_to='lfo',
    )


def reverse_add_activities(apps, schema_monitor):
    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    ReportingActivity.objects.get(slug='gsc_other_than_non_compression').delete()
    ReportingActivity.objects.get(slug='gsc_non_compression').delete()
    ReportingActivity.objects.get(slug='natural_gas_activities_non_compression').delete()
    ReportingActivity.objects.filter(slug='gsc_solely_for_line_tracing').delete()


def update_activity_names(apps, schema_monitor):
    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='General stationary combustion')
    r.name = 'General stationary combustion excluding line tracing'
    r.applicable_to = 'sfo'
    r.save()

    r = ReportingActivity.objects.get(name='Natural gas transmission')
    r.name = 'Oil and gas extraction and gas processing activities, other than non- compression and non-processing activities'
    r.applicable_to = 'lfo'
    r.slug = 'og_activities_other_than_non_compression'
    r.weight = 3300.0
    r.save()

    r = ReportingActivity.objects.get(name='Natural gas distribution')
    r.name = (
        'Non-compression and non-processing activities that are oil and gas extraction and gas processing activities'
    )
    r.applicable_to = 'lfo'
    r.slug = 'og_activities_non_compression'
    r.weight = 3400.0
    r.save()

    r = ReportingActivity.objects.get(name='Electricity transmission')
    r.weight = 3500.0
    r.save()

    r = ReportingActivity.objects.get(name='Natural gas storage')
    r.name = 'Activities for the purpose of natural gas transmission, natural gas distribution, natural gas storage, carbon dioxide transportation or oil transmission, other than non-compression and non-processing activities'
    r.applicable_to = 'lfo'
    r.slug = 'natural_gas_activities_other_than_non_compression'
    r.weight = 3600.0
    r.save()

    r = ReportingActivity.objects.get(name='LNG activities')
    r.weight = 3800.0
    r.save()


def reverse_update_activity_names(apps, schema_monitor):
    ReportingActivity = apps.get_model('registration', 'ReportingActivity')
    r = ReportingActivity.objects.get(name='General stationary combustion excluding line tracing')
    r.name = 'General stationary combustion'
    r.save()


def update_activity_weights(apps, schema_monitor):
    """
    Update weights to reflect how IRC would like activities ordered
    """

    Activity = apps.get_model('registration', 'Activity')
    Activity.objects.all().update(weight=9999)
    Activity.objects.filter(name='General stationary combustion excluding line tracing').update(weight=100)
    Activity.objects.filter(name='General stationary combustion solely for the purpose of line tracing').update(
        weight=200
    )
    Activity.objects.filter(
        name='General stationary combustion, other than non-compression and non-processing combustion'
    ).update(weight=300)
    Activity.objects.filter(name='General stationary non-compression and non-processing combustion').update(weight=400)
    Activity.objects.filter(name='Fuel combustion by mobile equipment').update(weight=500)


def remove_old_activity_records(apps, schema_monitor):
    """
    Remove deprecated activity records
    """

    Activity = apps.get_model('registration', 'Activity')
    Activity.objects.get(name='Oil and gas extraction and gas processing activities').delete()
    Activity.objects.get(name='Carbon dioxide transportation and oil transmission').delete()


def reverse_remove_old_activity_records(apps, schema_monitor):
    """
    Undo Remove deprecated activity records
    """

    Activity = apps.get_model('registration', 'Activity')
    Activity.objects.create(
        name='Oil and gas extraction and gas processing activities', applicable_to='lfo', weight=9999
    ),
    Activity.objets.create(name='Carbon dioxide transportation and oil transmission', applicable_to='lfo', weight=9999),


def add_document_type_data(apps, schema_monitor):
    """
    Add new_entrant_application to erc.document_type
    """
    DocumentType = apps.get_model('registration', 'DocumentType')
    DocumentType.objects.create(name='new_entrant_application')


def reverse_add_document_type_data(apps, schema_monitor):
    """
    Remove new_entrant_application from erc.document_type
    """
    DocumentType = apps.get_model('registration', 'DocumentType')
    DocumentType.objects.filter(
        name='new_entrant_application',
    ).delete()


def migrate_to_bc_greenhouse_gas_id_model(apps, schema_monitor):
    """
    Create BcGreenhouseGasId records for each operation and facility that have a bcghg_id field (they will be migrated to a OneToOneField that references the BcGreenhouseGasId model in the next migration).

    """
    Operation = apps.get_model('registration', 'Operation')
    BcGreenhouseGasId = apps.get_model('registration', 'BcGreenhouseGasId')

    # operation
    operations_with_bcghg_id = Operation.objects.filter(bcghg_id__isnull=False)
    for operation in operations_with_bcghg_id:
        BcGreenhouseGasId.objects.create(
            id=operation.bcghg_id,
        )

    # check counts
    if BcGreenhouseGasId.objects.count() != operations_with_bcghg_id.count():
        raise Exception('Migration unsuccessful')


def update_regulated_product_units_and_is_regulated(apps, schema_editor):

    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.filter(
        name='BC-specific refinery complexity throughput',
    ).update(unit='BCRCT')
    RegulatedProduct.objects.filter(
        name='Cement equivalent',
    ).update(unit='Tonne cement equivalent')
    RegulatedProduct.objects.filter(
        name='Chemicals: pure hydrogen peroxide',
    ).update(unit='Tonne pure hydrogen peroxide')
    RegulatedProduct.objects.filter(
        name='Compression, centrifugal - consumed energy',
    ).update(unit='MWh consumed energy')
    RegulatedProduct.objects.filter(
        name='Compression, positive displacement - consumed energy',
    ).update(unit='MWh consumed energy')
    RegulatedProduct.objects.filter(
        name='Gypsum wallboard',
    ).update(unit='Thousand square feet')
    RegulatedProduct.objects.filter(
        name='Lime at 94.5% CaO and lime kiln dust',
    ).update(unit='Tonne lime@94.5% CAO + LKD')
    RegulatedProduct.objects.filter(
        name='Limestone for sale',
    ).update(unit='Tonne limestone')
    RegulatedProduct.objects.filter(
        name='Liquefied natural gas',
    ).update(unit=None)
    RegulatedProduct.objects.filter(
        name='Mining: coal',
    ).update(unit='Tonne saleable coal')
    RegulatedProduct.objects.filter(
        name='Mining: copper-equivalent, open pit',
    ).update(unit='Tonne copper-equivalent')
    RegulatedProduct.objects.filter(
        name='Mining: copper-equivalent, underground',
    ).update(unit='Tonne copper-equivalent')
    RegulatedProduct.objects.filter(
        name='Mining: gold-equivalent',
    ).update(unit='Tonne gold-equivalent')
    RegulatedProduct.objects.filter(
        name='Processing sour gas - oil equivalent',
    ).update(unit='Cubic metre oil-equivalent')
    RegulatedProduct.objects.filter(
        name='Processing sweet gas - oil equivalent',
    ).update(unit='Cubic metre oil-equivalent')
    RegulatedProduct.objects.filter(
        name='Pulp and paper: chemical pulp',
    ).update(unit='Tonne saleable dry chemical pulp')
    RegulatedProduct.objects.filter(
        name='Pulp and paper: non-chemical pulp',
    ).update(unit='Tonne saleable dry non-chemical pulp')
    RegulatedProduct.objects.filter(
        name='Pulp and paper: paper (except newsprint and tissue paper)',
    ).update(unit='Tonne saleable paper')
    RegulatedProduct.objects.filter(
        name='Pulp and paper: tissue Paper',
    ).update(unit='Tonne saleable tissue paper')
    RegulatedProduct.objects.filter(
        name='Rendering and meat processing: protein and fat',
    ).update(unit='Tonne protein and fat')
    RegulatedProduct.objects.filter(
        name='Renewable diesel',
    ).update(unit=None)
    RegulatedProduct.objects.filter(
        name='Smelting: aluminum',
    ).update(unit='Tonne saleable aluminum')
    RegulatedProduct.objects.filter(
        name='Smelting: lead-zinc',
    ).update(unit='Tonne lead-zinc')
    RegulatedProduct.objects.filter(
        name='Sold electricity',
    ).update(unit='GWh')
    RegulatedProduct.objects.filter(
        name='Sold Heat',
    ).update(unit='GJ')
    RegulatedProduct.objects.filter(
        name='Steel wire: HDG-process (hot dip galvanization)',
    ).update(unit='Tonne hot dip galvanization wire')
    RegulatedProduct.objects.filter(
        name='Steel wire: Non-HDG',
    ).update(unit='Tonne non-HDG wire')
    RegulatedProduct.objects.filter(
        name='Sugar: liquid',
    ).update(unit='Tonne solid sugar content')
    RegulatedProduct.objects.filter(
        name='Sugar: solid',
    ).update(unit='Tonne solid sugar')
    RegulatedProduct.objects.filter(
        name='Wood products: lumber',
    ).update(unit='Cubic metre saleable lumber')
    RegulatedProduct.objects.filter(
        name='Wood products: medium density fibreboard (MDF)',
    ).update(unit='Cubic metre saleable MDF')
    RegulatedProduct.objects.filter(
        name='Wood products: plywood',
    ).update(unit='Cubic metre saleable plywood')
    RegulatedProduct.objects.filter(
        name='Wood products: veneer',
    ).update(unit='Cubic metre saleable veneer')
    RegulatedProduct.objects.filter(
        name='Wood products: wood chips (including hog fuel)',
    ).update(unit='Cubic metre saleable wood chips')
    RegulatedProduct.objects.filter(
        name='Wood products: wood pellets',
    ).update(unit='Tonne saleable wood pellets')
    RegulatedProduct.objects.filter(
        name='Forged steel balls: less than 3.5 inches diameter',
    ).update(unit='Tonne forged steel balls')
    RegulatedProduct.objects.filter(
        name='Forged steel balls: greater than 4 inches diameter',
    ).update(unit='Tonne forged steel balls')


def add_unregulated_products(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.create(
        name='Oil and gas non-processing, non-compression',
        unit=None,
        is_regulated=False,
    )
    RegulatedProduct.objects.create(
        name='Fat, oil and grease collection, refining and storage',
        unit=None,
        is_regulated=False,
    )


def reverse_add_unregulated_products(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.filter(
        name='Oil and gas non-processing, non-compression',
    ).delete()
    RegulatedProduct.objects.filter(
        name='Fat, oil and grease collection, refining and storage',
    ).delete()


def irc_app_role_data(apps, schema_monitor):
    """
    Add new IRC roles to erc.app_role
    """
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    AppRole = apps.get_model('registration', 'AppRole')
    AppRole.objects.create(
        role_name='cas_director',
        role_description='Director user from the BC Government.',
    )
    AppRole.objects.create(
        role_name='cas_view_only',
        role_description='User from the BC Government that only had readonly access to the app.',
    )


def reverse_irc_app_role_data(apps, schema_monitor):
    """
    Remove data from erc.app_role
    """
    AppRole = apps.get_model('registration', 'AppRole')
    AppRole.objects.filter(role_name='cas_director').delete()
    AppRole.objects.filter(role_name='cas_view_only').delete()


def remove_naics_code(apps, schema_monitor):
    """
    Remove unregulated naics_code value from naics_code table
    """

    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.get(naics_code='418990').delete()


def revert_remove_naics_code(apps, schema_monitor):
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.create(naics_code='418990', naics_description='All other merchant wholesalers')


def add_unregulated_line_tracing_product(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.create(
        name='Refineries line tracing',
        is_regulated=False,
    )


def reverse_add_unregulated_line_tracing_product(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.filter(
        name='Mining: critical mineral, other than copper',
    ).delete()
    RegulatedProduct.objects.filter(
        name='Smelting: critical mineral, other than aluminun and lead-zinc',
    ).delete()
    RegulatedProduct.objects.filter(
        name='Refineries line tracing',
    ).delete()


def remove_unused_products(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.filter(
        name='Smelting: critical mineral, other than aluminun and lead-zinc',
    ).delete()
    RegulatedProduct.objects.filter(
        name='Mining: critical mineral, other than copper',
    ).delete()


def reverse_remove_unused_products(apps, schema_editor):
    RegulatedProduct = apps.get_model('registration', 'RegulatedProduct')

    RegulatedProduct.objects.create(
        name='Smelting: critical mineral, other than aluminun and lead-zinc',
        is_regulated=True,
    )
    RegulatedProduct.objects.create(
        name='Mining: critical mineral, other than copper',
        is_regulated=True,
    )


def unregulated_naics_code_data(apps, schema_monitor):
    """
    Add non-regulated NAICS code data to erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.bulk_create(
        [
            NaicsCode(naics_code='111412', naics_description='Cannabis grown under cover', is_regulated=False),
            NaicsCode(naics_code='111419', naics_description='Other food crops grown under cover', is_regulated=False),
            NaicsCode(naics_code='221111', naics_description='Hydro-electric power generation', is_regulated=False),
            NaicsCode(
                naics_code='221112', naics_description='Fossil-fuel electric power generation', is_regulated=False
            ),
            NaicsCode(naics_code='221119', naics_description='Other electric power generation', is_regulated=False),
            NaicsCode(
                naics_code='221121',
                naics_description='Electric bulk power transmission and control',
                is_regulated=False,
            ),
            NaicsCode(naics_code='221210', naics_description='Natural gas distribution', is_regulated=False),
            NaicsCode(naics_code='221320', naics_description='Sewage treatment facilities', is_regulated=False),
            NaicsCode(naics_code='221330', naics_description='Steam and air-conditioning supply', is_regulated=False),
            NaicsCode(
                naics_code='486110', naics_description='Pipeline transportation of crude oil', is_regulated=False
            ),
            NaicsCode(naics_code='493110', naics_description='General warehousing and storage', is_regulated=False),
            NaicsCode(naics_code='493190', naics_description='Other warehousing and storage', is_regulated=False),
            NaicsCode(naics_code='562210', naics_description='Waste treatment and disposal', is_regulated=False),
            NaicsCode(
                naics_code='811199',
                naics_description='All other automotive repair and maintenance',
                is_regulated=False,
            ),
        ]
    ),


def reverse_unregulated_naics_code_data(apps, schema_monitor):
    """
    Remove initial data from erc.naics_code
    """
    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsCode.objects.filter(
        naics_code__in=[
            '111412',
            '111419',
            '221111',
            '221112',
            '221119',
            '221121',
            '221210',
            '221320',
            '221330',
            '486110',
            '493110',
            '493190',
            '562210',
            '811199',
        ]
    ).delete()


def unregulated_regulatory_value_data(apps, schema_monitor):
    """
    Add data for non-regulated NAICS codes to erc.naics_regulatory_value
    """

    NaicsCode = apps.get_model('registration', 'NaicsCode')
    NaicsRegulatoryValue = apps.get_model('reporting', 'NaicsRegulatoryValue')
    NaicsRegulatoryValue.objects.bulk_create(
        [
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=111412).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=111419).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=221111).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=221112).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=221119).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=221121).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=221210).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=221320).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=221330).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=486110).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=493110).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=493190).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=562210).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
            NaicsRegulatoryValue(
                naics_code_id=(NaicsCode.objects.get(naics_code=811199).id),
                reduction_factor='0.65',
                tightening_rate='0.01',
                valid_from='2023-01-01',
                valid_to='9999-12-31',
            ),
        ]
    )


def reverse_unregulated_regulatory_value_data(apps, schema_monitor):
    """
    Remove data for non-regulated NAICS codes to erc.naics_regulatory_value
    """
    NaicsRegulatoryValue = apps.get_model('reporting', 'NaicsRegulatoryValue')
    NaicsRegulatoryValue.objects.filter(
        naics_code__naics_code__in=[
            '111412',
            '111419',
            '221111',
            '221112',
            '221119',
            '221121',
            '221210',
            '221320',
            '221330',
            '486110',
            '493110',
            '493190',
            '562210',
            '811199',
        ]
    ).delete()


def update_activity_applicable_to_field(apps, schema_editor):
    """
    Forward-only migration to update the activit applicable_to field values
    to match the latest business requirements.
    """
    Activity = apps.get_model("registration", "activity")

    # SFO only activities
    Activity.objects.filter(slug="fuel_combustion_by_mobile").update(applicable_to="Single Facility Operation")

    # LFO only activities
    Activity.objects.filter(slug="gsc_other_than_non_compression").update(applicable_to="Linear Facilities Operation")
    Activity.objects.filter(slug="gsc_non_compression").update(applicable_to="Linear Facilities Operation")
    Activity.objects.filter(slug="og_activities_other_than_non_compression").update(
        applicable_to="Linear Facilities Operation"
    )
    Activity.objects.filter(slug="og_activities_non_compression").update(applicable_to="Linear Facilities Operation")
    Activity.objects.filter(slug="electricity_transmission").update(applicable_to="Linear Facilities Operation")
    Activity.objects.filter(slug="natural_gas_activities_other_than_non_compression").update(
        applicable_to="Linear Facilities Operation"
    )
    Activity.objects.filter(slug="natural_gas_activities_non_compression").update(
        applicable_to="Linear Facilities Operation"
    )
    Activity.objects.filter(slug="lng_activities").update(applicable_to="Linear Facilities Operation")

    # activities applicable to all facility types
    Activity.objects.filter(slug="gsc_solely_for_line_tracing").update(applicable_to="all")
    Activity.objects.filter(slug="gsc_excluding_line_tracing").update(applicable_to="all")
    Activity.objects.filter(slug="aluminum_production").update(applicable_to="all")
    Activity.objects.filter(slug="ammonia_production").update(applicable_to="all")
    Activity.objects.filter(slug="cement_production").update(applicable_to="all")
    Activity.objects.filter(slug="underground_coal_mining").update(applicable_to="all")
    Activity.objects.filter(slug="coal_storage").update(applicable_to="all")
    Activity.objects.filter(slug="copper_nickel_refining").update(applicable_to="all")
    Activity.objects.filter(slug="electricity_generation").update(applicable_to="all")
    Activity.objects.filter(slug="electronics_manufacturing").update(applicable_to="all")
    Activity.objects.filter(slug="ferroalloy_production").update(applicable_to="all")
    Activity.objects.filter(slug="glass_manufacturing").update(applicable_to="all")
    Activity.objects.filter(slug="hydrogen_production").update(applicable_to="all")
    Activity.objects.filter(slug="ind_wastewater_processing").update(applicable_to="all")
    Activity.objects.filter(slug="lead_production").update(applicable_to="all")
    Activity.objects.filter(slug="lime_manufacturing").update(applicable_to="all")
    Activity.objects.filter(slug="magnesium_production").update(applicable_to="all")
    Activity.objects.filter(slug="nitric_acid_manufacturing").update(applicable_to="all")
    Activity.objects.filter(slug="petrochemical_production").update(applicable_to="all")
    Activity.objects.filter(slug="petroleum_refining").update(applicable_to="all")
    Activity.objects.filter(slug="phos_acid_production").update(applicable_to="all")
    Activity.objects.filter(slug="pulp_and_paper").update(applicable_to="all")
    Activity.objects.filter(slug="refinery_fuel_gas").update(applicable_to="all")
    Activity.objects.filter(slug="zinc_production").update(applicable_to="all")
    Activity.objects.filter(slug="open_pit_coal_mining").update(applicable_to="all")
    Activity.objects.filter(slug="storage_petro_products").update(applicable_to="all")
    Activity.objects.filter(slug="carbonate_use").update(applicable_to="all")


class Migration(migrations.Migration):

    replaces = [
        ('registration', '0001_initial'),
        ('registration', '0002_prod_data'),
        ('registration', '0003_V1_0_0'),
        ('registration', '0004_historicaluseroperator_user_friendly_id_and_more'),
        ('registration', '0005_V1_2_0'),
        ('registration', '0006_update_naics_codes'),
        ('registration', '0007_V1_2_1'),
        ('registration', '0008_remove_historicaloperation_previous_year_attributable_emissions_and_more'),
        ('registration', '0009_V1_2_3'),
        ('registration', '0010_V1_3_0'),
        ('registration', '0011_V1_4_0'),
        ('registration', '0012_facility_alter_operation_table_comment_and_more'),
        ('registration', '0013_V1_4_1'),
        ('registration', '0014_V1_5_0'),
        ('registration', '0015_V1_5_1'),
        ('registration', '0016_facility_bcghg_id_facility_swrs_facility_id_and_more'),
        ('registration', '0017_V1_5_2'),
        ('registration', '0018_alter_address_table_comment_and_more'),
        ('registration', '0019_alter_facility_options_and_more'),
        ('registration', '0020_update_naics_codes'),
        ('registration', '0021_V1_6_0'),
        ('registration', '0022_remove_historicalwellauthorizationnumber_facility_and_more'),
        ('registration', '0023_historicalparentoperator_foreign_address_and_more'),
        ('registration', '0024_remove_contact_contact_role_idx_and_more'),
        ('registration', '0025_V1_7_0'),
        ('registration', '0026_facility_is_current_year_facility_starting_date_and_more'),
        ('registration', '0027_V1_8_0'),
        ('registration', '0028_V1_9_0'),
        ('registration', '0029_slug_and_weight_on_activity_model'),
        ('registration', '0030_activity_product_renames_additions'),
        ('registration', '0031_activity_model'),
        ('registration', '0032_historicalregistrationpurpose_registrationpurpose'),
        ('registration', '0033_alter_historicaloperation_status_and_more'),
        ('registration', '0034_historicaloptedinoperationdetail_and_more'),
        ('registration', '0035_operation_contacts_and_more'),
        ('registration', '0036_remove_historicalevent_archived_by_and_more'),
        ('registration', '0037_alter_historicaloperation_status_and_more'),
        ('registration', '0038_V1_10_0'),
        ('registration', '0039_remove_historicalfacilityownershiptimeline_archived_by_and_more'),
        ('registration', '0040_alter_facility_address_and_more'),
        ('registration', '0041_remove_historicalmultipleoperator_mailing_address_and_more'),
        ('registration', '0042_prod_data'),
        ('registration', '0043_update_activity_weight_data'),
        ('registration', '0044_facilitydesignatedoperationtimeline_status_and_more'),
        ('registration', '0045_V1_11_0'),
        ('registration', '0046_V1_12_0'),
        ('registration', '0047_remove_old_activity_records'),
        ('registration', '0048_bcobpsregulatedoperation_issued_by_and_more'),
        ('registration', '0049_auto_20241030_2343'),
        ('registration', '0050_historicaloperation_date_of_first_shipment_and_more'),
        ('registration', '0051_bcgreenhousegasid_historicalbcgreenhousegasid'),
        ('registration', '0052_auto_20241101_1845'),
        ('registration', '0053_alter_facility_bcghg_id_and_more'),
        ('registration', '0054_V1_13_0'),
        ('registration', '0055_V1_14_0'),
        ('registration', '0056_remove_historicaltransferevent_future_designated_operator_and_more'),
        ('registration', '0057_remove_registrationpurpose_archived_by_and_more'),
        ('registration', '0058_regulatedproduct_add_isregulated_and_unit'),
        ('registration', '0059_V1_15_0'),
        ('registration', '0060_auto_20241128_1647'),
        ('registration', '0061_remove_naics_code'),
        ('registration', '0062_V1_16_0'),
        ('registration', '0063_remove_historicaltransferevent_description_and_more'),
        ('registration', '0064_V1_17_0'),
        ('registration', '0065_alter_historicaloperation_status_and_more'),
        ('registration', '0066_V1_17_1'),
        ('registration', '0067_alter_facility_latitude_of_largest_emissions_and_more'),
        ('registration', '0068_V1_18_0'),
        ('registration', '0069_V1_19_0'),
        ('registration', '0070_V1_20_0'),
        ('registration', '0071_remove_historicaloperation_documents_document_and_more'),
        (
            'registration',
            '0072_alter_historicaloptedinoperationdetail_meets_producing_gger_schedule_a1_regulated_product_and_more',
        ),
        ('registration', '0073_add_audit_triggers_to_timestamped_models'),
        ('registration', '0074_V1_21_0'),
        ('registration', '0075_facility_operation_historicalfacility_operation'),
        ('registration', '0076_alter_facility_type_alter_historicalfacility_type_and_more'),
        ('registration', '0077_historicalfacility_well_authorization_numbers_and_more'),
        ('registration', '0078_V1_22_0'),
        ('registration', '0079_V1_23_0'),
        ('registration', '0080_V1_23_1'),
        ('registration', '0081_alter_facility_table_comment_and_more'),
        ('registration', '0082_remove_facilitydesignatedoperationtimeline_status_and_more'),
        ('registration', '0083_migrate_point_of_contact'),
        ('registration', '0084_remove_historicaloperation_point_of_contact_and_more'),
        ('registration', '0085_make_contacts_from_industry_users'),
        ('registration', '0086_update_contact_business_roles'),
        ('registration', '0087_remove_duplicate_contacts'),
        ('registration', '0088_contact_unique_email_per_operator'),
        ('registration', '0089_set_purpose_for_existing_operations'),
        ('registration', '0090_migrate_reg1_operation_statuses'),
        ('registration', '0091_alter_historicaloperation_status_and_more'),
        ('registration', '0092_V1_24_0'),
        ('registration', '0093_V2_0_0'),
        ('registration', '0094_V2_0_1'),
        ('registration', '0095_populate_operation_timeline_with_prod_data'),
        ('registration', '0096_update_facility_timeline_start_date'),
        ('registration', '0097_document_status_historicaldocument_status'),
        ('registration', '0098_V2_1_1'),
        ('registration', '0099_remove_historicaloperation_operation_has_multiple_operators_and_more'),
        ('registration', '0100_address_protect_fields_empty_update_and_more'),
        ('registration', '0101_V2_2_0'),
        ('registration', '0102_facility_restrict_bcghg_id_unless_operation_registered_and_more'),
        ('registration', '0103_historicaluser_archived_at_and_more'),
        ('registration', '0104_product_non_nullable_units_remove_unused_products'),
        ('registration', '0105_V2_3_0'),
        ('registration', '0106_remove_facility_restrict_bcghg_id_unless_operation_registered_and_more'),
        ('registration', '0107_V3_0_0'),
        ('registration', '0108_V3_1_0'),
        ('registration', '0109_remove_closureevent_set_created_audit_columns_and_more'),
        ('registration', '0110_historicalnaicscode_is_regulated_and_more'),
        ('registration', '0111_add_non_regulated_naics_codes'),
        ('registration', '0112_prod_fix_contacts_post_transfer'),
        ('registration', '0113_V3_2_0'),
        ('registration', '0114_V3_2_1'),
        ('registration', '0115_fix_typo_in_regulated_product_name'),
        ('registration', '0116_V3_3_0'),
        ('registration', '0117_V3_4_1'),
        ('registration', '0118_V3_5_0'),
        ('registration', '0119_bcghg_ids_to_sfo_facilities'),
        ('registration', '0120_V3_6_0'),
        ('registration', '0121_V3_7_0'),
        ('registration', '0122_V3_8_0'),
        ('registration', '0123_V3_8_1'),
        ('registration', '0124_cra_business_number_to_string_in_operator_models'),
        ('registration', '0125_V3_9_0'),
        ('registration', '0126_V3_10_0'),
        ('registration', '0127_V3_11_0'),
        ('registration', '0128_V3_12_0'),
        ('registration', '0129_V3_13_0'),
        ('registration', '0130_V3_14_0'),
        ('registration', '0131_alter_bcgreenhousegasid_id_and_more'),
        ('registration', '0132_V3_15_0'),
        ('registration', '0133_V3_16_0'),
        ('registration', '0134_V3_17_1'),
        ('registration', '0135_alter_bcgreenhousegasid_id_and_more'),
        ('registration', '0136_V3_18_0'),
        ('registration', '0137_V3_19_0'),
        ('registration', '0138_V3_20_0'),
        ('registration', '0139_V4_0_0'),
        ('registration', '0140_V4_0_1'),
        ('registration', '0141_V4_1_0'),
        ('registration', '0142_V4_2_0'),
        ('registration', '0143_remove_closureevent_set_updated_audit_columns_and_more'),
        ('registration', '0144_V4_3_0'),
        ('registration', '0145_V4_4_0'),
        ('registration', '0146_V4_5_0'),
        ('registration', '0147_V4_6_0'),
        ('registration', '0148_V4_6_1'),
        ('registration', '0149_update_activity_applicable_to'),
        ('registration', '0150_constraint_contact_unique_active_email'),
        ('registration', '0151_V4_7_0'),
        ('registration', '0152_historicalfacilitysnapshot_facilitysnapshot_and_more'),
        ('registration', '0153_V4_7_1'),
        ('registration', '0154_V5_0_0'),
    ]

    dependencies = []

    operations = [
        migrations.CreateModel(
            name='Address',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                (
                    'street_address',
                    models.CharField(
                        blank=True, db_comment='Street address of relevant location)', max_length=1000, null=True
                    ),
                ),
                (
                    'municipality',
                    models.CharField(
                        blank=True, db_comment='Municipality of relevant location', max_length=1000, null=True
                    ),
                ),
                (
                    'province',
                    localflavor.ca.models.CAProvinceField(
                        blank=True,
                        db_comment='Province of the relevant location, restricted to two-letter province postal abbreviations',
                        max_length=2,
                        null=True,
                    ),
                ),
                (
                    'postal_code',
                    localflavor.ca.models.CAPostalCodeField(
                        blank=True,
                        db_comment='Postal code of relevant location, limited to valid Canadian postal codes',
                        max_length=7,
                        null=True,
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."address',
                'db_table_comment': 'Address',
            },
        ),
        migrations.CreateModel(
            name='AppRole',
            fields=[
                (
                    'role_name',
                    models.CharField(
                        db_comment='The name identifying the role assigned to a user. This role defines their permissions within the app. Also acts as the primary key.',
                        max_length=100,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ('role_description', models.CharField(db_comment='Description of the app role', max_length=1000)),
            ],
            options={
                'db_table': 'erc"."app_role',
                'db_table_comment': 'This table contains the definitions for roles within the app/database. These roles are used to define the permissions a user has within the app',
            },
        ),
        migrations.CreateModel(
            name='BcObpsRegulatedOperation',
            fields=[
                (
                    'id',
                    models.CharField(
                        db_comment='The BC OBPS regulated operation ID of an operation when operation is approved',
                        max_length=255,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    'issued_at',
                    models.DateTimeField(
                        auto_now_add=True,
                        db_comment='The time the BC OBPS Regulated Operation ID was issued by an IRC user',
                    ),
                ),
                (
                    'comments',
                    models.TextField(
                        blank=True,
                        db_comment='Comments from admins in the case that a BC OBPS Regulated Operation ID is revoked',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."bc_obps_regulated_operation',
                'db_table_comment': 'Table to store BC OBPS Regulated Operation metadata',
            },
        ),
        migrations.CreateModel(
            name='BusinessRole',
            fields=[
                (
                    'role_name',
                    models.CharField(
                        db_comment='The name identifying the role assigned to a Contact. Also acts as the primary key.',
                        max_length=100,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ('role_description', models.CharField(db_comment='Description of the business role', max_length=1000)),
            ],
            options={
                'db_table': 'erc"."business_role',
                'db_table_comment': 'This table contains the definitions for roles within the operator/operation. These roles are used to define the permissions a user has within the operator/operation',
            },
        ),
        migrations.CreateModel(
            name='BusinessStructure',
            fields=[
                (
                    'name',
                    models.CharField(
                        db_comment='The name of a business structure',
                        max_length=1000,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."business_structure',
                'db_table_comment': 'The business structure of an operator',
            },
        ),
        migrations.CreateModel(
            name='Contact',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('first_name', models.CharField(db_comment="A user or contact's first name", max_length=1000)),
                ('last_name', models.CharField(db_comment="A user or contact's last name", max_length=1000)),
                ('position_title', models.CharField(db_comment="A user or contact's position title", max_length=1000)),
                (
                    'email',
                    models.EmailField(db_comment="A user or contact's email, limited to valid emails", max_length=254),
                ),
                (
                    'phone_number',
                    phonenumber_field.modelfields.PhoneNumberField(
                        blank=True,
                        db_comment="A user or contact's phone number, limited to valid phone numbers",
                        max_length=128,
                        region=None,
                    ),
                ),
                (
                    'address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='Foreign key to the address of a user or contact',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='contacts',
                        to='registration.address',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."contact',
                'db_table_comment': "Contacts (people who don't use the app, e.g. authorized signing officers)",
            },
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('file', models.FileField(db_comment='The file format, metadata, etc.', upload_to='documents')),
                (
                    'description',
                    models.CharField(blank=True, db_comment='Description of the document', max_length=1000, null=True),
                ),
            ],
            options={
                'db_table': 'erc"."document',
                'db_table_comment': 'Documents',
            },
        ),
        migrations.CreateModel(
            name='DocumentType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                (
                    'name',
                    models.CharField(
                        db_comment='Name of document type (e.g. opt in signed statutory declaration)', max_length=1000
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."document_type',
                'db_table_comment': 'Table that contains types of documents',
            },
        ),
        migrations.CreateModel(
            name='HistoricalAddress',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                (
                    'street_address',
                    models.CharField(
                        blank=True, db_comment='Street address of relevant location)', max_length=1000, null=True
                    ),
                ),
                (
                    'municipality',
                    models.CharField(
                        blank=True, db_comment='Municipality of relevant location', max_length=1000, null=True
                    ),
                ),
                (
                    'province',
                    localflavor.ca.models.CAProvinceField(
                        blank=True,
                        db_comment='Province of the relevant location, restricted to two-letter province postal abbreviations',
                        max_length=2,
                        null=True,
                    ),
                ),
                (
                    'postal_code',
                    localflavor.ca.models.CAPostalCodeField(
                        blank=True,
                        db_comment='Postal code of relevant location, limited to valid Canadian postal codes',
                        max_length=7,
                        null=True,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical address',
                'verbose_name_plural': 'historical addresss',
                'db_table': 'erc_history"."address_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalAppRole',
            fields=[
                (
                    'role_name',
                    models.CharField(
                        db_comment='The name identifying the role assigned to a user. This role defines their permissions within the app. Also acts as the primary key.',
                        db_index=True,
                        max_length=100,
                    ),
                ),
                ('role_description', models.CharField(db_comment='Description of the app role', max_length=1000)),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical app role',
                'verbose_name_plural': 'historical app roles',
                'db_table': 'erc_history"."app_role_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalBcObpsRegulatedOperation',
            fields=[
                (
                    'id',
                    models.CharField(
                        db_comment='The BC OBPS regulated operation ID of an operation when operation is approved',
                        db_index=True,
                        max_length=255,
                    ),
                ),
                (
                    'issued_at',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The time the BC OBPS Regulated Operation ID was issued by an IRC user',
                        editable=False,
                    ),
                ),
                (
                    'comments',
                    models.TextField(
                        blank=True,
                        db_comment='Comments from admins in the case that a BC OBPS Regulated Operation ID is revoked',
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical bc obps regulated operation',
                'verbose_name_plural': 'historical bc obps regulated operations',
                'db_table': 'erc_history"."bc_obps_regulated_operation_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalBusinessRole',
            fields=[
                (
                    'role_name',
                    models.CharField(
                        db_comment='The name identifying the role assigned to a Contact. Also acts as the primary key.',
                        db_index=True,
                        max_length=100,
                    ),
                ),
                ('role_description', models.CharField(db_comment='Description of the business role', max_length=1000)),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical business role',
                'verbose_name_plural': 'historical business roles',
                'db_table': 'erc_history"."business_role_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalBusinessStructure',
            fields=[
                (
                    'name',
                    models.CharField(db_comment='The name of a business structure', db_index=True, max_length=1000),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical business structure',
                'verbose_name_plural': 'historical business structures',
                'db_table': 'erc_history"."business_structure_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalContact',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('first_name', models.CharField(db_comment="A user or contact's first name", max_length=1000)),
                ('last_name', models.CharField(db_comment="A user or contact's last name", max_length=1000)),
                ('position_title', models.CharField(db_comment="A user or contact's position title", max_length=1000)),
                (
                    'email',
                    models.EmailField(db_comment="A user or contact's email, limited to valid emails", max_length=254),
                ),
                (
                    'phone_number',
                    phonenumber_field.modelfields.PhoneNumberField(
                        blank=True,
                        db_comment="A user or contact's phone number, limited to valid phone numbers",
                        max_length=128,
                        region=None,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='Foreign key to the address of a user or contact',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.address',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical contact',
                'verbose_name_plural': 'historical contacts',
                'db_table': 'erc_history"."contact_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalDocumentType',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                (
                    'name',
                    models.CharField(
                        db_comment='Name of document type (e.g. opt in signed statutory declaration)', max_length=1000
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical document type',
                'verbose_name_plural': 'historical document types',
                'db_table': 'erc_history"."document_type_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalNaicsCode',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('naics_code', models.CharField(db_comment='NAICS code', max_length=1000)),
                ('naics_description', models.CharField(db_comment='Description of the NAICS code', max_length=1000)),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical naics code',
                'verbose_name_plural': 'historical naics codes',
                'db_table': 'erc_history"."naics_code_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperation',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(db_comment="An operation or facility's name", max_length=1000)),
                ('type', models.CharField(db_comment="An operation or facility's type", max_length=1000)),
                (
                    'previous_year_attributable_emissions',
                    models.IntegerField(
                        blank=True,
                        db_comment="An operation or facility's attributable emissions from the previous year. Only needed if the operation/facility submitted a report the previous year.",
                        null=True,
                    ),
                ),
                (
                    'swrs_facility_id',
                    models.IntegerField(
                        blank=True,
                        db_comment="An operation or facility's SWRS facility ID. Only needed if the operation/facility submitted a report the previous year.",
                        null=True,
                    ),
                ),
                (
                    'bcghg_id',
                    models.CharField(
                        blank=True,
                        db_comment="An operation or facility's BCGHG identifier. Only needed if the operation/facility submitted a report the previous year.",
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'opt_in',
                    models.BooleanField(
                        blank=True,
                        db_comment='Whether or not the operation/facility is required to register or is simply opting in. Only needed if the operation/facility did not report the previous year.',
                        null=True,
                    ),
                ),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the operation',
                        db_index=True,
                        default=uuid.uuid4,
                        verbose_name='ID',
                    ),
                ),
                (
                    'operation_has_multiple_operators',
                    models.BooleanField(
                        db_comment='Whether or not the operation has multiple operators', default=False
                    ),
                ),
                (
                    'verified_at',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The time the operation was verified by an IRC user. If exists, the operation is registered for OBPS.',
                        null=True,
                    ),
                ),
                (
                    'submission_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The time the user submitted the operation registration request',
                        null=True,
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('Not Started', 'Not Started'),
                            ('Draft', 'Draft'),
                            ('Pending', 'Pending'),
                            ('Approved', 'Approved'),
                            ('Declined', 'Declined'),
                            ('Changes Requested', 'Changes Requested'),
                        ],
                        db_comment='The status of an operation in the app (e.g. pending review)',
                        default='Not Started',
                        max_length=1000,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical operation',
                'verbose_name_plural': 'historical operations',
                'db_table': 'erc_history"."operation_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperator',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the operator',
                        db_index=True,
                        default=uuid.uuid4,
                        verbose_name='ID',
                    ),
                ),
                (
                    'legal_name',
                    models.CharField(db_comment='The legal name of an operator', db_index=True, max_length=1000),
                ),
                (
                    'trade_name',
                    models.CharField(blank=True, db_comment='The trade name of an operator', max_length=1000),
                ),
                (
                    'cra_business_number',
                    models.IntegerField(
                        db_comment='The CRA business number of an operator',
                        validators=[
                            django.core.validators.MaxValueValidator(
                                999999999, message='CRA Business Number should be 9 digits.'
                            ),
                            django.core.validators.MinValueValidator(
                                100000000, message='CRA Business Number should be 9 digits.'
                            ),
                        ],
                    ),
                ),
                (
                    'swrs_organisation_id',
                    models.IntegerField(
                        blank=True,
                        db_comment='An identifier used in the CIIP/SWRS dataset (in swrs: organisation = operator). This identifier will only be populated for operators that were imported from that dataset.',
                        null=True,
                    ),
                ),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        db_index=True,
                        null=True,
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                ('website', models.URLField(blank=True, db_comment='The website address of an operator', null=True)),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('Draft', 'Draft'),
                            ('Pending', 'Pending'),
                            ('Approved', 'Approved'),
                            ('Declined', 'Declined'),
                            ('Changes Requested', 'Changes Requested'),
                        ],
                        db_comment='The status of an operator in the app (e.g. draft)',
                        default='Draft',
                        max_length=1000,
                    ),
                ),
                (
                    'verified_at',
                    models.DateTimeField(
                        blank=True, db_comment='The time an operator was verified by an IRC user', null=True
                    ),
                ),
                (
                    'is_new',
                    models.BooleanField(
                        db_comment="Flag to indicate whether CAS internal staff need to explicitly approve the Operator at the same time that they're approving the request for prime admin access. (If a prime admin is requesting access to an existing operator, then the operator is not new and does need to be approved.)",
                        default=True,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical operator',
                'verbose_name_plural': 'historical operators',
                'db_table': 'erc_history"."operator_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalRegulatedProduct',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('name', models.CharField(db_comment='The name of a regulated product', max_length=1000)),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical regulated product',
                'verbose_name_plural': 'historical regulated products',
                'db_table': 'erc_history"."regulated_product_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalReportingActivity',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('name', models.CharField(db_comment='The name of a reporting activity', max_length=1000)),
                (
                    'applicable_to',
                    models.CharField(
                        choices=[('sfo', 'Sfo'), ('lfo', 'Lfo'), ('all', 'All')],
                        db_comment='Which type of facility the activity applies to',
                        max_length=1000,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical reporting activity',
                'verbose_name_plural': 'historical reporting activitys',
                'db_table': 'erc_history"."reporting_activity_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalUser',
            fields=[
                ('first_name', models.CharField(db_comment="A user or contact's first name", max_length=1000)),
                ('last_name', models.CharField(db_comment="A user or contact's last name", max_length=1000)),
                ('position_title', models.CharField(db_comment="A user or contact's position title", max_length=1000)),
                (
                    'email',
                    models.EmailField(db_comment="A user or contact's email, limited to valid emails", max_length=254),
                ),
                (
                    'phone_number',
                    phonenumber_field.modelfields.PhoneNumberField(
                        blank=True,
                        db_comment="A user or contact's phone number, limited to valid phone numbers",
                        max_length=128,
                        region=None,
                    ),
                ),
                ('user_guid', models.UUIDField(db_comment='A GUID to identify the user', db_index=True)),
                ('business_guid', models.UUIDField(db_comment='A GUID to identify the business')),
                (
                    'bceid_business_name',
                    models.CharField(
                        db_comment='The name of the business the user is associated with as per their Business BCeID account',
                        max_length=1000,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'app_role',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The role assigned to this user which defines the permissions the use has.',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.approle',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical user',
                'verbose_name_plural': 'historical users',
                'db_table': 'erc_history"."user_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='NaicsCode',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('naics_code', models.CharField(db_comment='NAICS code', max_length=1000)),
                ('naics_description', models.CharField(db_comment='Description of the NAICS code', max_length=1000)),
            ],
            options={
                'db_table': 'erc"."naics_code',
                'db_table_comment': 'Naics codes',
            },
        ),
        migrations.CreateModel(
            name='Operator',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the operator',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'legal_name',
                    models.CharField(db_comment='The legal name of an operator', max_length=1000, unique=True),
                ),
                (
                    'trade_name',
                    models.CharField(blank=True, db_comment='The trade name of an operator', max_length=1000),
                ),
                (
                    'cra_business_number',
                    models.IntegerField(
                        db_comment='The CRA business number of an operator',
                        validators=[
                            django.core.validators.MaxValueValidator(
                                999999999, message='CRA Business Number should be 9 digits.'
                            ),
                            django.core.validators.MinValueValidator(
                                100000000, message='CRA Business Number should be 9 digits.'
                            ),
                        ],
                    ),
                ),
                (
                    'swrs_organisation_id',
                    models.IntegerField(
                        blank=True,
                        db_comment='An identifier used in the CIIP/SWRS dataset (in swrs: organisation = operator). This identifier will only be populated for operators that were imported from that dataset.',
                        null=True,
                    ),
                ),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        null=True,
                        unique=True,
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                ('website', models.URLField(blank=True, db_comment='The website address of an operator', null=True)),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('Draft', 'Draft'),
                            ('Pending', 'Pending'),
                            ('Approved', 'Approved'),
                            ('Declined', 'Declined'),
                            ('Changes Requested', 'Changes Requested'),
                        ],
                        db_comment='The status of an operator in the app (e.g. draft)',
                        default='Draft',
                        max_length=1000,
                    ),
                ),
                (
                    'verified_at',
                    models.DateTimeField(
                        blank=True, db_comment='The time an operator was verified by an IRC user', null=True
                    ),
                ),
                (
                    'is_new',
                    models.BooleanField(
                        db_comment="Flag to indicate whether CAS internal staff need to explicitly approve the Operator at the same time that they're approving the request for prime admin access. (If a prime admin is requesting access to an existing operator, then the operator is not new and does need to be approved.)",
                        default=True,
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."operator',
                'db_table_comment': 'Operators (also called organizations)',
            },
        ),
        migrations.CreateModel(
            name='RegulatedProduct',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_comment='The name of a regulated product', max_length=1000)),
            ],
            options={
                'db_table': 'erc"."regulated_product',
                'db_table_comment': 'Regulated products',
            },
        ),
        migrations.CreateModel(
            name='ReportingActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_comment='The name of a reporting activity', max_length=1000)),
                (
                    'applicable_to',
                    models.CharField(
                        choices=[('sfo', 'Sfo'), ('lfo', 'Lfo'), ('all', 'All')],
                        db_comment='Which type of facility the activity applies to',
                        max_length=1000,
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."reporting_activity',
                'db_table_comment': 'Reporting activities',
            },
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('first_name', models.CharField(db_comment="A user or contact's first name", max_length=1000)),
                ('last_name', models.CharField(db_comment="A user or contact's last name", max_length=1000)),
                ('position_title', models.CharField(db_comment="A user or contact's position title", max_length=1000)),
                (
                    'email',
                    models.EmailField(db_comment="A user or contact's email, limited to valid emails", max_length=254),
                ),
                (
                    'phone_number',
                    phonenumber_field.modelfields.PhoneNumberField(
                        blank=True,
                        db_comment="A user or contact's phone number, limited to valid phone numbers",
                        max_length=128,
                        region=None,
                    ),
                ),
                (
                    'user_guid',
                    models.UUIDField(db_comment='A GUID to identify the user', primary_key=True, serialize=False),
                ),
                ('business_guid', models.UUIDField(db_comment='A GUID to identify the business')),
                (
                    'bceid_business_name',
                    models.CharField(
                        db_comment='The name of the business the user is associated with as per their Business BCeID account',
                        max_length=1000,
                    ),
                ),
                (
                    'app_role',
                    models.ForeignKey(
                        db_comment='The role assigned to this user which defines the permissions the use has.',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='users',
                        to='registration.approle',
                    ),
                ),
                ('documents', models.ManyToManyField(blank=True, related_name='users', to='registration.document')),
            ],
            options={
                'db_table': 'erc"."user',
                'db_table_comment': 'App users',
            },
        ),
        migrations.CreateModel(
            name='ParentOperator',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'operator_index',
                    models.IntegerField(
                        db_comment='Index used to differentiate parent operators for the child operator for saving/updating purposes'
                    ),
                ),
                ('legal_name', models.CharField(db_comment='The legal name of an operator', max_length=1000)),
                (
                    'trade_name',
                    models.CharField(blank=True, db_comment='The trade name of an operator', max_length=1000),
                ),
                ('cra_business_number', models.IntegerField(db_comment='The CRA business number of an operator')),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                ('website', models.URLField(blank=True, db_comment='The website address of an operator', null=True)),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'business_structure',
                    models.ForeignKey(
                        db_comment='The business structure of an operator',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='parent_operators',
                        to='registration.businessstructure',
                    ),
                ),
                (
                    'child_operator',
                    models.ForeignKey(
                        db_comment='The operator that this parent operator is associated with',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='parent_operators',
                        to='registration.operator',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'mailing_address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The mailing address of an operator',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='parent_operators_mailing',
                        to='registration.address',
                    ),
                ),
                (
                    'physical_address',
                    models.ForeignKey(
                        db_comment='The physical address of an operator (where the operator is physically located)',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='parent_operators_physical',
                        to='registration.address',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."parent_operator',
                'db_table_comment': 'Table to store parent operator metadata',
            },
        ),
        migrations.AddField(
            model_name='operator',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_archived',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='operator',
            name='business_structure',
            field=models.ForeignKey(
                blank=True,
                db_comment='The business structure of an operator',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operators',
                to='registration.businessstructure',
            ),
        ),
        migrations.AddField(
            model_name='operator',
            name='contacts',
            field=models.ManyToManyField(blank=True, related_name='operators', to='registration.contact'),
        ),
        migrations.AddField(
            model_name='operator',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_created',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='operator',
            name='documents',
            field=models.ManyToManyField(blank=True, related_name='operators', to='registration.document'),
        ),
        migrations.AddField(
            model_name='operator',
            name='mailing_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The mailing address of an operator',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operators_mailing',
                to='registration.address',
            ),
        ),
        migrations.AddField(
            model_name='operator',
            name='physical_address',
            field=models.ForeignKey(
                db_comment='The physical address of an operator (where the operator is physically located)',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operators_physical',
                to='registration.address',
            ),
        ),
        migrations.AddField(
            model_name='operator',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_updated',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='operator',
            name='verified_by',
            field=models.ForeignKey(
                blank=True,
                db_comment='The IRC user who verified the operator',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operators_verified_by',
                to='registration.user',
            ),
        ),
        migrations.CreateModel(
            name='Operation',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(db_comment="An operation or facility's name", max_length=1000)),
                ('type', models.CharField(db_comment="An operation or facility's type", max_length=1000)),
                (
                    'previous_year_attributable_emissions',
                    models.IntegerField(
                        blank=True,
                        db_comment="An operation or facility's attributable emissions from the previous year. Only needed if the operation/facility submitted a report the previous year.",
                        null=True,
                    ),
                ),
                (
                    'swrs_facility_id',
                    models.IntegerField(
                        blank=True,
                        db_comment="An operation or facility's SWRS facility ID. Only needed if the operation/facility submitted a report the previous year.",
                        null=True,
                    ),
                ),
                (
                    'bcghg_id',
                    models.CharField(
                        blank=True,
                        db_comment="An operation or facility's BCGHG identifier. Only needed if the operation/facility submitted a report the previous year.",
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'opt_in',
                    models.BooleanField(
                        blank=True,
                        db_comment='Whether or not the operation/facility is required to register or is simply opting in. Only needed if the operation/facility did not report the previous year.',
                        null=True,
                    ),
                ),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the operation',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'operation_has_multiple_operators',
                    models.BooleanField(
                        db_comment='Whether or not the operation has multiple operators', default=False
                    ),
                ),
                (
                    'verified_at',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The time the operation was verified by an IRC user. If exists, the operation is registered for OBPS.',
                        null=True,
                    ),
                ),
                (
                    'submission_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The time the user submitted the operation registration request',
                        null=True,
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('Not Started', 'Not Started'),
                            ('Draft', 'Draft'),
                            ('Pending', 'Pending'),
                            ('Approved', 'Approved'),
                            ('Declined', 'Declined'),
                            ('Changes Requested', 'Changes Requested'),
                        ],
                        db_comment='The status of an operation in the app (e.g. pending review)',
                        default='Not Started',
                        max_length=1000,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'bc_obps_regulated_operation',
                    models.OneToOneField(
                        blank=True,
                        db_comment='The BC OBPS regulated operation ID of an operation when operation is approved',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.bcobpsregulatedoperation',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'documents',
                    models.ManyToManyField(blank=True, related_name='operations', to='registration.document'),
                ),
                (
                    'naics_code',
                    models.ForeignKey(
                        db_comment="An operation or facility's NAICS code",
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='%(class)ss',
                        to='registration.naicscode',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        db_comment='The operator who owns the operation',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='operations',
                        to='registration.operator',
                    ),
                ),
                (
                    'point_of_contact',
                    models.ForeignKey(
                        blank=True,
                        db_comment='Foreign key to the contact that is the point of contact',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='operations',
                        to='registration.contact',
                    ),
                ),
                (
                    'regulated_products',
                    models.ManyToManyField(blank=True, related_name='%(class)ss', to='registration.regulatedproduct'),
                ),
                (
                    'reporting_activities',
                    models.ManyToManyField(blank=True, related_name='%(class)ss', to='registration.reportingactivity'),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
                (
                    'verified_by',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The IRC user who verified the operator',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='operation_verified_by',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."operation',
                'db_table_comment': 'Operations (also called facilities)',
            },
        ),
        migrations.CreateModel(
            name='MultipleOperator',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'operator_index',
                    models.IntegerField(
                        db_comment='Index used to differentiate operators for this operation for saving/updating purposes'
                    ),
                ),
                ('legal_name', models.CharField(db_comment='The legal name of an operator', max_length=1000)),
                ('trade_name', models.CharField(db_comment='The trade name of an operator', max_length=1000)),
                ('cra_business_number', models.IntegerField(db_comment='The CRA business number of an operator')),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                ('website', models.URLField(blank=True, db_comment='The website address of an operator', null=True)),
                (
                    'percentage_ownership',
                    models.DecimalField(
                        blank=True,
                        db_comment='The percentage of the operation which this operator owns',
                        decimal_places=5,
                        max_digits=10,
                        null=True,
                    ),
                ),
                (
                    'mailing_address_same_as_physical',
                    models.BooleanField(
                        db_comment='Whether or not the mailing address is the same as the physical address',
                        default=True,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'business_structure',
                    models.ForeignKey(
                        db_comment='The business structure of an operator',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='multiple_operator',
                        to='registration.businessstructure',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'mailing_address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The mailing address of an operator',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='multiple_operator_mailing',
                        to='registration.address',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        db_comment='The operation that this multiple operator is associated with',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='multiple_operator',
                        to='registration.operation',
                    ),
                ),
                (
                    'physical_address',
                    models.ForeignKey(
                        db_comment='The physical address of an operator (where the operator is physically located)',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='multiple_operator_physical',
                        to='registration.address',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."multiple_operator',
                'db_table_comment': 'Table to store multiple operator metadata',
            },
        ),
        migrations.CreateModel(
            name='HistoricalUserOperator',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the user operator',
                        db_index=True,
                        default=uuid.uuid4,
                        verbose_name='ID',
                    ),
                ),
                (
                    'role',
                    models.CharField(
                        choices=[('admin', 'Admin'), ('reporter', 'Reporter'), ('pending', 'Pending')],
                        db_comment='The role of a user associated with an operator (e.g. admin)',
                        default='pending',
                        max_length=1000,
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[('Pending', 'Pending'), ('Approved', 'Approved'), ('Declined', 'Declined')],
                        db_comment='The status of a user operator in the app (e.g. pending review)',
                        default='Pending',
                        max_length=1000,
                    ),
                ),
                (
                    'verified_at',
                    models.DateTimeField(
                        blank=True, db_comment='The time a user operator was verified by an IRC user', null=True
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        blank=True,
                        db_comment='An operator associated with a user',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'user',
                    models.ForeignKey(
                        blank=True,
                        db_comment='A user associated with an operator',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'verified_by',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The IRC user who verified the user operator',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical user operator',
                'verbose_name_plural': 'historical user operators',
                'db_table': 'erc_history"."user_operator_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalUser_documents',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'document',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.document',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaluser',
                    ),
                ),
                (
                    'user',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalUser_documents',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalParentOperator',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'operator_index',
                    models.IntegerField(
                        db_comment='Index used to differentiate parent operators for the child operator for saving/updating purposes'
                    ),
                ),
                ('legal_name', models.CharField(db_comment='The legal name of an operator', max_length=1000)),
                (
                    'trade_name',
                    models.CharField(blank=True, db_comment='The trade name of an operator', max_length=1000),
                ),
                ('cra_business_number', models.IntegerField(db_comment='The CRA business number of an operator')),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                ('website', models.URLField(blank=True, db_comment='The website address of an operator', null=True)),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'business_structure',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The business structure of an operator',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.businessstructure',
                    ),
                ),
                (
                    'child_operator',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The operator that this parent operator is associated with',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'mailing_address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The mailing address of an operator',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.address',
                    ),
                ),
                (
                    'physical_address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The physical address of an operator (where the operator is physically located)',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.address',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical parent operator',
                'verbose_name_plural': 'historical parent operators',
                'db_table': 'erc_history"."parent_operator_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperator_documents',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'document',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.document',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaloperator',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalOperator_documents',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperator_contacts',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'contact',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.contact',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaloperator',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalOperator_contacts',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddField(
            model_name='historicaloperator',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperator',
            name='business_structure',
            field=models.ForeignKey(
                blank=True,
                db_comment='The business structure of an operator',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.businessstructure',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperator',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperator',
            name='mailing_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The mailing address of an operator',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.address',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperator',
            name='physical_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The physical address of an operator (where the operator is physically located)',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.address',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperator',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperator',
            name='verified_by',
            field=models.ForeignKey(
                blank=True,
                db_comment='The IRC user who verified the operator',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.CreateModel(
            name='HistoricalOperation_reporting_activities',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaloperation',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'reportingactivity',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.reportingactivity',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalOperation_reporting_activities',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperation_regulated_products',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaloperation',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'regulatedproduct',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.regulatedproduct',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalOperation_regulated_products',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperation_documents',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'document',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.document',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaloperation',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalOperation_documents',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='bc_obps_regulated_operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The BC OBPS regulated operation ID of an operation when operation is approved',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.bcobpsregulatedoperation',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="An operation or facility's NAICS code",
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.naicscode',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='operator',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operator who owns the operation',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operator',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='point_of_contact',
            field=models.ForeignKey(
                blank=True,
                db_comment='Foreign key to the contact that is the point of contact',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.contact',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='verified_by',
            field=models.ForeignKey(
                blank=True,
                db_comment='The IRC user who verified the operator',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.CreateModel(
            name='HistoricalMultipleOperator',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'operator_index',
                    models.IntegerField(
                        db_comment='Index used to differentiate operators for this operation for saving/updating purposes'
                    ),
                ),
                ('legal_name', models.CharField(db_comment='The legal name of an operator', max_length=1000)),
                ('trade_name', models.CharField(db_comment='The trade name of an operator', max_length=1000)),
                ('cra_business_number', models.IntegerField(db_comment='The CRA business number of an operator')),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                ('website', models.URLField(blank=True, db_comment='The website address of an operator', null=True)),
                (
                    'percentage_ownership',
                    models.DecimalField(
                        blank=True,
                        db_comment='The percentage of the operation which this operator owns',
                        decimal_places=5,
                        max_digits=10,
                        null=True,
                    ),
                ),
                (
                    'mailing_address_same_as_physical',
                    models.BooleanField(
                        db_comment='Whether or not the mailing address is the same as the physical address',
                        default=True,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'business_structure',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The business structure of an operator',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.businessstructure',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'mailing_address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The mailing address of an operator',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.address',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The operation that this multiple operator is associated with',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'physical_address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The physical address of an operator (where the operator is physically located)',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.address',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical multiple operator',
                'verbose_name_plural': 'historical multiple operators',
                'db_table': 'erc_history"."multiple_operator_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalDocument',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('file', models.TextField(db_comment='The file format, metadata, etc.', max_length=100)),
                (
                    'description',
                    models.CharField(blank=True, db_comment='Description of the document', max_length=1000, null=True),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'type',
                    models.ForeignKey(
                        blank=True,
                        db_comment='Type of document, e.g., boundary map',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.documenttype',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical document',
                'verbose_name_plural': 'historical documents',
                'db_table': 'erc_history"."document_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalContact_documents',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'contact',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.contact',
                    ),
                ),
                (
                    'document',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.document',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicalcontact',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalContact_documents',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddField(
            model_name='historicalcontact',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicalcontact',
            name='business_role',
            field=models.ForeignKey(
                blank=True,
                db_comment='The role assigned to this contact which defines the permissions the contact has.',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.businessrole',
            ),
        ),
        migrations.AddField(
            model_name='historicalcontact',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicalcontact',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='document',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_archived',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='document',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_created',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='document',
            name='type',
            field=models.ForeignKey(
                db_comment='Type of document, e.g., boundary map',
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='documents',
                to='registration.documenttype',
            ),
        ),
        migrations.AddField(
            model_name='document',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_updated',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='contact',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_archived',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='contact',
            name='business_role',
            field=models.ForeignKey(
                db_comment='The role assigned to this contact which defines the permissions the contact has.',
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='contacts',
                to='registration.businessrole',
            ),
        ),
        migrations.AddField(
            model_name='contact',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_created',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='contact',
            name='documents',
            field=models.ManyToManyField(blank=True, related_name='contacts', to='registration.document'),
        ),
        migrations.AddField(
            model_name='contact',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_updated',
                to='registration.user',
            ),
        ),
        migrations.CreateModel(
            name='UserOperator',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the user operator',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                (
                    'role',
                    models.CharField(
                        choices=[('admin', 'Admin'), ('reporter', 'Reporter'), ('pending', 'Pending')],
                        db_comment='The role of a user associated with an operator (e.g. admin)',
                        default='pending',
                        max_length=1000,
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[('Pending', 'Pending'), ('Approved', 'Approved'), ('Declined', 'Declined')],
                        db_comment='The status of a user operator in the app (e.g. pending review)',
                        default='Pending',
                        max_length=1000,
                    ),
                ),
                (
                    'verified_at',
                    models.DateTimeField(
                        blank=True, db_comment='The time a user operator was verified by an IRC user', null=True
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        db_comment='An operator associated with a user',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='user_operators',
                        to='registration.operator',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
                (
                    'user',
                    models.ForeignKey(
                        db_comment='A user associated with an operator',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='user_operators',
                        to='registration.user',
                    ),
                ),
                (
                    'verified_by',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The IRC user who verified the user operator',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='user_operators_verified_by',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."user_operator',
                'db_table_comment': 'Through table to connect Users and Operators and track access requests',
                'indexes': [
                    models.Index(fields=['user'], name='user_operator_user_idx'),
                    models.Index(fields=['operator'], name='user_operator_operator_idx'),
                ],
                'constraints': [
                    models.UniqueConstraint(fields=('user', 'operator'), name='user_and_operator_unique_constraint')
                ],
            },
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['app_role'], name='user_app_role_idx'),
        ),
        migrations.AddConstraint(
            model_name='user',
            constraint=models.UniqueConstraint(
                fields=('user_guid', 'business_guid'), name='uuid_user_and_business_constraint'
            ),
        ),
        migrations.AddIndex(
            model_name='parentoperator',
            index=models.Index(fields=['child_operator'], name='po_child_operator_idx'),
        ),
        migrations.AddIndex(
            model_name='parentoperator',
            index=models.Index(fields=['business_structure'], name='po_business_structure_idx'),
        ),
        migrations.AddIndex(
            model_name='parentoperator',
            index=models.Index(fields=['physical_address'], name='po_physical_address_idx'),
        ),
        migrations.AddIndex(
            model_name='parentoperator',
            index=models.Index(fields=['mailing_address'], name='po_mailing_address_idx'),
        ),
        migrations.AddConstraint(
            model_name='operator',
            constraint=models.UniqueConstraint(
                fields=('cra_business_number',), name='cra_business_number_unique_constraint'
            ),
        ),
        migrations.AddIndex(
            model_name='operation',
            index=models.Index(fields=['operator'], name='operator_idx'),
        ),
        migrations.AddIndex(
            model_name='operation',
            index=models.Index(fields=['naics_code'], name='naics_code_idx'),
        ),
        migrations.AddIndex(
            model_name='operation',
            index=models.Index(fields=['verified_by'], name='operation_verified_by_idx'),
        ),
        migrations.AddIndex(
            model_name='operation',
            index=models.Index(fields=['created_at'], name='operation_created_at_idx'),
        ),
        migrations.AddIndex(
            model_name='operation',
            index=models.Index(fields=['status'], name='operation_status_idx'),
        ),
        migrations.AddConstraint(
            model_name='operation',
            constraint=models.UniqueConstraint(fields=('swrs_facility_id',), name='swrs_facility_id_unique_constraint'),
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['type'], name='document_type_idx'),
        ),
        migrations.AddIndex(
            model_name='contact',
            index=models.Index(fields=['business_role'], name='contact_role_idx'),
        ),
        migrations.RunPython(
            code=init_app_role_data,
            reverse_code=reverse_init_app_role_data,
        ),
        migrations.RunPython(
            code=init_business_role_data,
            reverse_code=reverse_init_business_role_data,
        ),
        migrations.RunPython(
            code=init_business_structure_data,
            reverse_code=reverse_init_business_structure_data,
        ),
        migrations.RunPython(
            code=init_document_type_data,
            reverse_code=reverse_init_document_type_data,
        ),
        migrations.RunPython(
            code=init_naics_code_data,
            reverse_code=reverse_init_naics_code_data,
        ),
        migrations.RunPython(
            code=init_regulated_product_data,
            reverse_code=reverse_init_regulated_product_data,
        ),
        migrations.RunPython(
            code=init_reporting_activity_data,
            reverse_code=reverse_init_reporting_activity_data,
        ),
        migrations.AddField(
            model_name='useroperator',
            name='user_friendly_id',
            field=models.IntegerField(
                blank=True, db_comment='A user-friendly ID to identify the user operator', null=True
            ),
        ),
        migrations.AddField(
            model_name='historicaluseroperator',
            name='user_friendly_id',
            field=models.IntegerField(
                blank=True, db_comment='A user-friendly ID to identify the user operator', null=True
            ),
        ),
        migrations.RunPython(
            code=add_325190_naics_code_data,
            reverse_code=reverse_add_325190_naics_code_data,
        ),
        migrations.RemoveField(
            model_name='historicaloperation',
            name='previous_year_attributable_emissions',
        ),
        migrations.RemoveField(
            model_name='operation',
            name='previous_year_attributable_emissions',
        ),
        migrations.CreateModel(
            name='Facility',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the facility',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                        verbose_name='ID',
                    ),
                ),
                ('name', models.CharField(db_comment='The name of a facility', max_length=1000)),
                ('type', models.CharField(db_comment='The type of a facility', max_length=1000)),
                ('new_entrant', models.BooleanField(db_comment='Whether or not the facility is a new entrant')),
                (
                    'address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The address of the facility',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='%(class)s_address',
                        to='registration.address',
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."facility',
                'db_table_comment': 'Contains data on facilities that emit carbon emissions and must report them to Clean Growth. A linear facility operation is made up of several different facilities whereas a single facility operation has only one facility. In the case of a single facility operation, much of the data in this table will overlap with the parent record in the operation table',
            },
        ),
        migrations.AlterModelTableComment(
            name='operation',
            table_comment='Operations',
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="An operation's NAICS code",
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.naicscode',
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='name',
            field=models.CharField(db_comment='The name of an operation', max_length=1000),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='opt_in',
            field=models.BooleanField(
                blank=True,
                db_comment='Whether or not the operation is required to register or is simply opting in. Only needed if the operation did not report the previous year.',
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='type',
            field=models.CharField(db_comment='The type of an operation', max_length=1000),
        ),
        migrations.AlterField(
            model_name='operation',
            name='bcghg_id',
            field=models.CharField(
                blank=True,
                db_comment="An operation's BCGHG identifier. Only needed if the operation submitted a report the previous year.",
                max_length=1000,
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='naics_code',
            field=models.ForeignKey(
                db_comment="An operation's NAICS code",
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operations',
                to='registration.naicscode',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='name',
            field=models.CharField(db_comment='The name of an operation', max_length=1000),
        ),
        migrations.AlterField(
            model_name='operation',
            name='opt_in',
            field=models.BooleanField(
                blank=True,
                db_comment='Whether or not the operation is required to register or is simply opting in. Only needed if the operation did not report the previous year.',
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='swrs_facility_id',
            field=models.IntegerField(
                blank=True,
                db_comment="An operation's SWRS facility ID. Only needed if the operation submitted a report the previous year.",
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='type',
            field=models.CharField(db_comment='The type of an operation', max_length=1000),
        ),
        migrations.CreateModel(
            name='WellAuthorizationNumber',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'well_authorization_number',
                    models.IntegerField(
                        db_comment='A well authorization number from the BC Energy Regulator',
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='well_authorization_numbers',
                        to='registration.facility',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."well_authorization_number',
                'db_table_comment': 'A table containing well authorization numbers. Facilities can have multiple well authorization numbers.',
            },
        ),
        migrations.CreateModel(
            name='HistoricalWellAuthorizationNumber',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'well_authorization_number',
                    models.IntegerField(
                        db_comment='A well authorization number from the BC Energy Regulator', db_index=True
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.facility',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical well authorization number',
                'verbose_name_plural': 'historical well authorization numbers',
                'db_table': 'erc_history"."well_authorization_number_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddField(
            model_name='facility',
            name='operation',
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.DO_NOTHING, related_name='facilities', to='registration.operation'
            ),
        ),
        migrations.AddField(
            model_name='facility',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_updated',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='facility',
            name='bcghg_id',
            field=models.CharField(blank=True, db_comment="A facility's BCGHG identifier.", max_length=1000, null=True),
        ),
        migrations.AddField(
            model_name='facility',
            name='swrs_facility_id',
            field=models.IntegerField(blank=True, db_comment="A facility's SWRS facility ID.", null=True),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='bcghg_id',
            field=models.CharField(
                blank=True,
                db_comment="An operation's BCGHG identifier. Only needed if the operation submitted a report the previous year.",
                max_length=1000,
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='swrs_facility_id',
            field=models.IntegerField(
                blank=True,
                db_comment="An operation's SWRS facility ID. Only needed if the operation submitted a report the previous year.",
                null=True,
            ),
        ),
        migrations.AlterModelTableComment(
            name='address',
            table_comment='Table containing address data. Only Canadian addresses are supported.',
        ),
        migrations.AlterModelTableComment(
            name='approle',
            table_comment='This table contains the definitions for roles within the BCIERs apps. These roles are used to define the permissions a user has within BCIERs apps.',
        ),
        migrations.AlterModelTableComment(
            name='bcobpsregulatedoperation',
            table_comment='Table to store BC OBPS Regulated Operation metadata. Once an operation has been approved as a BC OBPS Regulated Operations (IRC has determined the operation meets certain criteria and should be included in the program), then it is issued an ID.',
        ),
        migrations.AlterModelTableComment(
            name='businessrole',
            table_comment='This table contains the definitions for roles within the operator/operation. These roles are used to define the permissions a user has within the operator/operation.',
        ),
        migrations.AlterModelTableComment(
            name='businessstructure',
            table_comment='Table containing operator business structures. Business structure refers to the legal and organizational framework under which a business operates (e.g., partnership, sole proprietorship, corporation, limited liability company).',
        ),
        migrations.AlterModelTableComment(
            name='document',
            table_comment='Table that contains information about documents such as file metadata, type, and description.',
        ),
        migrations.AlterModelTableComment(
            name='documenttype',
            table_comment='Table that contains types of documents.',
        ),
        migrations.AlterModelTableComment(
            name='facility',
            table_comment='Contains data on facilities that emit carbon emissions and must report them to Clean Growth. A linear facility operation is made up of several different facilities whereas a single facility operation has only one facility. In the case of a single facility operation, much of the data in this table will overlap with the parent record in the operation table.',
        ),
        migrations.AlterModelTableComment(
            name='multipleoperator',
            table_comment="Table containing data about operations' operators. An operation's designated (primary) operator has a record in the Operator table (this information has been submitted by someone who works for that operator). Any additional operators are stored in this table (additional operator information has been submitted by a user who works for a different operator, so this user should not have access to the Operator table record).",
        ),
        migrations.AlterModelTableComment(
            name='naicscode',
            table_comment='Table contains NAICS codes & their descriptions. NAICS code means the 6-digit code applicable to one or more producing units within a reporting operation under the North American Industrial Classification System (NAICS) Canada, 2007, published by Statistics Canada. Operations can have more than one NAICS code. More information, including version history for NAICS codes can be found at https://www.statcan.gc.ca/en/concepts/industry.',
        ),
        migrations.AlterModelTableComment(
            name='operation',
            table_comment="Table containing information about operations. 'Industrial operation' means one or more facilities, or a prescribed activity, to which greenhouse gas emissions are attributable, subject to subsection (3)of the Greenhouse Gas Industrial Reporting and Control Act: https://www.bclaws.gov.bc.ca/civix/document/id/complete/statreg/14029_01#section1.",
        ),
        migrations.AlterModelTableComment(
            name='operator',
            table_comment='Table containing operator information. An operator is the person who owns and/or controls and directs industrial operations. An operator can own multiple operations. For more information see definitions in the Greenhouse Gas Industrial Reporting and Control Act: https://www.bclaws.gov.bc.ca/civix/document/id/complete/statreg/14029_01#section1: https://www.bclaws.gov.bc.ca/civix/document/id/complete/statreg/14029_01#section1',
        ),
        migrations.AlterModelTableComment(
            name='parentoperator',
            table_comment="Table containing data about operators' parent operators. Parent operators may have a record in the Operator table. If so, that record is controlled by someone who works for that parent operator. The information in this table is controlled by child operators who should not have access to other operator's records.",
        ),
        migrations.AlterModelTableComment(
            name='regulatedproduct',
            table_comment='Table containing the names of regulated products. Regulated product means a product listed in column 2 of Table 2 of Schedule A.1 of the Greenhouse Gas Industrial Reporting and Control Act: https://www.bclaws.gov.bc.ca/civix/document/id/lc/statreg/249_2015.',
        ),
        migrations.AlterModelTableComment(
            name='reportingactivity',
            table_comment='Table containing names activities. If facilities carry out these activities, in many cases they are required to report. Some activities can only be carried out by certain types of facilities. Reporting activities are listed in column 2 of Table 1 of Schedule A of the Greenhouse Gas Industrial Reporting and Control Act: https://www.bclaws.gov.bc.ca/civix/document/id/lc/statreg/249_2015.',
        ),
        migrations.AlterModelTableComment(
            name='user',
            table_comment='Table containing information about app users. Industry users are all associated with a business and are identified via their Business BCEID.',
        ),
        migrations.AlterModelTableComment(
            name='wellauthorizationnumber',
            table_comment='A table containing well authorization numbers. Authorization numbers are assigned by the British Columbia Energy Regulator: https://www.bc-er.ca/what-we-regulate/oil-gas/wells/. Facilities can have multiple well authorization numbers.',
        ),
        migrations.AlterModelOptions(
            name='facility',
            options={'verbose_name_plural': 'Facilities'},
        ),
        migrations.AlterModelTableComment(
            name='contact',
            table_comment="Table containing information about contacts. Contacts are people that IRC may need to get in touch with to confirm information about industry. Contacts can be BCIERs app users (in which case they will also have a record in the Users table), but they don't have to be.",
        ),
        migrations.RemoveField(
            model_name='facility',
            name='new_entrant',
        ),
        migrations.RemoveField(
            model_name='facility',
            name='operation',
        ),
        migrations.AlterField(
            model_name='facility',
            name='name',
            field=models.CharField(db_comment='The name of the facility when the operation owned it', max_length=1000),
        ),
        migrations.AlterField(
            model_name='facility',
            name='type',
            field=models.CharField(
                choices=[
                    ('Single Facility', 'Single Facility'),
                    ('Large LFO', 'Large Lfo'),
                    ('Medium LFO', 'Medium Lfo'),
                    ('Small Aggregate LFO', 'Small Aggregate Lfo'),
                ],
                db_comment='The type of the facility',
                max_length=100,
            ),
        ),
        migrations.CreateModel(
            name='HistoricalFacility',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the facility',
                        db_index=True,
                        default=uuid.uuid4,
                        verbose_name='ID',
                    ),
                ),
                (
                    'name',
                    models.CharField(
                        db_comment='The name of the facility when the operation owned it', max_length=1000
                    ),
                ),
                (
                    'type',
                    models.CharField(
                        choices=[
                            ('Single Facility', 'Single Facility'),
                            ('Large LFO', 'Large Lfo'),
                            ('Medium LFO', 'Medium Lfo'),
                            ('Small Aggregate LFO', 'Small Aggregate Lfo'),
                        ],
                        db_comment='The type of the facility',
                        max_length=100,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'address',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The address of the facility',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.address',
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'bcghg_id',
                    models.CharField(
                        blank=True, db_comment="A facility's BCGHG identifier.", max_length=1000, null=True
                    ),
                ),
                (
                    'swrs_facility_id',
                    models.IntegerField(blank=True, db_comment="A facility's SWRS facility ID.", null=True),
                ),
            ],
            options={
                'verbose_name': 'historical facility',
                'verbose_name_plural': 'historical Facilities',
                'db_table': 'erc_history"."facility_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalEvent',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(db_comment='Primary key to identify the event', db_index=True, default=uuid.uuid4),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'type',
                    models.CharField(
                        choices=[
                            ('Closing or Temporary Shutdown', 'Closing Or Temporary Shutdown'),
                            ('Acquisition', 'Acquisition'),
                            ('Transfer of Control', 'Transfer Of Control'),
                            ('Divestment', 'Divestment'),
                            ('Startup', 'Startup'),
                        ],
                        db_comment='The type of the event',
                        max_length=100,
                    ),
                ),
                (
                    'additional_data',
                    models.JSONField(blank=True, db_comment='Additional data about the event', null=True),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical event',
                'verbose_name_plural': 'historical events',
                'db_table': 'erc_history"."event_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalFacilityOwnershipTimeline',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True, db_comment='The start date of the ownership of the facility', null=True
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True, db_comment='The end date of the ownership of the facility', null=True
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical facility ownership timeline',
                'verbose_name_plural': 'historical facility ownership timelines',
                'db_table': 'erc_history"."facility_ownership_timeline_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperationOwnershipTimeline',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True, db_comment='The start date of the ownership of the operation', null=True
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True, db_comment='The end date of the ownership of the operation', null=True
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical operation ownership timeline',
                'verbose_name_plural': 'historical operation ownership timelines',
                'db_table': 'erc_history"."operation_ownership_timeline_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='Event',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the event',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'type',
                    models.CharField(
                        choices=[
                            ('Closing or Temporary Shutdown', 'Closing Or Temporary Shutdown'),
                            ('Acquisition', 'Acquisition'),
                            ('Transfer of Control', 'Transfer Of Control'),
                            ('Divestment', 'Divestment'),
                            ('Startup', 'Startup'),
                        ],
                        db_comment='The type of the event',
                        max_length=100,
                    ),
                ),
                (
                    'additional_data',
                    models.JSONField(blank=True, db_comment='Additional data about the event', null=True),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='events',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='events',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."event',
                'db_table_comment': 'Table containing information about events that occur in the lifecycle of an operation or facility.',
                'constraints': [
                    models.CheckConstraint(
                        condition=models.Q(
                            models.Q(('operation_id__isnull', True), ('facility_id__isnull', False)),
                            models.Q(('operation_id__isnull', False), ('facility_id__isnull', True)),
                            _connector='OR',
                        ),
                        name='event_not_both_operation_and_facility',
                    ),
                    models.CheckConstraint(
                        condition=models.Q(
                            ('operation_id__isnull', False), ('facility_id__isnull', False), _negated=True
                        ),
                        name='event_cannot_have_both_operation_and_facility',
                    ),
                    models.CheckConstraint(
                        condition=models.Q(
                            ('facility_id__isnull', True), ('operation_id__isnull', True), _negated=True
                        ),
                        name='event_has_operation_or_facility',
                    ),
                ],
            },
        ),
        migrations.CreateModel(
            name='FacilityOwnershipTimeline',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True, db_comment='The start date of the ownership of the facility', null=True
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True, db_comment='The end date of the ownership of the facility', null=True
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='ownerships',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='facility_ownerships',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."facility_ownership_timeline',
                'db_table_comment': 'A table to connect facilities and operations',
                'constraints': [
                    models.UniqueConstraint(
                        condition=models.Q(('end_date__isnull', True)),
                        fields=('facility',),
                        name='unique_active_ownership_per_facility',
                    )
                ],
            },
        ),
        migrations.CreateModel(
            name='OperationOwnershipTimeline',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True, db_comment='The start date of the ownership of the operation', null=True
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True, db_comment='The end date of the ownership of the operation', null=True
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='ownerships',
                        to='registration.operation',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='operation_ownerships',
                        to='registration.operator',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."operation_ownership_timeline',
                'db_table_comment': 'A table to connect operations and operators',
                'constraints': [
                    models.UniqueConstraint(
                        condition=models.Q(('end_date__isnull', True)),
                        fields=('operation',),
                        name='unique_active_ownership_per_operation',
                    )
                ],
            },
        ),
        migrations.RunPython(
            code=add_418990_naics_code_data,
            reverse_code=reverse_add_418990_naics_code_data,
        ),
        migrations.RemoveField(
            model_name='historicalwellauthorizationnumber',
            name='facility',
        ),
        migrations.RemoveField(
            model_name='wellauthorizationnumber',
            name='facility',
        ),
        migrations.AddField(
            model_name='facility',
            name='latitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The latitude of the largest point of emissions',
                decimal_places=6,
                max_digits=8,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-90),
                    django.core.validators.MaxValueValidator(90),
                ],
            ),
        ),
        migrations.AddField(
            model_name='facility',
            name='longitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The longitude of the largest point of emissions',
                decimal_places=6,
                max_digits=9,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-180),
                    django.core.validators.MaxValueValidator(180),
                ],
            ),
        ),
        migrations.AddField(
            model_name='facility',
            name='well_authorization_numbers',
            field=models.ManyToManyField(related_name='facilities', to='registration.wellauthorizationnumber'),
        ),
        migrations.AddField(
            model_name='historicalfacility',
            name='latitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The latitude of the largest point of emissions',
                decimal_places=6,
                max_digits=8,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-90),
                    django.core.validators.MaxValueValidator(90),
                ],
            ),
        ),
        migrations.AddField(
            model_name='historicalfacility',
            name='longitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The longitude of the largest point of emissions',
                decimal_places=6,
                max_digits=9,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-180),
                    django.core.validators.MaxValueValidator(180),
                ],
            ),
        ),
        migrations.AlterField(
            model_name='facility',
            name='name',
            field=models.CharField(
                db_comment='The name of the facility when the operation owned it', max_length=1000, unique=True
            ),
        ),
        migrations.AlterField(
            model_name='facility',
            name='type',
            field=models.CharField(
                choices=[
                    ('Single Facility', 'Single Facility'),
                    ('Large Facility', 'Large Facility'),
                    ('Medium Facility', 'Medium Facility'),
                    ('Small Aggregate', 'Small Aggregate'),
                ],
                db_comment='The type of the facility',
                max_length=100,
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='name',
            field=models.CharField(
                db_comment='The name of the facility when the operation owned it', db_index=True, max_length=1000
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='type',
            field=models.CharField(
                choices=[
                    ('Single Facility', 'Single Facility'),
                    ('Large Facility', 'Large Facility'),
                    ('Medium Facility', 'Medium Facility'),
                    ('Small Aggregate', 'Small Aggregate'),
                ],
                db_comment='The type of the facility',
                max_length=100,
            ),
        ),
        migrations.RunPython(
            code=populate_facility_lat_long,
        ),
        migrations.AlterField(
            model_name='facility',
            name='latitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The latitude of the largest point of emissions',
                decimal_places=6,
                max_digits=8,
                validators=[
                    django.core.validators.MinValueValidator(-90),
                    django.core.validators.MaxValueValidator(90),
                ],
            ),
        ),
        migrations.AlterField(
            model_name='facility',
            name='longitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The longitude of the largest point of emissions',
                decimal_places=6,
                max_digits=9,
                validators=[
                    django.core.validators.MinValueValidator(-180),
                    django.core.validators.MaxValueValidator(180),
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='latitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The latitude of the largest point of emissions',
                decimal_places=6,
                max_digits=8,
                validators=[
                    django.core.validators.MinValueValidator(-90),
                    django.core.validators.MaxValueValidator(90),
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='longitude_of_largest_emissions',
            field=models.DecimalField(
                db_comment='The longitude of the largest point of emissions',
                decimal_places=6,
                max_digits=9,
                validators=[
                    django.core.validators.MinValueValidator(-180),
                    django.core.validators.MaxValueValidator(180),
                ],
            ),
        ),
        migrations.AddField(
            model_name='historicalparentoperator',
            name='foreign_address',
            field=models.CharField(
                blank=True,
                db_comment='The address of a non-Canadian parent operator (Canadian operators will have a record in the address table, which only supports Canadian addresses)',
                max_length=2000,
                null=True,
            ),
        ),
        migrations.AddField(
            model_name='historicalparentoperator',
            name='foreign_tax_id_number',
            field=models.CharField(
                blank=True,
                db_comment="The tax ID of a non-Canadian parent operator (non-Canadian operators won't have a CRA business number)",
                max_length=1000,
                null=True,
            ),
        ),
        migrations.AddField(
            model_name='parentoperator',
            name='foreign_address',
            field=models.CharField(
                blank=True,
                db_comment='The address of a non-Canadian parent operator (Canadian operators will have a record in the address table, which only supports Canadian addresses)',
                max_length=2000,
                null=True,
            ),
        ),
        migrations.AddField(
            model_name='parentoperator',
            name='foreign_tax_id_number',
            field=models.CharField(
                blank=True,
                db_comment="The tax ID of a non-Canadian parent operator (non-Canadian operators won't have a CRA business number)",
                max_length=1000,
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperator',
            name='trade_name',
            field=models.CharField(blank=True, db_comment='The trade name of an operator', max_length=1000, null=True),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='bc_corporate_registry_number',
            field=models.CharField(
                blank=True,
                db_comment='The BC corporate registry number of a parent operator',
                null=True,
                validators=[
                    django.core.validators.RegexValidator(
                        message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                        regex='^[A-Za-z]{1,3}[0-9]{7}$',
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='business_structure',
            field=models.ForeignKey(
                blank=True,
                db_comment='The business structure of a parent operator',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.businessstructure',
            ),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='cra_business_number',
            field=models.IntegerField(blank=True, db_comment='The CRA business number of a parent operator', null=True),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='legal_name',
            field=models.CharField(db_comment='The legal name of a parent operator', max_length=1000),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='mailing_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The mailing address of a parent operator',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.address',
            ),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='operator_index',
            field=models.IntegerField(
                blank=True,
                db_comment='Index used to differentiate parent operators for the child operator for saving/updating purposes',
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='physical_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The physical address of a parent operator (where the operator is physically located)',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.address',
            ),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='trade_name',
            field=models.CharField(blank=True, db_comment='The trade name of a parent operator', max_length=1000),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='website',
            field=models.URLField(blank=True, db_comment='The website address of a parent operator', null=True),
        ),
        migrations.AlterField(
            model_name='operator',
            name='physical_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The physical address of an operator (where the operator is physically located)',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operators_physical',
                to='registration.address',
            ),
        ),
        migrations.AlterField(
            model_name='operator',
            name='trade_name',
            field=models.CharField(blank=True, db_comment='The trade name of an operator', max_length=1000, null=True),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='bc_corporate_registry_number',
            field=models.CharField(
                blank=True,
                db_comment='The BC corporate registry number of a parent operator',
                null=True,
                validators=[
                    django.core.validators.RegexValidator(
                        message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                        regex='^[A-Za-z]{1,3}[0-9]{7}$',
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='business_structure',
            field=models.ForeignKey(
                blank=True,
                db_comment='The business structure of a parent operator',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='parent_operators',
                to='registration.businessstructure',
            ),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='cra_business_number',
            field=models.IntegerField(blank=True, db_comment='The CRA business number of a parent operator', null=True),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='legal_name',
            field=models.CharField(db_comment='The legal name of a parent operator', max_length=1000),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='mailing_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The mailing address of a parent operator',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='parent_operators_mailing',
                to='registration.address',
            ),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='operator_index',
            field=models.IntegerField(
                blank=True,
                db_comment='Index used to differentiate parent operators for the child operator for saving/updating purposes',
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='physical_address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The physical address of a parent operator (where the operator is physically located)',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='parent_operators_physical',
                to='registration.address',
            ),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='trade_name',
            field=models.CharField(blank=True, db_comment='The trade name of a parent operator', max_length=1000),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='website',
            field=models.URLField(blank=True, db_comment='The website address of a parent operator', null=True),
        ),
        migrations.CreateModel(
            name='HistoricalPartnerOperator',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('legal_name', models.CharField(db_comment='The legal name of an operator', max_length=1000)),
                (
                    'trade_name',
                    models.CharField(
                        blank=True, db_comment='The trade name of an operator', max_length=1000, null=True
                    ),
                ),
                ('cra_business_number', models.IntegerField(db_comment='The CRA business number of an operator')),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'bc_obps_operator',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The operator that this partner operator is associated with',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
                (
                    'business_structure',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The business structure of an operator',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.businessstructure',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical partner operator',
                'verbose_name_plural': 'historical partner operators',
                'db_table': 'erc_history"."partner_operator_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='PartnerOperator',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('legal_name', models.CharField(db_comment='The legal name of an operator', max_length=1000)),
                (
                    'trade_name',
                    models.CharField(
                        blank=True, db_comment='The trade name of an operator', max_length=1000, null=True
                    ),
                ),
                ('cra_business_number', models.IntegerField(db_comment='The CRA business number of an operator')),
                (
                    'bc_corporate_registry_number',
                    models.CharField(
                        db_comment='The BC corporate registry number of an operator',
                        validators=[
                            django.core.validators.RegexValidator(
                                message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                                regex='^[A-Za-z]{1,3}[0-9]{7}$',
                            )
                        ],
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'bc_obps_operator',
                    models.ForeignKey(
                        db_comment='The operator that this partner operator is associated with',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='partner_operators',
                        to='registration.operator',
                    ),
                ),
                (
                    'business_structure',
                    models.ForeignKey(
                        db_comment='The business structure of an operator',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='partner_operators',
                        to='registration.businessstructure',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."partner_operator',
                'db_table_comment': "Table containing data about operators' partner operators. Partner operators may have a record in the Operator table. If so, that record is controlled by someone who works for that partner operator. The information in this table is controlled by BCOBPS operators who should not have access to other operator's records.",
                'indexes': [
                    models.Index(fields=['bc_obps_operator'], name='partner_bc_obps_operator_idx'),
                    models.Index(fields=['business_structure'], name='partner_business_structure_idx'),
                ],
            },
        ),
        migrations.RemoveIndex(
            model_name='contact',
            name='contact_role_idx',
        ),
        migrations.RemoveIndex(
            model_name='document',
            name='document_type_idx',
        ),
        migrations.RemoveIndex(
            model_name='operation',
            name='operator_idx',
        ),
        migrations.RemoveIndex(
            model_name='operation',
            name='naics_code_idx',
        ),
        migrations.RemoveIndex(
            model_name='operation',
            name='operation_verified_by_idx',
        ),
        migrations.RemoveIndex(
            model_name='operation',
            name='operation_created_at_idx',
        ),
        migrations.RemoveIndex(
            model_name='parentoperator',
            name='po_child_operator_idx',
        ),
        migrations.RemoveIndex(
            model_name='parentoperator',
            name='po_business_structure_idx',
        ),
        migrations.RemoveIndex(
            model_name='parentoperator',
            name='po_physical_address_idx',
        ),
        migrations.RemoveIndex(
            model_name='parentoperator',
            name='po_mailing_address_idx',
        ),
        migrations.RemoveIndex(
            model_name='partneroperator',
            name='partner_bc_obps_operator_idx',
        ),
        migrations.RemoveIndex(
            model_name='partneroperator',
            name='partner_business_structure_idx',
        ),
        migrations.RemoveIndex(
            model_name='user',
            name='user_app_role_idx',
        ),
        migrations.RemoveIndex(
            model_name='useroperator',
            name='user_operator_user_idx',
        ),
        migrations.RemoveIndex(
            model_name='useroperator',
            name='user_operator_operator_idx',
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='trade_name',
            field=models.CharField(
                blank=True, db_comment='The trade name of a parent operator', max_length=1000, null=True
            ),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='trade_name',
            field=models.CharField(
                blank=True, db_comment='The trade name of a parent operator', max_length=1000, null=True
            ),
        ),
        migrations.AddField(
            model_name='facility',
            name='is_current_year',
            field=models.BooleanField(
                blank=True,
                db_comment="The facility's starting date is within the current year or preceeding year",
                null=True,
            ),
        ),
        migrations.AddField(
            model_name='facility',
            name='starting_date',
            field=models.DateTimeField(
                blank=True, db_comment='The date of the facility starting operations', null=True
            ),
        ),
        migrations.AddField(
            model_name='historicalfacility',
            name='is_current_year',
            field=models.BooleanField(
                blank=True,
                db_comment="The facility's starting date is within the current year or preceeding year",
                null=True,
            ),
        ),
        migrations.AddField(
            model_name='historicalfacility',
            name='starting_date',
            field=models.DateTimeField(
                blank=True, db_comment='The date of the facility starting operations', null=True
            ),
        ),
        migrations.AddField(
            model_name='historicalreportingactivity',
            name='slug',
            field=models.CharField(
                db_comment='A varchar slug to identify the activity on the frontend. This will be used to generate the routes to navigate to each activity',
                default='slug',
                max_length=50,
            ),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='historicalreportingactivity',
            name='weight',
            field=models.FloatField(
                db_comment='A weighted float value used to order activities. This will be used on the frontend to determine the order in which activity pages appear in an emissions report',
                default=100.0,
            ),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='reportingactivity',
            name='slug',
            field=models.CharField(
                db_comment='A varchar slug to identify the activity on the frontend. This will be used to generate the routes to navigate to each activity',
                default='slug',
                max_length=50,
            ),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='reportingactivity',
            name='weight',
            field=models.FloatField(
                db_comment='A weighted float value used to order activities. This will be used on the frontend to determine the order in which activity pages appear in an emissions report',
                default=100.0,
            ),
            preserve_default=False,
        ),
        migrations.RunPython(
            code=init_activity_slug_weight,
        ),
        migrations.RunPython(
            code=add_products,
            reverse_code=reverse_add_products,
        ),
        migrations.RunPython(
            code=add_activities,
            reverse_code=reverse_add_activities,
        ),
        migrations.RunPython(
            code=update_activity_names,
            reverse_code=reverse_update_activity_names,
        ),
        migrations.CreateModel(
            name='Activity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                (
                    'name',
                    models.CharField(
                        db_comment='The name of an activity. The activity names come from Schedule A of the British Columbia Greenhouse Gas Emission Reporting Regulation https://www.bclaws.gov.bc.ca/civix/document/id/lc/statreg/249_2015#ScheduleA',
                        max_length=1000,
                    ),
                ),
                (
                    'applicable_to',
                    models.CharField(
                        choices=[('sfo', 'Sfo'), ('lfo', 'Lfo'), ('all', 'All')],
                        db_comment='Which type of facility the activity applies to. An activity can be valid for only a Single Facility Operation, only a Linear Facility Operation or it can apply to both',
                        max_length=1000,
                    ),
                ),
                (
                    'slug',
                    models.CharField(
                        db_comment='A varchar slug to identify the activity on the frontend. This will be used to generate the routes to navigate to each activity',
                        max_length=50,
                    ),
                ),
                (
                    'weight',
                    models.FloatField(
                        db_comment='A weighted float value used to order activities. This will be used on the frontend to determine the order in which activity pages appear in an emissions report'
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."activity',
                'db_table_comment': 'Table containing activity definitions for reporting. If facilities carry out these activities, in many cases they are required to report. Some activities can only be carried out by certain types of facilities. Reporting activities are listed in column 2 of Table 1 of Schedule A of the Greenhouse Gas Industrial Reporting and Control Act: https://www.bclaws.gov.bc.ca/civix/document/id/lc/statreg/249_2015.',
            },
        ),
        migrations.CreateModel(
            name='HistoricalActivity',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                (
                    'name',
                    models.CharField(
                        db_comment='The name of an activity. The activity names come from Schedule A of the British Columbia Greenhouse Gas Emission Reporting Regulation https://www.bclaws.gov.bc.ca/civix/document/id/lc/statreg/249_2015#ScheduleA',
                        max_length=1000,
                    ),
                ),
                (
                    'applicable_to',
                    models.CharField(
                        choices=[('sfo', 'Sfo'), ('lfo', 'Lfo'), ('all', 'All')],
                        db_comment='Which type of facility the activity applies to. An activity can be valid for only a Single Facility Operation, only a Linear Facility Operation or it can apply to both',
                        max_length=1000,
                    ),
                ),
                (
                    'slug',
                    models.CharField(
                        db_comment='A varchar slug to identify the activity on the frontend. This will be used to generate the routes to navigate to each activity',
                        max_length=50,
                    ),
                ),
                (
                    'weight',
                    models.FloatField(
                        db_comment='A weighted float value used to order activities. This will be used on the frontend to determine the order in which activity pages appear in an emissions report'
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
            ],
            options={
                'verbose_name': 'historical activity',
                'verbose_name_plural': 'historical activitys',
                'db_table': 'erc_history"."activity_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.RemoveField(
            model_name='operation',
            name='reporting_activities',
        ),
        migrations.AddField(
            model_name='operation',
            name='activities',
            field=models.ManyToManyField(blank=True, related_name='%(class)ss', to='registration.activity'),
        ),
        migrations.CreateModel(
            name='HistoricalOperation_activities',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'activity',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.activity',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaloperation',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalOperation_activities',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.DeleteModel(
            name='HistoricalOperation_reporting_activities',
        ),
        migrations.RunSQL(
            sql='\n            INSERT INTO erc.activity (\n                name,\n                applicable_to,\n                slug,\n                weight\n            )\n            SELECT\n                name,\n                applicable_to,\n                slug,\n                weight\n            FROM\n                erc.reporting_activity\n                order by weight asc;\n        ',
            reverse_sql='\n            truncate erc.activity restart identity cascade;\n        ',
        ),
        migrations.DeleteModel(
            name='ReportingActivity',
        ),
        migrations.DeleteModel(
            name='HistoricalReportingActivity',
        ),
        migrations.CreateModel(
            name='HistoricalRegistrationPurpose',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'registration_purpose',
                    models.CharField(
                        choices=[
                            ('Reporting Operation', 'Reporting Operation'),
                            ('OBPS Regulated Operation', 'Obps Regulated Operation'),
                            ('Opted-in Operation', 'Opted In Operation'),
                            ('New Entrant Operation', 'New Entrant Operation'),
                            ('Electricity Import Operation', 'Electricity Import Operation'),
                            ('Potential Reporting Operation', 'Potential Reporting Operation'),
                        ],
                        db_comment='Registration purpose',
                        max_length=1000,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The operator that has the purpose',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical registration purpose',
                'verbose_name_plural': 'historical registration purposes',
                'db_table': 'erc_history"."registration_purpose_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='RegistrationPurpose',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'registration_purpose',
                    models.CharField(
                        choices=[
                            ('Reporting Operation', 'Reporting Operation'),
                            ('OBPS Regulated Operation', 'Obps Regulated Operation'),
                            ('Opted-in Operation', 'Opted In Operation'),
                            ('New Entrant Operation', 'New Entrant Operation'),
                            ('Electricity Import Operation', 'Electricity Import Operation'),
                            ('Potential Reporting Operation', 'Potential Reporting Operation'),
                        ],
                        db_comment='Registration purpose',
                        max_length=1000,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        db_comment='The operator that has the purpose',
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='registration_purposes',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."registration_purpose',
                'db_table_comment': 'Table that contains operations and their registration purposes.',
            },
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='status',
            field=models.CharField(
                choices=[
                    ('Not Started', 'Not Started'),
                    ('Draft', 'Draft'),
                    ('Pending', 'Pending'),
                    ('Approved', 'Approved'),
                    ('Declined', 'Declined'),
                    ('Changes Requested', 'Changes Requested'),
                    ('Registered', 'Registered'),
                    ('Transferred', 'Transferred'),
                    ('Closed', 'Closed'),
                    ('Temporarily Shutdown', 'Temporarily Shutdown'),
                ],
                db_comment='The status of an operation in the app (e.g. pending review)',
                default='Not Started',
                max_length=1000,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='status',
            field=models.CharField(
                choices=[
                    ('Not Started', 'Not Started'),
                    ('Draft', 'Draft'),
                    ('Pending', 'Pending'),
                    ('Approved', 'Approved'),
                    ('Declined', 'Declined'),
                    ('Changes Requested', 'Changes Requested'),
                    ('Registered', 'Registered'),
                    ('Transferred', 'Transferred'),
                    ('Closed', 'Closed'),
                    ('Temporarily Shutdown', 'Temporarily Shutdown'),
                ],
                db_comment='The status of an operation in the app (e.g. pending review)',
                default='Not Started',
                max_length=1000,
            ),
        ),
        migrations.CreateModel(
            name='HistoricalOptedInOperationDetail',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'meets_section_3_emissions_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment='Does this operation have emissions that are attributable for the purposes of section 3 of the Act?',
                        null=True,
                    ),
                ),
                (
                    'meets_electricity_import_operation_criteria',
                    models.BooleanField(
                        blank=True, db_comment='Is this operation an electricity import operation?', null=True
                    ),
                ),
                (
                    'meets_entire_operation_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment='Designation as an opt-in can only be granted to an entire operation (i.e. not a part or certain segment of an operation). Do you confirm that the operation applying for this designation is an entire operation?',
                        null=True,
                    ),
                ),
                (
                    'meets_section_6_emissions_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment='Does this operation have emissions that are attributable for the purposes of section 6 of the Act?',
                        null=True,
                    ),
                ),
                (
                    'meets_naics_code_11_22_562_classification_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment="Is this operation's primary economic activity classified by the following NAICS Code - 11, 22, or 562?",
                        null=True,
                    ),
                ),
                (
                    'meets_producing_gger_schedule_a1_regulated_product',
                    models.BooleanField(
                        blank=True,
                        db_comment='Does this operation produce a regulated product listed in Table 1 of Schedule A.1 of the GGERR?',
                        null=True,
                    ),
                ),
                (
                    'meets_reporting_and_regulated_obligations',
                    models.BooleanField(
                        blank=True,
                        db_comment='Is this operation capable of fulfilling the obligations of a reporting operation and a regulated operation under the Act and the regulations?',
                        null=True,
                    ),
                ),
                (
                    'meets_notification_to_director_on_criteria_change',
                    models.BooleanField(
                        blank=True,
                        db_comment='Will the operator notify the Director as soon as possible if this operation ceases to meet any of the criteria for the designation of the operation as a reporting operation and a regulated operation?',
                        null=True,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical opted in operation detail',
                'verbose_name_plural': 'historical opted in operation details',
                'db_table': 'erc_history"."opted_in_operation_detail_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='OptedInOperationDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'meets_section_3_emissions_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment='Does this operation have emissions that are attributable for the purposes of section 3 of the Act?',
                        null=True,
                    ),
                ),
                (
                    'meets_electricity_import_operation_criteria',
                    models.BooleanField(
                        blank=True, db_comment='Is this operation an electricity import operation?', null=True
                    ),
                ),
                (
                    'meets_entire_operation_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment='Designation as an opt-in can only be granted to an entire operation (i.e. not a part or certain segment of an operation). Do you confirm that the operation applying for this designation is an entire operation?',
                        null=True,
                    ),
                ),
                (
                    'meets_section_6_emissions_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment='Does this operation have emissions that are attributable for the purposes of section 6 of the Act?',
                        null=True,
                    ),
                ),
                (
                    'meets_naics_code_11_22_562_classification_requirements',
                    models.BooleanField(
                        blank=True,
                        db_comment="Is this operation's primary economic activity classified by the following NAICS Code - 11, 22, or 562?",
                        null=True,
                    ),
                ),
                (
                    'meets_producing_gger_schedule_a1_regulated_product',
                    models.BooleanField(
                        blank=True,
                        db_comment='Does this operation produce a regulated product listed in Table 1 of Schedule A.1 of the GGERR?',
                        null=True,
                    ),
                ),
                (
                    'meets_reporting_and_regulated_obligations',
                    models.BooleanField(
                        blank=True,
                        db_comment='Is this operation capable of fulfilling the obligations of a reporting operation and a regulated operation under the Act and the regulations?',
                        null=True,
                    ),
                ),
                (
                    'meets_notification_to_director_on_criteria_change',
                    models.BooleanField(
                        blank=True,
                        db_comment='Will the operator notify the Director as soon as possible if this operation ceases to meet any of the criteria for the designation of the operation as a reporting operation and a regulated operation?',
                        null=True,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."opted_in_operation_detail',
                'db_table_comment': 'Table containing details about operations that have opted in',
            },
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='opted_in_operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='Details about the operation if it is opted in',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.optedinoperationdetail',
            ),
        ),
        migrations.AddField(
            model_name='operation',
            name='opted_in_operation',
            field=models.OneToOneField(
                blank=True,
                db_comment='Details about the operation if it is opted in',
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name='operation',
                to='registration.optedinoperationdetail',
            ),
        ),
        migrations.AddField(
            model_name='operation',
            name='contacts',
            field=models.ManyToManyField(blank=True, related_name='operations_contacts', to='registration.contact'),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='point_of_contact',
            field=models.ForeignKey(
                blank=True,
                db_comment='Foreign key to the contact that is the point of contact (point of contact is only used in registration 1)',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.contact',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='point_of_contact',
            field=models.ForeignKey(
                blank=True,
                db_comment='Foreign key to the contact that is the point of contact (point of contact is only used in registration 1)',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operations',
                to='registration.contact',
            ),
        ),
        migrations.RemoveField(
            model_name='historicalevent',
            name='archived_by',
        ),
        migrations.RemoveField(
            model_name='historicalevent',
            name='created_by',
        ),
        migrations.RemoveField(
            model_name='historicalevent',
            name='facility',
        ),
        migrations.RemoveField(
            model_name='historicalevent',
            name='operation',
        ),
        migrations.RemoveField(
            model_name='historicalevent',
            name='updated_by',
        ),
        migrations.CreateModel(
            name='ClosureEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the event',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'description',
                    models.TextField(blank=True, db_comment='Rationale for closure or other details.', null=True),
                ),
                ('status', models.CharField(choices=[('Closed', 'Closed')], default='Closed', max_length=100)),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                ('facilities', models.ManyToManyField(blank=True, to='registration.facility')),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='registration.operation'
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."closure_event',
                'db_table_comment': 'Closure events for operations and/or facilities.',
                'default_related_name': 'closure_events',
            },
        ),
        migrations.CreateModel(
            name='HistoricalClosureEvent',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(db_comment='Primary key to identify the event', db_index=True, default=uuid.uuid4),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'description',
                    models.TextField(blank=True, db_comment='Rationale for closure or other details.', null=True),
                ),
                ('status', models.CharField(choices=[('Closed', 'Closed')], default='Closed', max_length=100)),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical closure event',
                'verbose_name_plural': 'historical closure events',
                'db_table': 'erc_history"."closure_event_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalRestartEvent',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(db_comment='Primary key to identify the event', db_index=True, default=uuid.uuid4),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                ('status', models.CharField(choices=[('Restarted', 'Restarted')], default='Restarted', max_length=100)),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical restart event',
                'verbose_name_plural': 'historical restart events',
                'db_table': 'erc_history"."restart_event_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalTemporaryShutdownEvent',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(db_comment='Primary key to identify the event', db_index=True, default=uuid.uuid4),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'description',
                    models.TextField(
                        blank=True, db_comment='Rationale for temporary shutdown or other details.', null=True
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[('Temporarily Shutdown', 'Temporarily Shutdown')],
                        default='Temporarily Shutdown',
                        max_length=100,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical temporary shutdown event',
                'verbose_name_plural': 'historical temporary shutdown events',
                'db_table': 'erc_history"."temporary_shutdown_event_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalTransferEvent',
            fields=[
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(db_comment='Primary key to identify the event', db_index=True, default=uuid.uuid4),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'description',
                    models.TextField(db_comment='Description of the transfer or change in designated operator.'),
                ),
                (
                    'future_designated_operator',
                    models.CharField(
                        choices=[
                            ('My Operator', 'My Operator'),
                            ('Other Operator', 'Other Operator'),
                            ('Not Sure', 'Not Sure'),
                        ],
                        db_comment='The designated operator of the entit(y)/(ies) associated with the transfer, who will be responsible for matters related to GGERR.',
                        max_length=1000,
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[('Complete', 'Complete'), ('Pending', 'Pending'), ('Transferred', 'Transferred')],
                        default='Pending',
                        max_length=100,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'other_operator',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The second operator who is involved in the transfer but is not reporting the event.',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
                (
                    'other_operator_contact',
                    models.ForeignKey(
                        blank=True,
                        db_comment='Contact information for the other operator.',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.contact',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical transfer event',
                'verbose_name_plural': 'historical transfer events',
                'db_table': 'erc_history"."transfer_event_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='RestartEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the event',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                ('status', models.CharField(choices=[('Restarted', 'Restarted')], default='Restarted', max_length=100)),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                ('facilities', models.ManyToManyField(blank=True, to='registration.facility')),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='registration.operation'
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."restart_event',
                'db_table_comment': 'Restart events for operations and/or facilities after they have been closed or temporarily shutdown.',
                'default_related_name': 'restart_events',
            },
        ),
        migrations.CreateModel(
            name='TemporaryShutdownEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the event',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'description',
                    models.TextField(
                        blank=True, db_comment='Rationale for temporary shutdown or other details.', null=True
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[('Temporarily Shutdown', 'Temporarily Shutdown')],
                        default='Temporarily Shutdown',
                        max_length=100,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                ('facilities', models.ManyToManyField(blank=True, to='registration.facility')),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='registration.operation'
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."temporary_shutdown_event',
                'db_table_comment': 'Temporary shutdown events for operations and/or facilities.',
                'default_related_name': 'temporary_shutdown_events',
            },
        ),
        migrations.CreateModel(
            name='TransferEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'id',
                    models.UUIDField(
                        db_comment='Primary key to identify the event',
                        default=uuid.uuid4,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                ('effective_date', models.DateTimeField(db_comment='The effective date of the event')),
                (
                    'description',
                    models.TextField(db_comment='Description of the transfer or change in designated operator.'),
                ),
                (
                    'future_designated_operator',
                    models.CharField(
                        choices=[
                            ('My Operator', 'My Operator'),
                            ('Other Operator', 'Other Operator'),
                            ('Not Sure', 'Not Sure'),
                        ],
                        db_comment='The designated operator of the entit(y)/(ies) associated with the transfer, who will be responsible for matters related to GGERR.',
                        max_length=1000,
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[('Complete', 'Complete'), ('Pending', 'Pending'), ('Transferred', 'Transferred')],
                        default='Pending',
                        max_length=100,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                ('facilities', models.ManyToManyField(blank=True, to='registration.facility')),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='registration.operation'
                    ),
                ),
                (
                    'other_operator',
                    models.ForeignKey(
                        db_comment='The second operator who is involved in the transfer but is not reporting the event.',
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='transfer_events',
                        to='registration.operator',
                    ),
                ),
                (
                    'other_operator_contact',
                    models.ForeignKey(
                        db_comment='Contact information for the other operator.',
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='transfer_events',
                        to='registration.contact',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."transfer_event',
                'db_table_comment': 'Transfer events for operations and/or facilities.',
                'default_related_name': 'transfer_events',
            },
        ),
        migrations.DeleteModel(
            name='Event',
        ),
        migrations.DeleteModel(
            name='HistoricalEvent',
        ),
        migrations.RemoveField(
            model_name='historicalfacilityownershiptimeline',
            name='archived_by',
        ),
        migrations.RemoveField(
            model_name='historicalfacilityownershiptimeline',
            name='created_by',
        ),
        migrations.RemoveField(
            model_name='historicalfacilityownershiptimeline',
            name='facility',
        ),
        migrations.RemoveField(
            model_name='historicalfacilityownershiptimeline',
            name='operation',
        ),
        migrations.RemoveField(
            model_name='historicalfacilityownershiptimeline',
            name='updated_by',
        ),
        migrations.RemoveField(
            model_name='historicaloperationownershiptimeline',
            name='archived_by',
        ),
        migrations.RemoveField(
            model_name='historicaloperationownershiptimeline',
            name='created_by',
        ),
        migrations.RemoveField(
            model_name='historicaloperationownershiptimeline',
            name='operation',
        ),
        migrations.RemoveField(
            model_name='historicaloperationownershiptimeline',
            name='operator',
        ),
        migrations.RemoveField(
            model_name='historicaloperationownershiptimeline',
            name='updated_by',
        ),
        migrations.RemoveField(
            model_name='operationownershiptimeline',
            name='archived_by',
        ),
        migrations.RemoveField(
            model_name='operationownershiptimeline',
            name='created_by',
        ),
        migrations.RemoveField(
            model_name='operationownershiptimeline',
            name='operation',
        ),
        migrations.RemoveField(
            model_name='operationownershiptimeline',
            name='operator',
        ),
        migrations.RemoveField(
            model_name='operationownershiptimeline',
            name='updated_by',
        ),
        migrations.CreateModel(
            name='FacilityDesignatedOperationTimeline',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date an operation became the designated operation of a facility. This data captures the relationship between the facility and operation it falls under.',
                        null=True,
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date an operation stopped being the designated operation of a facility',
                        null=True,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='designated_operations',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='facility_designated_operations',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."facility_designated_operation_timeline',
                'db_table_comment': 'A table to connect facilities and operations',
            },
        ),
        migrations.CreateModel(
            name='HistoricalFacilityDesignatedOperationTimeline',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date an operation became the designated operation of a facility. This data captures the relationship between the facility and operation it falls under.',
                        null=True,
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date an operation stopped being the designated operation of a facility',
                        null=True,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical facility designated operation timeline',
                'verbose_name_plural': 'historical facility designated operation timelines',
                'db_table': 'erc_history"."facility_designated_operation_timeline_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalOperationDesignatedOperatorTimeline',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment="The date the operator started being the designated operator of the operation. The 'designated'/controlling operator isn't necessarily the operation's owner.",
                        null=True,
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date the operator ended being the designated operator of the operation',
                        null=True,
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operator',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical operation designated operator timeline',
                'verbose_name_plural': 'historical operation designated operator timelines',
                'db_table': 'erc_history"."operation_designated_operator_timeline_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='OperationDesignatedOperatorTimeline',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'start_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment="The date the operator started being the designated operator of the operation. The 'designated'/controlling operator isn't necessarily the operation's owner.",
                        null=True,
                    ),
                ),
                (
                    'end_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date the operator ended being the designated operator of the operation',
                        null=True,
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='designated_operators',
                        to='registration.operation',
                    ),
                ),
                (
                    'operator',
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='operation_designated_operators',
                        to='registration.operator',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."operation_designated_operator_timeline',
                'db_table_comment': 'A table to connect operations and their designated operators throughout their lifetimes',
            },
        ),
        migrations.DeleteModel(
            name='FacilityOwnershipTimeline',
        ),
        migrations.DeleteModel(
            name='HistoricalFacilityOwnershipTimeline',
        ),
        migrations.DeleteModel(
            name='HistoricalOperationOwnershipTimeline',
        ),
        migrations.DeleteModel(
            name='OperationOwnershipTimeline',
        ),
        migrations.AddConstraint(
            model_name='facilitydesignatedoperationtimeline',
            constraint=models.UniqueConstraint(
                condition=models.Q(('end_date__isnull', True)),
                fields=('facility',),
                name='unique_active_designated_operation_per_facility',
            ),
        ),
        migrations.AddConstraint(
            model_name='operationdesignatedoperatortimeline',
            constraint=models.UniqueConstraint(
                condition=models.Q(('end_date__isnull', True)),
                fields=('operation',),
                name='unique_active_designated_operator_per_operation',
            ),
        ),
        migrations.AlterField(
            model_name='facility',
            name='address',
            field=models.ForeignKey(
                blank=True,
                db_comment='The address of the facility',
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_address',
                to='registration.address',
            ),
        ),
        migrations.AlterField(
            model_name='facilitydesignatedoperationtimeline',
            name='facility',
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name='designated_operations',
                to='registration.facility',
            ),
        ),
        migrations.AlterField(
            model_name='facilitydesignatedoperationtimeline',
            name='operation',
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name='facility_designated_operations',
                to='registration.operation',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='bc_obps_regulated_operation',
            field=models.OneToOneField(
                blank=True,
                db_comment='The BC OBPS regulated operation ID of an operation when operation is approved',
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                to='registration.bcobpsregulatedoperation',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='naics_code',
            field=models.ForeignKey(
                db_comment="This column refers to an operation's primary NAICS code.",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='operations',
                to='registration.naicscode',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='operator',
            field=models.ForeignKey(
                db_comment='The operator who owns the operation',
                on_delete=django.db.models.deletion.PROTECT,
                related_name='operations',
                to='registration.operator',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='point_of_contact',
            field=models.ForeignKey(
                blank=True,
                db_comment='Foreign key to the contact that is the point of contact (point of contact is only used in registration 1)',
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='operations',
                to='registration.contact',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='verified_by',
            field=models.ForeignKey(
                blank=True,
                db_comment='The IRC user who verified the operator',
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='operation_verified_by',
                to='registration.user',
            ),
        ),
        migrations.AlterField(
            model_name='operationdesignatedoperatortimeline',
            name='operation',
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name='designated_operators',
                to='registration.operation',
            ),
        ),
        migrations.AlterField(
            model_name='operationdesignatedoperatortimeline',
            name='operator',
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name='operation_designated_operators',
                to='registration.operator',
            ),
        ),
        migrations.RemoveField(
            model_name='historicalmultipleoperator',
            name='mailing_address',
        ),
        migrations.RemoveField(
            model_name='historicalmultipleoperator',
            name='mailing_address_same_as_physical',
        ),
        migrations.RemoveField(
            model_name='historicalmultipleoperator',
            name='operator_index',
        ),
        migrations.RemoveField(
            model_name='historicalmultipleoperator',
            name='percentage_ownership',
        ),
        migrations.RemoveField(
            model_name='historicalmultipleoperator',
            name='physical_address',
        ),
        migrations.RemoveField(
            model_name='historicalmultipleoperator',
            name='website',
        ),
        migrations.RemoveField(
            model_name='multipleoperator',
            name='mailing_address',
        ),
        migrations.RemoveField(
            model_name='multipleoperator',
            name='mailing_address_same_as_physical',
        ),
        migrations.RemoveField(
            model_name='multipleoperator',
            name='operator_index',
        ),
        migrations.RemoveField(
            model_name='multipleoperator',
            name='percentage_ownership',
        ),
        migrations.RemoveField(
            model_name='multipleoperator',
            name='physical_address',
        ),
        migrations.RemoveField(
            model_name='multipleoperator',
            name='website',
        ),
        migrations.AddField(
            model_name='bcobpsregulatedoperation',
            name='status',
            field=models.CharField(
                choices=[('Active', 'Active'), ('Inactive', 'Inactive')],
                db_comment='The status of an operation.',
                default='Active',
                max_length=1000,
            ),
        ),
        migrations.AddField(
            model_name='historicalbcobpsregulatedoperation',
            name='status',
            field=models.CharField(
                choices=[('Active', 'Active'), ('Inactive', 'Inactive')],
                db_comment='The status of an operation.',
                default='Active',
                max_length=1000,
            ),
        ),
        migrations.AddField(
            model_name='historicalmultipleoperator',
            name='attorney_address',
            field=models.ForeignKey(
                blank=True,
                db_comment="The address of the operator's attorney",
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.address',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='secondary_naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="This column refers to an operation's secondary NAICS code.",
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.naicscode',
            ),
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='tertiary_naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="This column refers to an operation's tertiary NAICS code.",
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.naicscode',
            ),
        ),
        migrations.AddField(
            model_name='multipleoperator',
            name='attorney_address',
            field=models.ForeignKey(
                blank=True,
                db_comment="The address of the operator's attorney",
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='multiple_operators',
                to='registration.address',
            ),
        ),
        migrations.AddField(
            model_name='operation',
            name='secondary_naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="This column refers to an operation's secondary NAICS code.",
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operations_naics_secondary',
                to='registration.naicscode',
            ),
        ),
        migrations.AddField(
            model_name='operation',
            name='tertiary_naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="This column refers to an operation's tertiary NAICS code.",
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='operations_naics_tertiary',
                to='registration.naicscode',
            ),
        ),
        migrations.AlterField(
            model_name='historicalmultipleoperator',
            name='bc_corporate_registry_number',
            field=models.CharField(
                blank=True,
                db_comment='The BC corporate registry number of an operator',
                null=True,
                validators=[
                    django.core.validators.RegexValidator(
                        message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                        regex='^[A-Za-z]{1,3}[0-9]{7}$',
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="This column refers to an operation's primary NAICS code.",
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.naicscode',
            ),
        ),
        migrations.AlterField(
            model_name='multipleoperator',
            name='bc_corporate_registry_number',
            field=models.CharField(
                blank=True,
                db_comment='The BC corporate registry number of an operator',
                null=True,
                validators=[
                    django.core.validators.RegexValidator(
                        message='BC Corporate Registry Number should be 1-3 letters followed by 7 digits.',
                        regex='^[A-Za-z]{1,3}[0-9]{7}$',
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='multipleoperator',
            name='business_structure',
            field=models.ForeignKey(
                db_comment='The business structure of an operator',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='multiple_operators',
                to='registration.businessstructure',
            ),
        ),
        migrations.AlterField(
            model_name='multipleoperator',
            name='operation',
            field=models.ForeignKey(
                db_comment='The operation that this multiple operator is associated with',
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='multiple_operators',
                to='registration.operation',
            ),
        ),
        migrations.RunPython(
            code=init_document_type_data,
            reverse_code=reverse_init_document_type_data,
        ),
        migrations.RunPython(
            code=update_activity_weights,
        ),
        migrations.AddField(
            model_name='facilitydesignatedoperationtimeline',
            name='status',
            field=models.CharField(
                choices=[
                    ('Active', 'Active'),
                    ('Transferred', 'Transferred'),
                    ('Closed', 'Closed'),
                    ('Temporarily Shutdown', 'Temporarily Shutdown'),
                ],
                db_comment="The status of the facility in relation to the designated operation. For example, when a facility is transferred from Operation A to Operation B, under Operation A the status will be 'Transferred' but under Operation B the status will be 'Active'.",
                default='Active',
                max_length=1000,
            ),
        ),
        migrations.AddField(
            model_name='historicalfacilitydesignatedoperationtimeline',
            name='status',
            field=models.CharField(
                choices=[
                    ('Active', 'Active'),
                    ('Transferred', 'Transferred'),
                    ('Closed', 'Closed'),
                    ('Temporarily Shutdown', 'Temporarily Shutdown'),
                ],
                db_comment="The status of the facility in relation to the designated operation. For example, when a facility is transferred from Operation A to Operation B, under Operation A the status will be 'Transferred' but under Operation B the status will be 'Active'.",
                default='Active',
                max_length=1000,
            ),
        ),
        migrations.RunPython(
            code=remove_old_activity_records,
            reverse_code=reverse_remove_old_activity_records,
        ),
        migrations.AddField(
            model_name='bcobpsregulatedoperation',
            name='issued_by',
            field=models.ForeignKey(
                blank=True,
                db_comment='The IRC user who issued the BC OBPS Regulated Operation ID',
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='bc_obps_regulated_operation_issued_by',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicalbcobpsregulatedoperation',
            name='issued_by',
            field=models.ForeignKey(
                blank=True,
                db_comment='The IRC user who issued the BC OBPS Regulated Operation ID',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.RunPython(
            code=add_document_type_data,
            reverse_code=reverse_add_document_type_data,
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='date_of_first_shipment',
            field=models.CharField(
                blank=True,
                choices=[
                    ('On or before March 31, 2024', 'On Or Before March 31 2024'),
                    ('On or after April 1, 2024', 'On Or After April 1 2024'),
                ],
                db_comment="The date of the operation's first shipment (determines which application and statutory declaration template should be used)",
                max_length=1000,
                null=True,
            ),
        ),
        migrations.AddField(
            model_name='operation',
            name='date_of_first_shipment',
            field=models.CharField(
                blank=True,
                choices=[
                    ('On or before March 31, 2024', 'On Or Before March 31 2024'),
                    ('On or after April 1, 2024', 'On Or After April 1 2024'),
                ],
                db_comment="The date of the operation's first shipment (determines which application and statutory declaration template should be used)",
                max_length=1000,
                null=True,
            ),
        ),
        migrations.CreateModel(
            name='BcGreenhouseGasId',
            fields=[
                (
                    'id',
                    models.CharField(
                        db_comment='The BCGHG ID of an operation or facility',
                        max_length=255,
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    'issued_at',
                    models.DateTimeField(
                        auto_now_add=True, db_comment='The time the BCGHG ID was issued by an IRC user'
                    ),
                ),
                (
                    'comments',
                    models.TextField(
                        blank=True, db_comment='Comments from admins in the case that a BCGHG ID is revoked'
                    ),
                ),
                (
                    'issued_by',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The IRC user who issued the BCGHG ID',
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='bc_greenhouse_gas_id_issued_by',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'db_table': 'erc"."bc_greenhouse_gas_id',
                'db_table_comment': 'Table to store BCGHG ID metadata. Once an operation or facility meets the criteria for an ID, then it is issued one.',
            },
        ),
        migrations.CreateModel(
            name='HistoricalBcGreenhouseGasId',
            fields=[
                (
                    'id',
                    models.CharField(
                        db_comment='The BCGHG ID of an operation or facility', db_index=True, max_length=255
                    ),
                ),
                (
                    'issued_at',
                    models.DateTimeField(
                        blank=True, db_comment='The time the BCGHG ID was issued by an IRC user', editable=False
                    ),
                ),
                (
                    'comments',
                    models.TextField(
                        blank=True, db_comment='Comments from admins in the case that a BCGHG ID is revoked'
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'issued_by',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The IRC user who issued the BCGHG ID',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical bc greenhouse gas id',
                'verbose_name_plural': 'historical bc greenhouse gas ids',
                'db_table': 'erc_history"."bc_greenhouse_gas_id_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.RunPython(
            code=migrate_to_bc_greenhouse_gas_id_model,
        ),
        migrations.AlterField(
            model_name='facility',
            name='bcghg_id',
            field=models.OneToOneField(
                blank=True,
                db_comment="A facility's BCGHG identifier.",
                max_length=1000,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                to='registration.bcgreenhousegasid',
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='bcghg_id',
            field=models.ForeignKey(
                blank=True,
                db_comment="A facility's BCGHG identifier.",
                db_constraint=False,
                max_length=1000,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.bcgreenhousegasid',
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='bcghg_id',
            field=models.ForeignKey(
                blank=True,
                db_comment="An operation's BCGHG identifier.",
                db_constraint=False,
                max_length=1000,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.bcgreenhousegasid',
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='bcghg_id',
            field=models.OneToOneField(
                blank=True,
                db_comment="An operation's BCGHG identifier.",
                max_length=1000,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                to='registration.bcgreenhousegasid',
            ),
        ),
        migrations.RemoveField(
            model_name='historicaltransferevent',
            name='future_designated_operator',
        ),
        migrations.RemoveField(
            model_name='transferevent',
            name='future_designated_operator',
        ),
        migrations.AlterField(
            model_name='historicaltransferevent',
            name='status',
            field=models.CharField(
                choices=[
                    ('Complete', 'Complete'),
                    ('To be transferred', 'To Be Transferred'),
                    ('Transferred', 'Transferred'),
                ],
                default='To be transferred',
                max_length=100,
            ),
        ),
        migrations.AlterField(
            model_name='transferevent',
            name='status',
            field=models.CharField(
                choices=[
                    ('Complete', 'Complete'),
                    ('To be transferred', 'To Be Transferred'),
                    ('Transferred', 'Transferred'),
                ],
                default='To be transferred',
                max_length=100,
            ),
        ),
        migrations.RemoveField(
            model_name='registrationpurpose',
            name='archived_by',
        ),
        migrations.RemoveField(
            model_name='registrationpurpose',
            name='created_by',
        ),
        migrations.RemoveField(
            model_name='registrationpurpose',
            name='operation',
        ),
        migrations.RemoveField(
            model_name='registrationpurpose',
            name='updated_by',
        ),
        migrations.AddField(
            model_name='historicaloperation',
            name='registration_purpose',
            field=models.CharField(
                blank=True,
                choices=[
                    ('Reporting Operation', 'Reporting Operation'),
                    ('OBPS Regulated Operation', 'Obps Regulated Operation'),
                    ('Opted-in Operation', 'Opted In Operation'),
                    ('New Entrant Operation', 'New Entrant Operation'),
                    ('Electricity Import Operation', 'Electricity Import Operation'),
                    ('Potential Reporting Operation', 'Potential Reporting Operation'),
                ],
                db_comment='The industry user-selected registration purpose (category). This field is only relevant to Registration 2 module (where it is required for an operation to be registered).',
                max_length=1000,
                null=True,
            ),
        ),
        migrations.AddField(
            model_name='operation',
            name='registration_purpose',
            field=models.CharField(
                blank=True,
                choices=[
                    ('Reporting Operation', 'Reporting Operation'),
                    ('OBPS Regulated Operation', 'Obps Regulated Operation'),
                    ('Opted-in Operation', 'Opted In Operation'),
                    ('New Entrant Operation', 'New Entrant Operation'),
                    ('Electricity Import Operation', 'Electricity Import Operation'),
                    ('Potential Reporting Operation', 'Potential Reporting Operation'),
                ],
                db_comment='The industry user-selected registration purpose (category). This field is only relevant to Registration 2 module (where it is required for an operation to be registered).',
                max_length=1000,
                null=True,
            ),
        ),
        migrations.DeleteModel(
            name='HistoricalRegistrationPurpose',
        ),
        migrations.DeleteModel(
            name='RegistrationPurpose',
        ),
        migrations.AlterModelTableComment(
            name='regulatedproduct',
            table_comment='Table containing regulated and unregulated products. Regulated product means a product listed in column 2 of Table 2 of Schedule A.1 of the Greenhouse Gas Industrial Reporting and Control Act: https://www.bclaws.gov.bc.ca/civix/document/id/lc/statreg/249_2015. Unregulated products have been added to the dataset to assist in grouping some unregulated emissions for further analysis.',
        ),
        migrations.AddField(
            model_name='historicalregulatedproduct',
            name='is_regulated',
            field=models.BooleanField(db_comment='Indicates if a product is regulated', default=True),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='historicalregulatedproduct',
            name='unit',
            field=models.CharField(
                blank=True, db_comment='The unit of measure for a regulated product', max_length=1000, null=True
            ),
        ),
        migrations.AddField(
            model_name='regulatedproduct',
            name='is_regulated',
            field=models.BooleanField(db_comment='Indicates if a product is regulated', default=True),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='regulatedproduct',
            name='unit',
            field=models.CharField(
                blank=True, db_comment='The unit of measure for a regulated product', max_length=1000, null=True
            ),
        ),
        migrations.RunPython(
            code=update_regulated_product_units_and_is_regulated,
        ),
        migrations.RunPython(
            code=add_unregulated_products,
            reverse_code=reverse_add_unregulated_products,
        ),
        migrations.RunPython(
            code=irc_app_role_data,
            reverse_code=reverse_irc_app_role_data,
        ),
        migrations.RunPython(
            code=remove_naics_code,
            reverse_code=revert_remove_naics_code,
        ),
        migrations.RemoveField(
            model_name='historicaltransferevent',
            name='description',
        ),
        migrations.RemoveField(
            model_name='historicaltransferevent',
            name='other_operator',
        ),
        migrations.RemoveField(
            model_name='historicaltransferevent',
            name='other_operator_contact',
        ),
        migrations.RemoveField(
            model_name='transferevent',
            name='description',
        ),
        migrations.RemoveField(
            model_name='transferevent',
            name='other_operator',
        ),
        migrations.RemoveField(
            model_name='transferevent',
            name='other_operator_contact',
        ),
        migrations.AddField(
            model_name='historicaloperationdesignatedoperatortimeline',
            name='status',
            field=models.CharField(
                choices=[
                    ('Active', 'Active'),
                    ('Transferred', 'Transferred'),
                    ('Closed', 'Closed'),
                    ('Temporarily Shutdown', 'Temporarily Shutdown'),
                ],
                db_comment='The status of an operation in relation to a specific operator (e.g. if an operation has transferred ownership, it may have a status of Transferred with its old operator and Active with its new one)',
                default='Active',
                max_length=1000,
            ),
        ),
        migrations.AddField(
            model_name='historicaltransferevent',
            name='from_operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operation that facilities are being transferred from.',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operation',
            ),
        ),
        migrations.AddField(
            model_name='historicaltransferevent',
            name='from_operator',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operator who is transferring the operation or facility.',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operator',
            ),
        ),
        migrations.AddField(
            model_name='historicaltransferevent',
            name='to_operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operation that facilities are being transferred to.',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operation',
            ),
        ),
        migrations.AddField(
            model_name='historicaltransferevent',
            name='to_operator',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operator who is receiving the operation or facility.',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operator',
            ),
        ),
        migrations.AddField(
            model_name='operationdesignatedoperatortimeline',
            name='status',
            field=models.CharField(
                choices=[
                    ('Active', 'Active'),
                    ('Transferred', 'Transferred'),
                    ('Closed', 'Closed'),
                    ('Temporarily Shutdown', 'Temporarily Shutdown'),
                ],
                db_comment='The status of an operation in relation to a specific operator (e.g. if an operation has transferred ownership, it may have a status of Transferred with its old operator and Active with its new one)',
                default='Active',
                max_length=1000,
            ),
        ),
        migrations.AddField(
            model_name='transferevent',
            name='from_operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operation that facilities are being transferred from.',
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='transfer_events_from',
                to='registration.operation',
            ),
        ),
        migrations.AddField(
            model_name='transferevent',
            name='from_operator',
            field=models.ForeignKey(
                db_comment='The operator who is transferring the operation or facility.',
                default=None,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='transfer_events_from',
                to='registration.operator',
            ),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='transferevent',
            name='to_operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operation that facilities are being transferred to.',
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='transfer_events_to',
                to='registration.operation',
            ),
        ),
        migrations.AddField(
            model_name='transferevent',
            name='to_operator',
            field=models.ForeignKey(
                db_comment='The operator who is receiving the operation or facility.',
                default=None,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='transfer_events_to',
                to='registration.operator',
            ),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='status',
            field=models.CharField(
                choices=[
                    ('Not Started', 'Not Started'),
                    ('Draft', 'Draft'),
                    ('Registered', 'Registered'),
                    ('Approved', 'Approved'),
                    ('Declined', 'Declined'),
                    ('Changes Requested', 'Changes Requested'),
                    ('Pending', 'Pending'),
                ],
                db_comment='The status of an operation in the app (e.g. pending review)',
                default='Not Started',
                max_length=1000,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='status',
            field=models.CharField(
                choices=[
                    ('Not Started', 'Not Started'),
                    ('Draft', 'Draft'),
                    ('Registered', 'Registered'),
                    ('Approved', 'Approved'),
                    ('Declined', 'Declined'),
                    ('Changes Requested', 'Changes Requested'),
                    ('Pending', 'Pending'),
                ],
                db_comment='The status of an operation in the app (e.g. pending review)',
                default='Not Started',
                max_length=1000,
            ),
        ),
        migrations.AlterField(
            model_name='facility',
            name='latitude_of_largest_emissions',
            field=models.DecimalField(
                blank=True,
                db_comment='The latitude of the largest point of emissions',
                decimal_places=6,
                max_digits=8,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-90),
                    django.core.validators.MaxValueValidator(90),
                ],
            ),
        ),
        migrations.AlterField(
            model_name='facility',
            name='longitude_of_largest_emissions',
            field=models.DecimalField(
                blank=True,
                db_comment='The longitude of the largest point of emissions',
                decimal_places=6,
                max_digits=9,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-180),
                    django.core.validators.MaxValueValidator(180),
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='latitude_of_largest_emissions',
            field=models.DecimalField(
                blank=True,
                db_comment='The latitude of the largest point of emissions',
                decimal_places=6,
                max_digits=8,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-90),
                    django.core.validators.MaxValueValidator(90),
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='longitude_of_largest_emissions',
            field=models.DecimalField(
                blank=True,
                db_comment='The longitude of the largest point of emissions',
                decimal_places=6,
                max_digits=9,
                null=True,
                validators=[
                    django.core.validators.MinValueValidator(-180),
                    django.core.validators.MaxValueValidator(180),
                ],
            ),
        ),
        migrations.RemoveField(
            model_name='historicaloperation_documents',
            name='document',
        ),
        migrations.RemoveField(
            model_name='historicaloperation_documents',
            name='history',
        ),
        migrations.RemoveField(
            model_name='historicaloperation_documents',
            name='operation',
        ),
        migrations.RemoveField(
            model_name='historicaloperator_contacts',
            name='contact',
        ),
        migrations.RemoveField(
            model_name='historicaloperator_contacts',
            name='history',
        ),
        migrations.RemoveField(
            model_name='historicaloperator_contacts',
            name='operator',
        ),
        migrations.RemoveField(
            model_name='historicaloperator_documents',
            name='document',
        ),
        migrations.RemoveField(
            model_name='historicaloperator_documents',
            name='history',
        ),
        migrations.RemoveField(
            model_name='historicaloperator_documents',
            name='operator',
        ),
        migrations.RemoveField(
            model_name='historicaluser_documents',
            name='document',
        ),
        migrations.RemoveField(
            model_name='historicaluser_documents',
            name='history',
        ),
        migrations.RemoveField(
            model_name='historicaluser_documents',
            name='user',
        ),
        migrations.RemoveField(
            model_name='contact',
            name='documents',
        ),
        migrations.RemoveField(
            model_name='operation',
            name='documents',
        ),
        migrations.RemoveField(
            model_name='operator',
            name='contacts',
        ),
        migrations.RemoveField(
            model_name='operator',
            name='documents',
        ),
        migrations.RemoveField(
            model_name='user',
            name='documents',
        ),
        migrations.AddField(
            model_name='contact',
            name='operator',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='contacts',
                to='registration.operator',
            ),
        ),
        migrations.AddField(
            model_name='document',
            name='operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operation that the document is about',
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='documents',
                to='registration.operation',
            ),
        ),
        migrations.AddField(
            model_name='historicalcontact',
            name='operator',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operator',
            ),
        ),
        migrations.AddField(
            model_name='historicaldocument',
            name='operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operation that the document is about',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operation',
            ),
        ),
        migrations.DeleteModel(
            name='HistoricalContact_documents',
        ),
        migrations.DeleteModel(
            name='HistoricalOperation_documents',
        ),
        migrations.DeleteModel(
            name='HistoricalOperator_contacts',
        ),
        migrations.DeleteModel(
            name='HistoricalOperator_documents',
        ),
        migrations.DeleteModel(
            name='HistoricalUser_documents',
        ),
        migrations.AlterField(
            model_name='historicaloptedinoperationdetail',
            name='meets_producing_gger_schedule_a1_regulated_product',
            field=models.BooleanField(
                blank=True,
                db_comment='Does this operation produce a regulated product listed in Table 2 of Schedule A.1 of the GGERR?',
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='optedinoperationdetail',
            name='meets_producing_gger_schedule_a1_regulated_product',
            field=models.BooleanField(
                blank=True,
                db_comment='Does this operation produce a regulated product listed in Table 2 of Schedule A.1 of the GGERR?',
                null=True,
            ),
        ),
        migrations.AlterField(
            model_name='closureevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='contact',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='document',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='facility',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='facilitydesignatedoperationtimeline',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalclosureevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalcontact',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaldocument',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalfacilitydesignatedoperationtimeline',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalmultipleoperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaloperationdesignatedoperatortimeline',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaloperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaloptedinoperationdetail',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalpartneroperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalrestartevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaltemporaryshutdownevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaltransferevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicaluseroperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='historicalwellauthorizationnumber',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='multipleoperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='operation',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='operationdesignatedoperatortimeline',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='operator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='optedinoperationdetail',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='partneroperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='restartevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='temporaryshutdownevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='transferevent',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='useroperator',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='wellauthorizationnumber',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='closureevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='116efeb7591648372336b3aa28a6e17f861ba2b5',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_084a4',
                    table='erc"."closure_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='closureevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='e46f38a299ddd97857beb5eecbef9c8207607d04',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_08af1',
                    table='erc"."closure_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='contact',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='fcf941dc7f1016b70fe400edc3b059ce844843b4',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_983b8',
                    table='erc"."contact',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='contact',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='bd7a0e472f05df531fe50df8ecc797a06d464822',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_5b391',
                    table='erc"."contact',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='document',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='1f656ebe5f79a2f266dcdd4e891f15d72b82282e',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_e8a56',
                    table='erc"."document',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='document',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='cfa9908ecf6f3fa7c832b427051d56c60b0c8065',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_93a76',
                    table='erc"."document',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facility',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='0059b0ec9485510524eafab995169b3c204f9402',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_f7e80',
                    table='erc"."facility',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facility',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='3d741503bec1a214b7e674a98774bbe8916aa5b0',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_71bcb',
                    table='erc"."facility',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facilitydesignatedoperationtimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='ec44cd1bed5dd44cdb98e847cd4cbc97dd40e1c0',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_62d10',
                    table='erc"."facility_designated_operation_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facilitydesignatedoperationtimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='4695fc860fa60b9827d4fd9ab81d2ec70e3243e4',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_6b036',
                    table='erc"."facility_designated_operation_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='multipleoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='226c835ece5dad98d4f1392d1d968d50d41343d4',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_5b786',
                    table='erc"."multiple_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='multipleoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='400b2c4757ddffaf98d2eedc0b92d779561a0dc4',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_3b460',
                    table='erc"."multiple_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='c68e0e45ad04f331ffa6b92f08d9af4ecf9c0a89',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_7768e',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='f83368c0faaf9373710d248684d482b9c69f3e0f',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_16db9',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operationdesignatedoperatortimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='ca9ccc49563037483e2213c6792949d271913a6f',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_6c164',
                    table='erc"."operation_designated_operator_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operationdesignatedoperatortimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='e64d677adaee0a27bcc5838ad2444c2f319bb4bb',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_0ef04',
                    table='erc"."operation_designated_operator_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='4debfb86b07453a0711e7b91acefeb7d8ea54d05',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_6c559',
                    table='erc"."operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='1d477883220572be8e03c061403535322057bb13',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_8b376',
                    table='erc"."operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='optedinoperationdetail',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='868d3db361dcf380025b4aef229f235a31fc5767',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_4f8f7',
                    table='erc"."opted_in_operation_detail',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='optedinoperationdetail',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='ba3621af597a2ae4236a3712d7c5483c497b11ba',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_2d317',
                    table='erc"."opted_in_operation_detail',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='parentoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='4003485d17b1542b2581b4e09672948cc77375da',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_41e31',
                    table='erc"."parent_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='parentoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='53ad444d30d035697140fc05f40f3c0b236a8e35',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_68e68',
                    table='erc"."parent_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='partneroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='f6813355ed5299c8c91e56c2b97c614335cbdbe4',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_c09dc',
                    table='erc"."partner_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='partneroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='843bb1763a79e389be6ecaf103ab73e611175954',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_7daea',
                    table='erc"."partner_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='restartevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='835dfb7416536fdb8a9b1db14939f445533ef3af',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_bba15',
                    table='erc"."restart_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='restartevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='882ca5907483a06d7d6bba70bdbf88eddb117a36',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_4e46e',
                    table='erc"."restart_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='temporaryshutdownevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='27b8ad50636c7890480e54c983726c56cd9abc87',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_bca14',
                    table='erc"."temporary_shutdown_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='temporaryshutdownevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='5bf746509e57c8d21b45b4796e5f05a8fc538953',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_89448',
                    table='erc"."temporary_shutdown_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='transferevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='8b2a5d6fdc3ede48c8fb7bca8e9e9423b64474fe',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_d2bb5',
                    table='erc"."transfer_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='transferevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='7dc7e1e2cf70a847ca276e9625a494b79debcbc4',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_0bd79',
                    table='erc"."transfer_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='useroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='8917ec80a3071b841acb95de74668ea980ae10de',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_6b40d',
                    table='erc"."user_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='useroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='434c58f621c8783179f93379b05e870e741ee28b',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_8abfa',
                    table='erc"."user_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='wellauthorizationnumber',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='5829c3a245924ef9d8f4cbe5abeca65d407a350e',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_d3cf2',
                    table='erc"."well_authorization_number',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='wellauthorizationnumber',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='127428dd57bc57bf799b61c0e6c8e859233a747b',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_46b7d',
                    table='erc"."well_authorization_number',
                    when='BEFORE',
                ),
            ),
        ),
        migrations.AddField(
            model_name='facility',
            name='operation',
            field=models.ForeignKey(
                db_comment='The operation who currently owns the facility (see the FacilityDesignatedOperationTimeline for past and upcoming ownership)',
                on_delete=django.db.models.deletion.PROTECT,
                related_name='facilities',
                to='registration.operation',
            ),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='historicalfacility',
            name='operation',
            field=models.ForeignKey(
                blank=True,
                db_comment='The operation who currently owns the facility (see the FacilityDesignatedOperationTimeline for past and upcoming ownership)',
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.operation',
            ),
        ),
        migrations.AlterField(
            model_name='facility',
            name='type',
            field=models.CharField(
                choices=[
                    ('Single Facility', 'Single Facility'),
                    ('Large Facility', 'Large Facility'),
                    ('Medium Facility', 'Medium Facility'),
                    ('Small Aggregate', 'Small Aggregate'),
                    ('Electricity Import', 'Electricity Import'),
                ],
                db_comment='The type of the facility',
                max_length=100,
            ),
        ),
        migrations.AlterField(
            model_name='historicalfacility',
            name='type',
            field=models.CharField(
                choices=[
                    ('Single Facility', 'Single Facility'),
                    ('Large Facility', 'Large Facility'),
                    ('Medium Facility', 'Medium Facility'),
                    ('Small Aggregate', 'Small Aggregate'),
                    ('Electricity Import', 'Electricity Import'),
                ],
                db_comment='The type of the facility',
                max_length=100,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='naics_code',
            field=models.ForeignKey(
                blank=True,
                db_comment="This column refers to an operation's primary NAICS code.",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='operations',
                to='registration.naicscode',
            ),
        ),
        migrations.AlterModelTableComment(
            name='facility',
            table_comment='Contains data on facilities that emit carbon emissions and must report them to Clean Growth. A Linear Facilities Operation is made up of several different facilities whereas a Single Facility Operation has only one facility. In the case of a single facility operation, much of the data in this table will overlap with the parent record in the operation table.',
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='type',
            field=models.CharField(
                choices=[
                    ('Linear Facilities Operation', 'Lfo'),
                    ('Single Facility Operation', 'Sfo'),
                    ('Electricity Import Operation', 'Eio'),
                ],
                db_comment='The type of an operation',
                max_length=1000,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='type',
            field=models.CharField(
                choices=[
                    ('Linear Facilities Operation', 'Lfo'),
                    ('Single Facility Operation', 'Sfo'),
                    ('Electricity Import Operation', 'Eio'),
                ],
                db_comment='The type of an operation',
                max_length=1000,
            ),
        ),
        migrations.RemoveField(
            model_name='facilitydesignatedoperationtimeline',
            name='status',
        ),
        migrations.RemoveField(
            model_name='historicalfacilitydesignatedoperationtimeline',
            name='status',
        ),
        migrations.RemoveField(
            model_name='historicaloperationdesignatedoperatortimeline',
            name='status',
        ),
        migrations.RemoveField(
            model_name='operationdesignatedoperatortimeline',
            name='status',
        ),
        migrations.CreateModel(
            name='HistoricalFacility_well_authorization_numbers',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'facility',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.facility',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicalfacility',
                    ),
                ),
                (
                    'wellauthorizationnumber',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.wellauthorizationnumber',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalFacility_well_authorization_numbers',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.RemoveField(
            model_name='historicaloperation',
            name='point_of_contact',
        ),
        migrations.RemoveField(
            model_name='operation',
            name='point_of_contact',
        ),
        migrations.CreateModel(
            name='HistoricalOperation_contacts',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('m2m_history_id', models.AutoField(primary_key=True, serialize=False)),
                (
                    'contact',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.contact',
                    ),
                ),
                (
                    'history',
                    models.ForeignKey(
                        db_constraint=False,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        to='registration.historicaloperation',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        db_tablespace='',
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
            ],
            options={
                'verbose_name': 'HistoricalOperation_contacts',
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AlterField(
            model_name='activity',
            name='applicable_to',
            field=models.CharField(
                choices=[('sfo', 'Sfo'), ('lfo', 'Lfo'), ('all', 'All')],
                db_comment='Which type of facility the activity applies to. An activity can be valid for only a Single Facility Operation, only a Linear Facilities Operation or it can apply to both',
                max_length=1000,
            ),
        ),
        migrations.AlterField(
            model_name='historicalactivity',
            name='applicable_to',
            field=models.CharField(
                choices=[('sfo', 'Sfo'), ('lfo', 'Lfo'), ('all', 'All')],
                db_comment='Which type of facility the activity applies to. An activity can be valid for only a Single Facility Operation, only a Linear Facilities Operation or it can apply to both',
                max_length=1000,
            ),
        ),
        migrations.AddConstraint(
            model_name='contact',
            constraint=models.UniqueConstraint(
                condition=models.Q(('operator__isnull', False)),
                fields=('email', 'operator'),
                name='unique_email_per_operator',
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperation',
            name='status',
            field=models.CharField(
                choices=[
                    ('Not Started', 'Not Started'),
                    ('Draft', 'Draft'),
                    ('Registered', 'Registered'),
                    ('Declined', 'Declined'),
                ],
                db_comment='The status of an operation in the app (e.g. pending review)',
                default='Not Started',
                max_length=1000,
            ),
        ),
        migrations.AlterField(
            model_name='operation',
            name='status',
            field=models.CharField(
                choices=[
                    ('Not Started', 'Not Started'),
                    ('Draft', 'Draft'),
                    ('Registered', 'Registered'),
                    ('Declined', 'Declined'),
                ],
                db_comment='The status of an operation in the app (e.g. pending review)',
                default='Not Started',
                max_length=1000,
            ),
        ),
        migrations.AddField(
            model_name='document',
            name='status',
            field=models.CharField(
                choices=[('Unscanned', 'Unscanned'), ('Clean', 'Clean'), ('Quarantined', 'Quarantined')],
                default='Unscanned',
                max_length=100,
            ),
        ),
        migrations.AddField(
            model_name='historicaldocument',
            name='status',
            field=models.CharField(
                choices=[('Unscanned', 'Unscanned'), ('Clean', 'Clean'), ('Quarantined', 'Quarantined')],
                default='Unscanned',
                max_length=100,
            ),
        ),
        migrations.RemoveField(
            model_name='historicaloperation',
            name='operation_has_multiple_operators',
        ),
        migrations.RemoveField(
            model_name='historicaloperation',
            name='opt_in',
        ),
        migrations.RemoveField(
            model_name='historicaloperation',
            name='verified_at',
        ),
        migrations.RemoveField(
            model_name='historicaloperation',
            name='verified_by',
        ),
        migrations.RemoveField(
            model_name='historicaloperator',
            name='is_new',
        ),
        migrations.RemoveField(
            model_name='historicaloperator',
            name='verified_at',
        ),
        migrations.RemoveField(
            model_name='historicaloperator',
            name='verified_by',
        ),
        migrations.RemoveField(
            model_name='operation',
            name='operation_has_multiple_operators',
        ),
        migrations.RemoveField(
            model_name='operation',
            name='opt_in',
        ),
        migrations.RemoveField(
            model_name='operation',
            name='verified_at',
        ),
        migrations.RemoveField(
            model_name='operation',
            name='verified_by',
        ),
        migrations.RemoveField(
            model_name='operator',
            name='is_new',
        ),
        migrations.RemoveField(
            model_name='operator',
            name='verified_at',
        ),
        migrations.RemoveField(
            model_name='operator',
            name='verified_by',
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='address',
            trigger=pgtrigger.compiler.Trigger(
                name='protect_fields_empty_update',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="\n                    if exists (\n                        select 1\n                        from erc.contact\n                        where address_id = new.id\n                          and business_role_id = 'Operation Representative'\n                    )\n                    and (new.street_address is null or new.street_address = ''\n                         or new.municipality is null or new.municipality = ''\n                         or new.province is null or new.province = ''\n                         or new.postal_code is null or new.postal_code = '')\n                    then\n                        raise exception 'Cannot set address fields to empty or NULL when associated with an Operation Representative';\n                    end if;\n                    return new;\n                ",
                    hash='6d2135635fa387a04db13d50ce6881053274ec32',
                    operation='UPDATE',
                    pgid='pgtrigger_protect_fields_empty_update_f0214',
                    table='erc"."address',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='contact',
            trigger=pgtrigger.compiler.Trigger(
                name='protect_address_null_update',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."address_id" IS NULL AND OLD."address_id" IS NOT NULL)',
                    func="\n                    if new.business_role_id = 'Operation Representative'\n                    then\n                        raise exception 'Cannot set address to NULL for a contact with role Operation Representative';\n                    end if;\n                    return new;\n                ",
                    hash='f9c9645df97379b138549d0e9c0e340ebceb0418',
                    operation='UPDATE',
                    pgid='pgtrigger_protect_address_null_update_b9eea',
                    table='erc"."contact',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facility',
            trigger=pgtrigger.compiler.Trigger(
                name='restrict_bcghg_id_unless_operation_registered',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."bcghg_id_id" IS NOT NULL)',
                    func="\n                    if (\n                        select status\n                        from erc.operation\n                        where erc.operation.id = new.operation_id\n                    ) != 'Registered'\n                    then\n                        raise exception 'Cannot assign bcghg_id to Facility unless the related Operation status is Registered';\n                    end if;\n                    return new;\n                ",
                    hash='a503b23c0a1030c5d2adc9284da68cb68744847e',
                    operation='INSERT OR UPDATE',
                    pgid='pgtrigger_restrict_bcghg_id_unless_operation_registered_51d82',
                    table='erc"."facility',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='restrict_bcghg_id_unless_registered',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."bcghg_id_id" IS NOT NULL)',
                    func="\n                    if new.status != 'Registered'\n                    then\n                        raise exception 'Cannot assign bcghg_id to Operation unless status is Registered';\n                    end if;\n                    return new;\n                ",
                    hash='ad0bfbe01b0ce185e68f9ad720d6515f9c3ebac2',
                    operation='INSERT OR UPDATE',
                    pgid='pgtrigger_restrict_bcghg_id_unless_registered_48253',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='restrict_boro_id_unless_registered',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."bc_obps_regulated_operation_id" IS NOT NULL)',
                    func="\n                    if new.status != 'Registered' then\n                        raise exception 'Cannot assign bc_obps_regulated_operation to Operation unless status is Registered';\n                    end if;\n                    return new;\n                ",
                    hash='48955b4a31187f841878ae809a65e2560d331b1f',
                    operation='INSERT OR UPDATE',
                    pgid='pgtrigger_restrict_boro_id_unless_registered_ba9a4',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        migrations.AddField(
            model_name='historicaluser',
            name='archived_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='historicaluser',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaluser',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='historicaluser',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='historicaluser',
            name='updated_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='historicaluser',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                db_constraint=False,
                null=True,
                on_delete=django.db.models.deletion.DO_NOTHING,
                related_name='+',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='user',
            name='archived_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='user',
            name='archived_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_archived',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='user',
            name='created_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='user',
            name='created_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_created',
                to='registration.user',
            ),
        ),
        migrations.AddField(
            model_name='user',
            name='updated_at',
            field=models.DateTimeField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='user',
            name='updated_by',
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name='%(class)s_updated',
                to='registration.user',
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='user',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select current_setting('my.guid', true)); new.created_at = now(); return new;",
                    hash='6e449dfbc592f0b57b27cf9035cd469dcf86e78c',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_cc12d',
                    table='erc"."user',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='user',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select current_setting('my.guid', true)); new.updated_at = now(); return new;",
                    hash='438138fc551f92e70ffbdec1181e39b3766951fc',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_66179',
                    table='erc"."user',
                    when='BEFORE',
                ),
            ),
        ),
        migrations.AlterField(
            model_name='historicalregulatedproduct',
            name='unit',
            field=models.CharField(
                db_comment='The unit of measure for a regulated product', default='N/A', max_length=1000
            ),
        ),
        migrations.AlterField(
            model_name='regulatedproduct',
            name='unit',
            field=models.CharField(
                db_comment='The unit of measure for a regulated product', default='N/A', max_length=1000
            ),
        ),
        migrations.AddConstraint(
            model_name='regulatedproduct',
            constraint=models.UniqueConstraint(fields=('name', 'unit'), name='unique_product_on_name_unit'),
        ),
        migrations.RunPython(
            code=add_unregulated_line_tracing_product,
            reverse_code=reverse_add_unregulated_line_tracing_product,
        ),
        migrations.RunPython(
            code=remove_unused_products,
            reverse_code=reverse_remove_unused_products,
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='facility',
            name='restrict_bcghg_id_unless_operation_registered',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operation',
            name='restrict_bcghg_id_unless_registered',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operation',
            name='restrict_boro_id_unless_registered',
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facility',
            trigger=pgtrigger.compiler.Trigger(
                name='restrict_bcghg_id_unless_operation_registered',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."bcghg_id_id" IS NOT NULL)',
                    func="\n                    if (\n                        select status\n                        from erc.operation\n                        where erc.operation.id = new.operation_id\n                    ) != 'Registered' and\n                    old.bcghg_id_id is null\n                    then\n                        raise exception 'Cannot assign bcghg_id to Facility unless the related Operation status is Registered';\n                    end if;\n                    return new;\n                ",
                    hash='9d70cccdf311948bdf8e8c36da2c3260624ebf42',
                    operation='INSERT OR UPDATE',
                    pgid='pgtrigger_restrict_bcghg_id_unless_operation_registered_51d82',
                    table='erc"."facility',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='restrict_bcghg_id_unless_registered',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."bcghg_id_id" IS NOT NULL)',
                    func="\n                    if new.status != 'Registered' and\n                       (tg_op = 'insert' or new.bcghg_id_id is distinct from old.bcghg_id_id) then\n                        raise exception 'Cannot assign bcghg_id to Operation unless status is Registered';\n                    end if;\n                    return new;\n                ",
                    hash='97b61f139765ceaa9d92224695c4618a11c5f8f8',
                    operation='INSERT OR UPDATE',
                    pgid='pgtrigger_restrict_bcghg_id_unless_registered_48253',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='restrict_boro_id_unless_registered',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    condition='WHEN (NEW."bc_obps_regulated_operation_id" IS NOT NULL)',
                    func="\n                    if new.status != 'Registered' and\n                        (tg_op = 'insert' or new.bc_obps_regulated_operation_id is distinct from old.bc_obps_regulateD_operation_id) then\n                            raise exception 'Cannot assign bc_obps_regulated_operation to Operation unless status is Registered';\n                    end if;\n                    return new;\n                ",
                    hash='553d06da330b77f856e65f4356e86c85c9e7f26c',
                    operation='INSERT OR UPDATE',
                    pgid='pgtrigger_restrict_boro_id_unless_registered_ba9a4',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='closureevent',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='contact',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='document',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='facility',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='facilitydesignatedoperationtimeline',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='multipleoperator',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operation',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operationdesignatedoperatortimeline',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operator',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='optedinoperationdetail',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='parentoperator',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='partneroperator',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='restartevent',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='temporaryshutdownevent',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='transferevent',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='user',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='useroperator',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='wellauthorizationnumber',
            name='set_created_audit_columns',
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='closureevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='f899f7da96cedc618ae9bcb93629ffbbb3034447',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_084a4',
                    table='erc"."closure_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='contact',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='06d5af9eb03af89a8daedda4013a99b40e1e77c4',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_983b8',
                    table='erc"."contact',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='document',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='f251e7d7d4246fde3ad6a13ec82f793482f739d0',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_e8a56',
                    table='erc"."document',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facility',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='d438deeb3e7d0dc50f98ffcd65795a16eab735f8',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_f7e80',
                    table='erc"."facility',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facilitydesignatedoperationtimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='80df79ea866438a27071e5778b673a0e1bf7dc8f',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_62d10',
                    table='erc"."facility_designated_operation_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='multipleoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='d69d9196a52bc0284ceb123c869eea037522cf59',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_5b786',
                    table='erc"."multiple_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='ce8ceb9c9f14e4e2c2ed425255d588634bb9534c',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_7768e',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operationdesignatedoperatortimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='5232c7445110c047aaac226463cd8e4c522b5197',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_6c164',
                    table='erc"."operation_designated_operator_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='14d589ba98f7f69748079783216836720f01b172',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_6c559',
                    table='erc"."operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='optedinoperationdetail',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='488bad33f3e7de8bb1bc73c9cafc3efc68b86dd6',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_4f8f7',
                    table='erc"."opted_in_operation_detail',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='parentoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='2c008b6ad7002ca4e012921a4be406d57e464578',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_41e31',
                    table='erc"."parent_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='partneroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='5904c5415c58666d071f56d4cc2be5aeaeb7bdc1',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_c09dc',
                    table='erc"."partner_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='restartevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='ae76fc99875d841115142f9b1d794b15111553b3',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_bba15',
                    table='erc"."restart_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='temporaryshutdownevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='b095591b3d7d9061c954bbaa6173f6a4bc19e2da',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_bca14',
                    table='erc"."temporary_shutdown_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='transferevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='a4ddc14283389b60b40c29dee63e73d34fcef6b9',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_d2bb5',
                    table='erc"."transfer_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='user',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='c2e58631c8aa6f29e200b00887fc44b075577a7f',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_cc12d',
                    table='erc"."user',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='useroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='997d6f2c9f404c7fd602d00a99b65048c2e43632',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_6b40d',
                    table='erc"."user_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='wellauthorizationnumber',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='e85a9f2314cdda0886967caebf986211d5b12a8b',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_d3cf2',
                    table='erc"."well_authorization_number',
                    when='BEFORE',
                ),
            ),
        ),
        migrations.AddField(
            model_name='historicalnaicscode',
            name='is_regulated',
            field=models.BooleanField(
                db_comment='Whether the NAICS code applies to regulated operations', default=True
            ),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='naicscode',
            name='is_regulated',
            field=models.BooleanField(
                db_comment='Whether the NAICS code applies to regulated operations', default=True
            ),
            preserve_default=False,
        ),
        migrations.RunPython(
            code=unregulated_naics_code_data,
            reverse_code=reverse_unregulated_naics_code_data,
        ),
        migrations.RunPython(
            code=unregulated_regulatory_value_data,
            reverse_code=reverse_unregulated_regulatory_value_data,
        ),
        migrations.AlterField(
            model_name='historicalmultipleoperator',
            name='cra_business_number',
            field=models.CharField(
                db_comment='The CRA business number of an operator',
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicaloperator',
            name='cra_business_number',
            field=models.CharField(
                db_comment='The CRA business number of an operator',
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalparentoperator',
            name='cra_business_number',
            field=models.CharField(
                blank=True,
                db_comment='The CRA business number of an operator',
                null=True,
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalpartneroperator',
            name='cra_business_number',
            field=models.CharField(
                db_comment='The CRA business number of an operator',
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='multipleoperator',
            name='cra_business_number',
            field=models.CharField(
                db_comment='The CRA business number of an operator',
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='operator',
            name='cra_business_number',
            field=models.CharField(
                db_comment='The CRA business number of an operator',
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='parentoperator',
            name='cra_business_number',
            field=models.CharField(
                blank=True,
                db_comment='The CRA business number of an operator',
                null=True,
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='partneroperator',
            name='cra_business_number',
            field=models.CharField(
                db_comment='The CRA business number of an operator',
                validators=[
                    django.core.validators.RegexValidator(
                        message='CRA Business Number should be 9 digits.', regex='^\\d{9}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='bcgreenhousegasid',
            name='id',
            field=models.CharField(
                db_comment='The BCGHG ID of an operation or facility',
                max_length=255,
                primary_key=True,
                serialize=False,
                validators=[
                    django.core.validators.RegexValidator(
                        message='BCGHG ID should be 11 digits, starting with 1 or 2.', regex='^[1-2]\\d{10}$'
                    )
                ],
            ),
        ),
        migrations.AlterField(
            model_name='historicalbcgreenhousegasid',
            name='id',
            field=models.CharField(
                db_comment='The BCGHG ID of an operation or facility',
                db_index=True,
                max_length=255,
                validators=[
                    django.core.validators.RegexValidator(
                        message='BCGHG ID should be 11 digits, starting with 1 or 2.', regex='^[1-2]\\d{10}$'
                    )
                ],
            ),
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='closureevent',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='contact',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='document',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='facility',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='facilitydesignatedoperationtimeline',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='multipleoperator',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operation',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operationdesignatedoperatortimeline',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='operator',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='optedinoperationdetail',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='parentoperator',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='partneroperator',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='restartevent',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='temporaryshutdownevent',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='transferevent',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='user',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='useroperator',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.RemoveTrigger(
            model_name='wellauthorizationnumber',
            name='set_updated_audit_columns',
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='closureevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='3958ba250a84e92c1424c97e09e706a4fe50f78f',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_08af1',
                    table='erc"."closure_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='contact',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='54770d4ae44668f98cd858ed78d1efe82dafb467',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_5b391',
                    table='erc"."contact',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='document',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='0cfe08a5e131ef296b3d526c61a0ca6ee986627a',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_93a76',
                    table='erc"."document',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facility',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='bb371813e8ed36ffcededf5793343267ecbed03d',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_71bcb',
                    table='erc"."facility',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facilitydesignatedoperationtimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='2bee65929deff366809f40627273da4e518a4eaf',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_6b036',
                    table='erc"."facility_designated_operation_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='multipleoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='05678a65ceefbd7a1aba8923a594f753572755fc',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_3b460',
                    table='erc"."multiple_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operation',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='b62cda242b442c2d020da18d5307500697f206ed',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_16db9',
                    table='erc"."operation',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operationdesignatedoperatortimeline',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='b499c616029936e2cbefb9af41077a3e7aa6c0a7',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_0ef04',
                    table='erc"."operation_designated_operator_timeline',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='operator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='d03a0c9fcab7bfb9ee10006f89301cf99af98ee2',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_8b376',
                    table='erc"."operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='optedinoperationdetail',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='ae2c6efa8057b200f260784fcdeb5177a9dc319a',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_2d317',
                    table='erc"."opted_in_operation_detail',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='parentoperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='324f86d9c3791bebf00493a3403860bed7b864db',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_68e68',
                    table='erc"."parent_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='partneroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='077957111de0ba443262a92ff60e1a7e073922f5',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_7daea',
                    table='erc"."partner_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='restartevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='792e1e67832b7da255f865721b72186dc435638a',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_4e46e',
                    table='erc"."restart_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='temporaryshutdownevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='6403cfe93bbe97860e4e0b9aa867c5e6972d0b41',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_89448',
                    table='erc"."temporary_shutdown_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='transferevent',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='d98e463d370813c0e400596e69558025d32ca95c',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_0bd79',
                    table='erc"."transfer_event',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='user',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='9030456440dd4e3349876cab9e50383e5f46f308',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_66179',
                    table='erc"."user',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='useroperator',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='12bc9c8a8e609a5d7769aa19c457a244ee2c5c28',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_8abfa',
                    table='erc"."user_operator',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='wellauthorizationnumber',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='38c22a966b9bb30905182648baf9e942541f19d2',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_46b7d',
                    table='erc"."well_authorization_number',
                    when='BEFORE',
                ),
            ),
        ),
        migrations.AlterField(
            model_name='activity',
            name='applicable_to',
            field=models.CharField(
                choices=[('Single Facility Operation', 'Sfo'), ('Linear Facilities Operation', 'Lfo'), ('all', 'All')],
                db_comment='Which type of facility the activity applies to. An activity can be valid for only a Single Facility Operation, only a Linear Facilities Operation or it can apply to both',
                max_length=1000,
            ),
        ),
        migrations.AlterField(
            model_name='historicalactivity',
            name='applicable_to',
            field=models.CharField(
                choices=[('Single Facility Operation', 'Sfo'), ('Linear Facilities Operation', 'Lfo'), ('all', 'All')],
                db_comment='Which type of facility the activity applies to. An activity can be valid for only a Single Facility Operation, only a Linear Facilities Operation or it can apply to both',
                max_length=1000,
            ),
        ),
        migrations.RunPython(
            code=update_activity_applicable_to_field,
            reverse_code=django.db.migrations.operations.special.RunPython.noop,
        ),
        migrations.RemoveConstraint(
            model_name='contact',
            name='unique_email_per_operator',
        ),
        migrations.RunSQL(
            sql='\n                DROP INDEX IF EXISTS "erc"."unique_email_per_operator";\n            ',
            reverse_sql='',
        ),
        migrations.AddConstraint(
            model_name='contact',
            constraint=models.UniqueConstraint(
                condition=models.Q(('archived_at__isnull', True), ('operator__isnull', False)),
                fields=('email', 'operator'),
                name='unique_active_email_per_operator',
            ),
        ),
        migrations.CreateModel(
            name='HistoricalFacilitySnapshot',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'name',
                    models.CharField(
                        db_comment='The name of the facility at the time of the snapshot', max_length=1000
                    ),
                ),
                (
                    'is_current_year',
                    models.BooleanField(
                        blank=True,
                        db_comment="The facility's starting date is within the current year or preceding year at snapshot time",
                        null=True,
                    ),
                ),
                (
                    'starting_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date of the facility starting operations at snapshot time',
                        null=True,
                    ),
                ),
                (
                    'type',
                    models.CharField(
                        choices=[
                            ('Single Facility', 'Single Facility'),
                            ('Large Facility', 'Large Facility'),
                            ('Medium Facility', 'Medium Facility'),
                            ('Small Aggregate', 'Small Aggregate'),
                            ('Electricity Import', 'Electricity Import'),
                        ],
                        db_comment='The type of the facility at snapshot time',
                        max_length=100,
                    ),
                ),
                (
                    'street_address',
                    models.CharField(
                        blank=True,
                        db_comment='Street address of the facility at snapshot time',
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'municipality',
                    models.CharField(
                        blank=True,
                        db_comment='Municipality of the facility at snapshot time',
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'province',
                    models.CharField(
                        blank=True, db_comment='Province of the facility at snapshot time', max_length=1000, null=True
                    ),
                ),
                (
                    'postal_code',
                    models.CharField(
                        blank=True, db_comment='Postal code of the facility at snapshot time', max_length=10, null=True
                    ),
                ),
                (
                    'swrs_facility_id',
                    models.IntegerField(
                        blank=True, db_comment="The facility's SWRS facility ID at snapshot time", null=True
                    ),
                ),
                (
                    'bcghg_id',
                    models.CharField(
                        blank=True,
                        db_comment="The facility's BCGHG identifier at snapshot time",
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'latitude_of_largest_emissions',
                    models.DecimalField(
                        blank=True,
                        db_comment='The latitude of the largest point of emissions at snapshot time',
                        decimal_places=6,
                        max_digits=8,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-90),
                            django.core.validators.MaxValueValidator(90),
                        ],
                    ),
                ),
                (
                    'longitude_of_largest_emissions',
                    models.DecimalField(
                        blank=True,
                        db_comment='The longitude of the largest point of emissions at snapshot time',
                        decimal_places=6,
                        max_digits=9,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-180),
                            django.core.validators.MaxValueValidator(180),
                        ],
                    ),
                ),
                (
                    'well_authorization_numbers',
                    models.JSONField(
                        blank=True,
                        db_comment='List of well authorization numbers at snapshot time',
                        default=list,
                        null=True,
                    ),
                ),
                (
                    'snapshot_timestamp',
                    models.DateTimeField(
                        blank=True, db_comment='The timestamp at which this snapshot was taken', editable=False
                    ),
                ),
                ('history_user_id', models.UUIDField(blank=True, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                (
                    'history_type',
                    models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The facility that this snapshot represents',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        blank=True,
                        db_comment='The operation that owned the facility at the time of the snapshot',
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        db_constraint=False,
                        null=True,
                        on_delete=django.db.models.deletion.DO_NOTHING,
                        related_name='+',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name': 'historical facility snapshot',
                'verbose_name_plural': 'historical Facility Snapshots',
                'db_table': 'erc_history"."facility_snapshot_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='FacilitySnapshot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, null=True)),
                ('updated_at', models.DateTimeField(blank=True, null=True)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                (
                    'name',
                    models.CharField(
                        db_comment='The name of the facility at the time of the snapshot', max_length=1000
                    ),
                ),
                (
                    'is_current_year',
                    models.BooleanField(
                        blank=True,
                        db_comment="The facility's starting date is within the current year or preceding year at snapshot time",
                        null=True,
                    ),
                ),
                (
                    'starting_date',
                    models.DateTimeField(
                        blank=True,
                        db_comment='The date of the facility starting operations at snapshot time',
                        null=True,
                    ),
                ),
                (
                    'type',
                    models.CharField(
                        choices=[
                            ('Single Facility', 'Single Facility'),
                            ('Large Facility', 'Large Facility'),
                            ('Medium Facility', 'Medium Facility'),
                            ('Small Aggregate', 'Small Aggregate'),
                            ('Electricity Import', 'Electricity Import'),
                        ],
                        db_comment='The type of the facility at snapshot time',
                        max_length=100,
                    ),
                ),
                (
                    'street_address',
                    models.CharField(
                        blank=True,
                        db_comment='Street address of the facility at snapshot time',
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'municipality',
                    models.CharField(
                        blank=True,
                        db_comment='Municipality of the facility at snapshot time',
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'province',
                    models.CharField(
                        blank=True, db_comment='Province of the facility at snapshot time', max_length=1000, null=True
                    ),
                ),
                (
                    'postal_code',
                    models.CharField(
                        blank=True, db_comment='Postal code of the facility at snapshot time', max_length=10, null=True
                    ),
                ),
                (
                    'swrs_facility_id',
                    models.IntegerField(
                        blank=True, db_comment="The facility's SWRS facility ID at snapshot time", null=True
                    ),
                ),
                (
                    'bcghg_id',
                    models.CharField(
                        blank=True,
                        db_comment="The facility's BCGHG identifier at snapshot time",
                        max_length=1000,
                        null=True,
                    ),
                ),
                (
                    'latitude_of_largest_emissions',
                    models.DecimalField(
                        blank=True,
                        db_comment='The latitude of the largest point of emissions at snapshot time',
                        decimal_places=6,
                        max_digits=8,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-90),
                            django.core.validators.MaxValueValidator(90),
                        ],
                    ),
                ),
                (
                    'longitude_of_largest_emissions',
                    models.DecimalField(
                        blank=True,
                        db_comment='The longitude of the largest point of emissions at snapshot time',
                        decimal_places=6,
                        max_digits=9,
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-180),
                            django.core.validators.MaxValueValidator(180),
                        ],
                    ),
                ),
                (
                    'well_authorization_numbers',
                    models.JSONField(
                        blank=True,
                        db_comment='List of well authorization numbers at snapshot time',
                        default=list,
                        null=True,
                    ),
                ),
                (
                    'snapshot_timestamp',
                    models.DateTimeField(
                        auto_now_add=True, db_comment='The timestamp at which this snapshot was taken'
                    ),
                ),
                (
                    'archived_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_archived',
                        to='registration.user',
                    ),
                ),
                (
                    'created_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_created',
                        to='registration.user',
                    ),
                ),
                (
                    'facility',
                    models.ForeignKey(
                        db_comment='The facility that this snapshot represents',
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='facility_snapshot',
                        to='registration.facility',
                    ),
                ),
                (
                    'operation',
                    models.ForeignKey(
                        db_comment='The operation that owned the facility at the time of the snapshot',
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='facility_snapshot',
                        to='registration.operation',
                    ),
                ),
                (
                    'updated_by',
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name='%(class)s_updated',
                        to='registration.user',
                    ),
                ),
            ],
            options={
                'verbose_name_plural': 'Facility Snapshots',
                'db_table': 'erc"."facility_snapshot',
                'db_table_comment': 'Snapshots of facility data at the time of transfer. This allows old operators to view facility information as it existed when they owned the facility, even after changes are made by new operators.',
                'abstract': False,
                'indexes': [
                    models.Index(fields=['facility', 'operation'], name='facility_sn_facilit_462ca1_idx'),
                    models.Index(fields=['operation'], name='facility_sn_operati_3806bb_idx'),
                    models.Index(fields=['snapshot_timestamp'], name='facility_sn_snapsho_785eef_idx'),
                ],
            },
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facilitysnapshot',
            trigger=pgtrigger.compiler.Trigger(
                name='set_created_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.created_by_id = (select nullif(current_setting('my.guid', true), '')); new.created_at = now(); return new;",
                    hash='5266783ec3333621311f17d042f8d85c816e54d4',
                    operation='INSERT',
                    pgid='pgtrigger_set_created_audit_columns_80665',
                    table='erc"."facility_snapshot',
                    when='BEFORE',
                ),
            ),
        ),
        pgtrigger.migrations.AddTrigger(
            model_name='facilitysnapshot',
            trigger=pgtrigger.compiler.Trigger(
                name='set_updated_audit_columns',
                sql=pgtrigger.compiler.UpsertTriggerSql(
                    func="new.updated_by_id = (select nullif(current_setting('my.guid', true), '')); new.updated_at = now(); return new;",
                    hash='20129c3a449227930792f361a0d3edf239953552',
                    operation='UPDATE',
                    pgid='pgtrigger_set_updated_audit_columns_6a831',
                    table='erc"."facility_snapshot',
                    when='BEFORE',
                ),
            ),
        ),
    ]
